Managing Firewall Threat Defense with Cloud-delivered Firewall
Management Center inCisco Defense Orchestrator
First Published: 2022-06-28
Last Modified: 2024-07-12
Americas Headquarters
Cisco Systems, Inc.
170WestTasman Drive
San Jose, CA95134-1706
USA
http://www .cisco.com
Tel:408526-4000
800553-NETS (6387)
Fax: 408527-0883

THE SPECIFICA TIONS AND INFORMA TION REGARDING THE PRODUCTS INTHIS MANUAL ARE SUBJECT TOCHANGE WITHOUT NOTICE. ALL STATEMENTS,
INFORMA TION, AND RECOMMENDA TIONS INTHIS MANUAL ARE BELIEVED TOBEACCURA TEBUT ARE PRESENTED WITHOUT WARRANTY OFANY KIND,
EXPRESS ORIMPLIED. USERS MUST TAKE FULL RESPONSIBILITY FOR THEIR APPLICA TION OFANY PRODUCTS.
THE SOFTW ARE LICENSE AND LIMITED WARRANTY FOR THE ACCOMP ANYING PRODUCT ARE SET FOR THINTHE INFORMA TION PACKET THA TSHIPPED WITH
THE PRODUCT AND ARE INCORPORA TED HEREIN BYTHIS REFERENCE. IFYOU ARE UNABLE TOLOCA TETHE SOFTW ARE LICENSE ORLIMITED WARRANTY ,
CONT ACT YOUR CISCO REPRESENT ATIVE FOR ACOPY .
TheCisco implementation ofTCP header compression isanadaptation ofaprogram developed bytheUniversity ofCalifornia, Berkeley (UCB) aspartofUCB's public domain version of
theUNIX operating system. Allrights reserved. Copyright ©1981, Regents oftheUniversity ofCalifornia.
NOTWITHST ANDING ANY OTHER WARRANTY HEREIN, ALL DOCUMENT FILES AND SOFTW ARE OFTHESE SUPPLIERS ARE PROVIDED “AS IS"WITH ALL FAUL TS.
CISCO AND THE ABOVE-NAMED SUPPLIERS DISCLAIM ALL WARRANTIES, EXPRESSED ORIMPLIED, INCLUDING, WITHOUT LIMIT ATION, THOSE OF
MERCHANT ABILITY ,FITNESS FOR APARTICULAR PURPOSE AND NONINFRINGEMENT ORARISING FROM ACOURSE OFDEALING, USAGE, ORTRADE PRACTICE.
INNOEVENT SHALL CISCO ORITSSUPPLIERS BELIABLE FOR ANY INDIRECT ,SPECIAL, CONSEQUENTIAL, ORINCIDENT ALDAMAGES, INCLUDING, WITHOUT
LIMIT ATION, LOST PROFITS ORLOSS ORDAMAGE TODATAARISING OUT OFTHE USE ORINABILITY TOUSE THIS MANUAL, EVEN IFCISCO ORITSSUPPLIERS
HAVEBEEN ADVISED OFTHE POSSIBILITY OFSUCH DAMAGES.
Any Internet Protocol (IP)addresses andphone numbers used inthisdocument arenotintended tobeactual addresses andphone numbers. Any examples, command display output, network
topology diagrams, andother figures included inthedocument areshown forillustrative purposes only.Any useofactual IPaddresses orphone numbers inillustrative content isunintentional
andcoincidental.
Allprinted copies andduplicate softcopies ofthisdocument areconsidered uncontrolled. Seethecurrent online version forthelatest version.
Cisco hasmore than 200offices worldwide. Addresses andphone numbers arelisted ontheCisco website atwww .cisco.com/go/of fices.
Cisco andtheCisco logo aretrademarks orregistered trademarks ofCisco and/or itsaffiliates intheU.S. andother countries. Toview alistofCisco trademarks, gotothisURL:
https://www .cisco.com/c/en/us/about/legal/trademarks.html .Third-party trademarks mentioned aretheproperty oftheir respective owners. Theuseoftheword partner does notimply a
partnership relationship between Cisco andanyother company .(1721R)
©2024 Cisco Systems, Inc.Allrights reserved.

CONTENTS
Managing Cisco Secur eFirewall ThreatDefense with Cloud-deli veredFirewall Management Center 89 PART I
Managing Cisco Secur eFirewall ThreatDefense Devices with Cloud-deli veredFirewall Management
Center 1CHAPTER 1
Enable Cloud-delivered Firewall Management Center onYourCDO Tenant 3
Hardware andSoftware Support 3
CDO Platform Maintenance Schedule 4
Cisco AIAssistant User Guide 5 CHAPTER 2
Getting Started with Cisco AIAssistant 5
Prompt Guide forCisco AIAssistant 9
Create Policy Rules 12
Cisco AIAssistant Frequently Asked Questions (FAQ) 16
Onboard Devices toCloud-deli veredFirewall Management Center 21 PART II
Onboard anFTD totheCloud-deli veredFirewall Management Center 23 CHAPTER 3
Onboarding Overview 23
Prerequisites toOnboard aDevice toCloud-delivered Firewall Management Center 24
Onboard aDevice with aCLIRegistration Key 25
Onboard aDevice with Zero-T ouch Provisioning 27
Deploy aThreat Defense Device with AWS 28
Deploy aThreat Defense Device inAzure 30
Onboard anAzure VNet Environment 30
Deploy aThreat Defense Virtual inAzure 32
Deploy aThreat Defense Device toGoogle Cloud Platform 33
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
iii

Create VPC Networks forGCP 33
Deploy aThreat Defense Device onGoogle Cloud Platform 34
Onboard aSecure Firewall Threat Defense Cluster 36
Delete Devices from Cloud-delivered Firewall Management Center 37
About Device Interfaces 38
Management Interfaces 38
About Data Interfaces 38
Network Routes onDevice Management Interfaces 39
LogIntotheCommand Line Interface ontheDevice 39
Troubleshooting 41
Troubleshoot Cloud-delivered Firewall Management Center Connectivity with TCP 41
Troubleshoot Threat Defense Device Connectivity 42
Troubleshoot Device Connectivity Loss After Cloud-delivered Firewall Management Center
Update 42
Troubleshoot Onboarding aDevice totheCloud-delivered Firewall Management Center Using the
CLIRegistration Key 43
Error: Device Remains inPending Setup State After Onboarding 43
Troubleshoot Onboarding aDevice toCloud-delivered Firewall Management Center Using theSerial
Number 43
Device isOffline orUnreachable 43
Error: Serial Number Already Claimed 44
Error: Claim Error 45
Error: Failed toClaim 46
Error: Provisional Error 47
Migrate On-Pr emManagement Center Managed Secur eFirewall ThreatDefense toCloud-deli vered
Firewall Management Center 49CHAPTER 4
About Migrating Threat Defense toCloud-delivered Firewall Management Center 49
Supported Secure Firewall Management Center andSecure Firewall Threat Defense Software for
Migration 50
Licensing 51
Supported Features 51
Unsupported Features 54
Migration Guidelines andLimitations forVPN Configuration 55
Managing Threat Defense Events andAnalytics 56
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
ivContents

Before YouBegin Migration 57
Migrate Threat Defense toCloud-delivered Firewall Management Center 59
ViewaThreat Defense Migration Job 61
Proceed Migration Process 63
Commit Migration Changes Manually toCloud-delivered Firewall Management Center 63
Revert theThreat Defense Management toOn-Prem Firewall Management Center 64
ViewMigrated Devices 65
Generate aThreat Defense Migration Report 66
Delete aMigration Job 66
Enable Notification Settings 67
Troubleshoot Threat Defense Migration toCloud 67
Verify Threat Defense Connectivity with Cloud-delivered Firewall Management Center 70
Device Management 73 CHAPTER 5
LogIntotheCommand Line Interface ontheDevice 73
Add aDevice Group 75
Shut Down orRestart theDevice 75
Download theManaged Device List 76
Configure Device Settings 77
Edit General Settings 77
Copy aConfiguration toAnother Device 79
Export andImport theDevice Configuration 80
Edit License Settings 84
ViewSystem Information 84
ViewtheInspection Engine 85
ViewHealth Information 85
Edit Management Settings 85
Update theHostname orIPAddress intheManagement Center 85
Change Both Management Center andThreat Defense IPAddresses 87
Change theManager Access Interface from Management toData 91
Change theManager Access Interface from Data toManagement 95
Change theManager Access Interface from Management toData inaHigh Availability Pair 97
Change theManager Access Interface from Data toManagement inaHigh Availability Pair 101
Configure aRedundant Manager Access Data Interface 103
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
vContents

Modify Threat Defense Management Interfaces attheCLI 108
Modify theThreat Defense Data Interface Used forManagement attheCLI 114
Manually Roll Back theConfiguration iftheManagement Center Loses Connectivity 116
Troubleshoot Management Connectivity onaData Interface 118
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair 123
ViewInventory Details 128
Edit Applied Policies 128
Edit Advanced Settings 130
Configure Automatic Application Bypass 131
Configure Object Group Search 131
Configure Interface Object Optimization 133
Edit Deployment Settings 133
Edit Cluster Health Monitor Settings 136
HotSwap anSSD ontheSecure Firewall 3100 140
Migrate theConfiguration toaNew Model 143
Supported Devices forMigration 143
License forMigration 143
Prerequisites forMigration 144
What Configurations Does theWizard Migrate? 144
Limitations forMigration 146
Migrate theSecure Firewall Threat Defense 146
Best Practices forMigration 147
Change Management 149 CHAPTER 6
About Change Management 149
How toConfigure Devices intheChange Management Workflow 150
Creating Separate Approver andConfiguration Roles 150
Policies andObjects thatSupport Change Management 151
Requirements andPrerequisites forChange Management 152
Guidelines andLimitations forChange Management 153
Enabling orDisabling Change Management 153
Managing Tickets 154
Creating Change Management Tickets 156
Opening aTicket forConfiguration Changes 156
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
viContents

Previewing aTicket 157
Submitting aTicket 157
Discarding aTicket 158
Approving orRejecting aTicket 158
History forChange Management 159
Users 161 CHAPTER 7
About Users 161
Internal andExternal Users 161
CLIAccess 161
CLIUser Roles 162
Requirements andPrerequisites forUser Accounts forDevices 162
Guidelines andLimitations forUser Accounts forDevices 163
Add anInternal User attheCLI 163
Troubleshooting LDAP Authentication Connections 165
Conf iguration Deployment 169 CHAPTER 8
About Configuration Deployment 169
Configuration Changes thatRequire Deployment 169
Deployment Preview 170
Selective Policy Deployment 171
System Username 173
Auto-Enabling ofApplication Detectors 173
Asset Rediscovery with Network Discovery Policy Changes 174
Snort Restart Scenarios 174
Restart Warnings forDevices 174
Inspect TrafficDuring Policy Apply 175
Snort Restart TrafficBehavior 176
Configurations thatRestart theSnort Process When Deployed orActivated 178
Changes thatImmediately Restart theSnort Process 179
Requirements andPrerequisites forPolicy Management 180
Best Practices forDeploying Configuration Changes 180
Deploy theConfiguration 181
Deploy Configuration Changes 182
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
viiContents

Redeploy Existing Configurations toaDevice 187
Manage Deployments 189
ViewDeployment Status 189
ViewDeployment History 189
Download Policy Changes Report forMultiple Devices 193
Compare Policies 194
Generate Current Policy Reports 195
History forConfiguration Deployment 196
System Settings 199 PART III
System Conf iguration 201 CHAPTER 9
Requirements andPrerequisites fortheSystem Configuration 201
Manage theSecure Firewall Management Center System Configuration 201
Access Control Preferences 202
Change Reconciliation 203
Configuring Change Reconciliation 203
Change Reconciliation Options 204
Email Notification 204
Intrusion Policy Preferences 204
SetIntrusion Policy Preferences 204
Manager Remote Access 205
Network Analysis Policy Preferences 205
Users 207 CHAPTER 10
About Users 207
Internal andExternal Users 207
User Roles 207
Create aUser Record with YourCDO Username 210
Troubleshooting LDAP Authentication Connections 211
Updates 213 CHAPTER 11
About System Updates 213
Guidelines andLimitations forSystem Updates 215
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
viiiContents

Update theVulnerability Database (VDB) 215
Schedule VDB Updates 216
Manually Update theVDB 216
Update theGeolocation Database (GeoDB) 217
Schedule GeoDB Updates 217
Manually Update theGeoDB 218
Update Intrusion Rules 218
Schedule Intrusion Rule Updates 220
Manually Update Intrusion Rules 220
Import Local Intrusion Rules 221
Best Practices forImporting Local Intrusion Rules 222
ViewIntrusion Rule Update Logs 223
Intrusion Rule Update LogDetails 223
Licenses 227 CHAPTER 12
About Licenses 227
Smart Software Manager andAccounts 228
How Licensing Works fortheManagement Center andDevices 228
Periodic Communication with theSmart Software Manager 228
Evaluation Mode 228
Out-of-Compliance State 229
Unregistered State 229
End-User License Agreement 229
License Types andRestrictions 229
Essentials Licenses 231
Malware Defense Licenses 231
IPSLicenses 232
Carrier License 233
URL Filtering Licenses 234
Secure Client Licenses 234
Licensing forExport-Controlled Functionality 235
Threat Defense Virtual Licenses 236
License PIDs 237
Requirements andPrerequisites forLicensing 243
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
ixContents

Requirements andPrerequisites forLicensing forHigh Availability ,Clustering, and
Multi-Instance 243
Licensing forDevice High-A vailability 243
Licensing forDevice Clusters 243
Create aCisco Account 244
Create aSmart Account andAdd Licenses 244
Configure Smart Licensing 246
Register theManagement Center forSmart Licensing 246
Register theManagement Center with theSmart Software Manager 246
Assign Licenses toDevices 249
Assign Licenses toaSingle Device 249
Assign Licenses toMultiple Managed Devices 250
Manage Smart Licensing 250
Deregister theManagement Center 251
Monitoring Smart License Status 251
Monitoring Smart Licenses 252
Troubleshooting Smart Licensing 253
Configure Legacy Management Center PAK-Based Licenses 253
Additional Information about Licensing 254
Security Certif ications Compliance 255 CHAPTER 13
Security Certifications Compliance Modes 255
Security Certifications Compliance Characteristics 256
Security Certifications Compliance Recommendations 257
Appliance Hardening 258
Protecting YourNetwork 259
Health andMonitoring 261 PART IV
Health 263 CHAPTER 14
Requirements andPrerequisites forHealth Monitoring 263
About Health Monitoring 263
Health Modules 265
Configuring Health Monitoring 275
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xContents

Health Policies 276
Default Health Policy 276
Creating Health Policies 276
Apply aHealth Policy 277
Edit aHealth Policy 278
Delete aHealth Policy 279
Send Vendor-Neutral Telemetry Streams Using OpenConfig 279
Generate Certificates andPrivate Keys 280
Configure OpenConfig Streaming Telemetry 282
Troubleshoot OpenConfig Streaming Telemetry 283
Device Exclusion inHealth Monitoring 285
Excluding Appliances from Health Monitoring 285
Excluding Health Policy Modules 286
Expired Health Monitor Exclusions 287
Health Monitor Alerts 287
Health Monitor Alert Information 287
Creating Health Monitor Alerts 288
Editing Health Monitor Alerts 289
Deleting Health Monitor Alerts 289
About theHealth Monitor 289
Using Management Center Health Monitor 291
Running AllModules foranAppliance 292
Running aSpecific Health Module 292
Generating Health Module Alert Graphs 293
Hardware Statistics onManagement Center 293
Device Health Monitors 294
Viewing System Details andTroubleshooting 294
Viewing theDevice Health Monitor 295
Cluster Health Monitor 298
Viewing theCluster Health Monitor 299
Health Monitor Status Categories 300
Health Event Views 301
Viewing Health Events 301
Viewing theHealth Events Table 302
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xiContents

TheHealth Events Table 302
About System Auditing 303
Audit Records 303
Audit LogWorkflow Fields 304
TheAudit Events Table View 304
Troubleshooting 307 CHAPTER 15
Best Practices forTroubleshooting 307
System Messages 307
Message Types 308
Message Management 310
ViewBasic System Information 310
ViewAppliance Information 310
Manage System Messages 311
ViewDeployment Messages 311
ViewUpgrade Messages 312
ViewHealth Messages 313
ViewTaskMessages 313
Manage TaskMessages 314
Memory Usage Thresholds forHealth Monitor Alerts 314
Disk Usage andDrain ofEvents Health Monitor Alerts 315
Health Monitor Reports forTroubleshooting 319
Generate Troubleshooting Files forSpecific System Functions 319
Download Advanced Troubleshooting Files 320
General Troubleshooting 321
Connection-Based Troubleshooting 321
Troubleshoot aConnection 321
Advanced Troubleshooting fortheSecure Firewall Threat Defense Device 322
Packet Capture Overview 322
UsetheCapture Trace 324
Packet Tracer Overview 326
UsethePacket Tracer 326
How tousetheThreat Defense Diagnostic CLIfrom theWebInterface 328
Feature-Specific Troubleshooting 329
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xiiContents

Tools 331 PART V
Backup/Restor e333 CHAPTER 16
About Backup andRestore 333
Requirements forBackup andRestore 334
Guidelines andLimitations forBackup andRestore 335
Best Practices forBackup andRestore 335
Back UpManaged Devices 338
Back UpaThreat Defense Device from Cloud-delivered Firewall Management Center 338
Restore CDO-Managed Devices 339
Restore aThreat Defense Device 339
Restore Threat Defense from Backup: Threat Defense Virtual 342
Scheduling 345 CHAPTER 17
About TaskScheduling 345
Requirements andPrerequisites forTaskScheduling 346
Configuring aRecurring Task 346
Scheduled Backups 347
Schedule Remote Device Backups 347
Configuring Certificate Revocation ListDownloads 348
Automating Policy Deployment 348
Nmap Scan Automation 349
Scheduling anNmap Scan 350
Automating Report Generation 351
Specify Report Generation Settings foraScheduled Report 351
Automating Cisco Recommendations 352
Software Upgrade Automation 353
Automating Software Downloads 353
Automating Software Pushes 354
Automating Software Installs 355
Vulnerability Database Update Automation 355
Automating VDB Update Downloads 356
Automating VDB Update Installs 356
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xiiiContents

Automating URL Filtering Updates Using aScheduled Task 357
Scheduled TaskReview 358
TaskListDetails 358
Viewing Scheduled Tasks ontheCalendar 359
Editing Scheduled Tasks 360
Deleting Scheduled Tasks 360
Import/Export 361 CHAPTER 18
About Configuration Import/Export 361
Configurations thatSupport Import/Export 361
Special Considerations forConfiguration Import/Export 362
Requirements andPrerequisites forConfiguration Import/Export 363
Exporting Configurations 363
Importing Configurations 364
Import Conflict Resolution 365
Reporting andAlerting 369 PART VI
Exter nalAlerting with Alert Responses 371 CHAPTER 19
Secure Firewall Management Center Alert Responses 371
Configurations Supporting Alert Responses 372
Requirements andPrerequisites forAlert Responses 372
Creating anSNMP Alert Response 372
Creating aSyslog Alert Response 374
Syslog Alert Facilities 375
Syslog Severity Levels 376
Creating anEmail Alert Response 376
Exter nalAlerting forIntrusion Events 379 CHAPTER 20
About External Alerting forIntrusion Events 379
License Requirements forExternal Alerting forIntrusion Events 380
Requirements andPrerequisites forExternal Alerting forIntrusion Events 380
Configuring SNMP Alerting forIntrusion Events 380
Intrusion SNMP Alert Options 381
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xivContents

Configuring Syslog Alerting forIntrusion Events 382
Facilities andSeverities forIntrusion Syslog Alerts 383
Configuring Email Alerting forIntrusion Events 384
Intrusion Email Alert Options 384
Events andAssets 387 PART VII
Cisco Security Analytics andLogging 389 CHAPTER 21
About Security Analytics andLogging 389
Comparison ofSAL Remote Event Storage andMonitoring Options 390
About SAL (OnPrem) 390
Licensing forSAL (OnPrem) 391
Manage SAL (OnPrem) forCDO-Managed Threat Defense Devices 391
Configure SAL (OnPrem) Integration 393
Configure aSecure Network Analytics Manager 393
Configure aSecure Network Analytics Data Store 394
About SAL (SaaS) 396
Licensing forSAL (SaaS) 396
Configure theSAL (SaaS) Integration 396
Requirements, Guideline, andLimitations fortheSAL (SaaS) Integration 397
Send Cloud-delivered Firewall Management Center-Managed Events toSAL (SaaS) Using Syslog 397
Send Cloud-delivered Firewall Management Center-Managed Event Logs toSAL (SaaS) Using a
Direct Connection 400
ViewandWorkwith Events inCDO 401
ViewandWorkwith Events inCisco Secure Cloud Analytics 401
FTD Dashboard 403 CHAPTER 22
About theFTD Dashboard 403
ViewtheFTD Dashboard 404
FTD Dashboard Widgets 405
TopIntrusion Rules Widget 405
TopIntrusion Attackers Widget 405
TopIntrusion TargetsWidget 405
TopMalware Signatures Widget 405
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xvContents

TopMalware Senders Widget 405
TopMalware Receivers Widget 406
Malware Events byDisposition Widget 406
Network Activity Widget 406
Event Activity Widget 406
Access Control Actions Widget 406
TopAccess Control Policies Widget 406
TopAccess Control Rules Widget 406
TopDevices Widget 406
TopUsers Widget 406
TopUsers byBlocked Connections Widget 407
TopDevices with Health Alerts Widget 407
TopLoaded Devices Widget 407
TopWebApplications Widget 407
TopClient Applications Widget 407
TopBlocked WebApplications Widget 407
Modify TimeSettings fortheFTD Dashboard 407
Device Operations 409 PART VIII
Transpar entorRouted Firewall Mode 411 CHAPTER 23
About theFirewall Mode 411
About Routed Firewall Mode 411
About Transparent Firewall Mode 412
Using theTransparent Firewall inYourNetwork 412
Passing TrafficForRouted-Mode Features 412
About Bridge Groups 413
Bridge Virtual Interface (BVI) 413
Bridge Groups inTransparent Firewall Mode 413
Bridge Groups inRouted Firewall Mode 414
Allowing Layer 3Traffic 415
Allowed MAC Addresses 415
BPDU Handling 415
MAC Address vs.Route Lookups 416
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xviContents

Unsupported Features forBridge Groups inTransparent Mode 417
Unsupported Features forBridge Groups inRouted Mode 418
Default Settings 419
Guidelines forFirewall Mode 419
SettheFirewall Mode 420
Logical Devices ontheFirepower4100/9300 423 CHAPTER 24
About Interfaces 423
Chassis Management Interface 423
Interface Types 424
FXOS Interfaces vs.Application Interfaces 426
Shared Interface Scalability 428
Shared Interface Best Practices 428
Shared Interface Usage Examples 430
Viewing Shared Interface Resources 436
Inline SetLink State Propagation fortheThreat Defense 437
About Logical Devices 437
Standalone andClustered Logical Devices 438
Logical Device Application Instances: Container andNative 438
Container Instance Interfaces 438
How theChassis Classifies Packets 439
Classification Examples 439
Cascading Container Instances 443
Typical Multi-Instance Deployment 444
Automatic MAC Addresses forContainer Instance Interfaces 445
Container Instance Resource Management 446
Performance Scaling Factor forMulti-Instance Capability 446
Container Instances andHigh Availability 446
Container Instances andClustering 446
Licenses forContainer Instances 446
Requirements andPrerequisites forLogical Devices 447
Requirements andPrerequisites forHardware andSoftware Combinations 447
Requirements andPrerequisites forContainer Instances 449
Requirements andPrerequisites forHigh Availability 450
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xviiContents

Requirements andPrerequisites forClustering 450
Guidelines andLimitations forLogical Devices 454
Guidelines andLimitations forInterfaces 454
General Guidelines andLimitations 457
Configure Interfaces 457
Enable orDisable anInterface 457
Configure aPhysical Interface 458
Add anEtherChannel (Port Channel) 459
Add aVLAN Subinterface forContainer Instances 461
Configure Logical Devices 462
Add aResource Profile forContainer Instances 462
Add aStandalone Threat Defense 463
Add aStandalone Threat Defense fortheCisco Defense Orchestrator 468
Add aHigh Availability Pair 474
Change anInterface onaThreat Defense Logical Device 475
Connect totheConsole oftheApplication 477
High Availability 479 CHAPTER 25
About Secure Firewall Threat Defense High Availability 479
High Availability Support onThreat Defense Devices inaRemote Branch OfficeDeployment 480
High Availability System Requirements 480
Hardware Requirements 480
Software Requirements 481
License Requirements forThreat Defense Devices inaHigh Availability Pair 481
Failover andStateful Failover Links 481
Failover Link 481
Stateful Failover Link 483
Avoiding Interrupted Failover andData Links 483
MAC Addresses andIPAddresses inHigh Availability 485
Stateful Failover 486
Supported Features 486
Unsupported Features 488
Bridge Group Requirements forHigh Availability 488
Failover Health Monitoring 489
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xviiiContents

Unit Health Monitoring 489
Heartbeat Module Redundancy 489
Interface Monitoring 490
Failover Triggers andDetection Timing 491
About Active/Standby Failover 492
Primary/Secondary Roles andActive/Standby Status 493
Active Unit Determination atStartup 493
Failover Events 493
Config-Sync Optimization 494
Requirements andPrerequisites forHigh Availability 495
Guidelines forHigh Availability 495
Add aHigh Availability Pair 498
Configure Optional High Availability Parameters 501
Configure Standby IPAddresses andInterface Monitoring 501
Edit High Availability Failover Criteria 502
Configure Virtual MAC Addresses 502
Manage High Availability 503
Switch theActive Peer intheThreat Defense High Availability Pair 503
Refresh Node Status foraSingle Threat Defense High Availability Pair 504
Suspend andResume High Availability 504
Replace aUnit inThreat Defense High Availability Pair 505
Replace aPrimary Threat Defense HAUnit with noBackup 505
Replace aSecondary Threat Defense HAUnit with noBackup 506
Break aHigh Availability Pair 507
Remove aHigh Availability Pair 508
Monitoring High Availability 509
ViewFailover History 509
ViewStateful Failover Statistics 509
Troubleshooting High Availability Break inaRemote Branch Deployment 509
How toBreak aHigh Availability PairinActive-Active State 510
How toBreak aHigh Availability Pairwhen Active orStandby Unit hasLost Connectivity 511
How toaBreak High Availability Pairwhen theSecondary Device isinaFailed orDisabled State 513
History forHigh Availability 514
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xixContents

Clustering fortheSecur eFirewall 3100 517 CHAPTER 26
About Clustering fortheSecure Firewall 3100 517
How theCluster FitsintoYourNetwork 517
Control andData Node Roles 518
Cluster Interfaces 518
Cluster Control Link 518
Configuration Replication 518
Management Network 518
Licenses forClustering 519
Requirements andPrerequisites forClustering 519
Guidelines forClustering 520
Configure Clustering 524
About Cluster Interfaces 524
Cluster Control Link 524
Spanned EtherChannels 526
Cable andAdd Devices totheManagement Center 529
Create aCluster 531
Configure Interfaces 537
Configure Cluster Health Monitor Settings 538
Manage Cluster Nodes 542
Add aNew Cluster Node 542
Break aNode 544
Break theCluster 545
Disable Clustering 546
Rejoin theCluster 547
Change theControl Node 547
Edit theCluster Configuration 548
Reconcile Cluster Nodes 549
Delete (Unregister) theCluster orNodes andRegister toaNew Management Center 551
Monitoring theCluster 552
Cluster Health Monitor Dashboard 554
Viewing Cluster Health 555
Cluster Metrics 556
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxContents

Examples forClustering 557
Firewall onaStick 557
TrafficSegregation 558
Reference forClustering 558
Threat Defense Features andClustering 558
Unsupported Features with Clustering 558
Centralized Features forClustering 559
Connection Settings andClustering 560
FTP andClustering 560
Multicast Routing inIndividual Interface Mode 560
NATandClustering 560
Dynamic Routing 562
SIPInspection andClustering 562
SNMP andClustering 563
Syslog andClustering 563
Cisco TrustSec andClustering 563
VPN andClustering 563
Performance Scaling Factor 563
Control Node Election 564
High Availability Within theCluster 564
Node Health Monitoring 564
Interface Monitoring 565
Status After Failure 565
Rejoining theCluster 565
Data Path Connection State Replication 566
How theCluster Manages Connections 566
Connection Roles 566
New Connection Ownership 568
Sample Data Flow forTCP 568
Sample Data Flow forICMP andUDP 569
History forClustering 570
Clustering forThreatDefense Virtual inaPrivateCloud 571 CHAPTER 27
About Threat Defense Virtual Clustering inthePrivate Cloud 571
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxiContents

How theCluster FitsintoYourNetwork 571
Control andData Node Roles 572
Individual Interfaces 572
Policy-Based Routing 573
Equal-Cost Multi-Path Routing 573
Cluster Control Link 574
Cluster Control Link TrafficOverview 574
Configuration Replication 575
Management Network 575
Licenses forThreat Defense Virtual Clustering 575
Requirements andPrerequisites forThreat Defense Virtual Clustering 575
Guidelines forThreat Defense Virtual Clustering 576
Configure Threat Defense Virtual Clustering 577
Add Devices totheManagement Center 577
Create aCluster 578
Configure Interfaces 585
Configure Cluster Health Monitor Settings 586
Manage Cluster Nodes 590
Add aNew Cluster Node 590
Break aNode 592
Break theCluster 593
Disable Clustering 594
Rejoin theCluster 595
Change theControl Node 595
Edit theCluster Configuration 596
Reconcile Cluster Nodes 597
Delete theCluster orNodes from theManagement Center 599
Monitoring theCluster 599
Cluster Health Monitor Dashboard 602
Viewing Cluster Health 603
Cluster Metrics 604
Reference forClustering 605
Threat Defense Features andClustering 605
Unsupported Features andClustering 605
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxiiContents

Centralized Features forClustering 605
Connection Settings andClustering 606
Dynamic Routing andClustering 606
FTP andClustering 607
NATandClustering 607
SIPInspection andClustering 609
SNMP andClustering 609
Syslog andClustering 609
Cisco Trustsec andClustering 609
VPN andClustering 610
Performance Scaling Factor 610
Control Node Election 610
High Availability within theCluster 611
Node Health Monitoring 611
Interface Monitoring 611
Status After Failure 611
Rejoining theCluster 612
Data Path Connection State Replication 612
How theCluster Manages Connections 613
Connection Roles 613
New Connection Ownership 614
Sample Data Flow forTCP 614
Sample Data Flow forICMP andUDP 615
History forThreat Defense Virtual Clustering inaPrivate Cloud 617
Clustering forThreatDefense Virtual inaPublic Cloud 619 CHAPTER 28
About Threat Defense Virtual Clustering inthePublic Cloud 620
How theCluster FitsintoYourNetwork 620
Individual Interfaces 620
Control andData Node Roles 621
Cluster Control Link 621
Cluster Control Link TrafficOverview 622
Configuration Replication 622
Management Network 622
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxiiiContents

Licenses forThreat Defense Virtual Clustering 622
Requirements andPrerequisites forThreat Defense Virtual Clustering 623
Guidelines forThreat Defense Virtual Clustering 624
Deploy theCluster inAWS 626
AWSGateway Load Balancer andGeneve Single-Arm Proxy 626
Sample Topology 627
End-to-End Process forDeploying Threat Defense Virtual Cluster onAWS 627
Templates 629
Deploy theStack inAWSUsing aCloudFormation Template 630
Deploy theCluster inAWSManually 635
Create theDay0 Configuration forAWS 635
Deploy Cluster Nodes 639
Deploy theCluster inAzure 640
Sample Topology forGWLB-based Cluster Deployment 641
Azure Gateway Load Balancer andPaired Proxy 642
End-to-End Process forDeploying Threat Defense Virtual Cluster inAzure with GWLB 642
Templates 644
Prerequisites 644
Deploy Cluster onAzure with GWLB Using anAzure Resource Manager Template 645
Sample Topology forNLB-based Cluster Deployment 648
End-to-End Process forDeploying Threat Defense Virtual Cluster inAzure with NLB 648
Templates 650
Prerequisites 650
Deploy Cluster onAzure with NLB Using anAzure Resource Manager Template 651
Deploy theCluster inAzure Manually 653
Create theDay0 Configuration forAzure 653
Deploy Cluster Nodes Manually -GWLB-based Deployment 657
Deploy Cluster Nodes Manually -NLB-based Deployment 658
Troubleshooting Cluster Deployment inAzure 658
Deploy theCluster inGCP 659
Sample Topology 660
End-to-End Process forDeploying Threat Defense Virtual Cluster inGCP 660
Templates 662
Deploy theInstance Group inGCP Using anInstance Template 662
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxivContents

Deploy theCluster inGCP Manually 663
Create theDay0 Configuration forGCP 663
Deploy Cluster Nodes Manually 666
Allow Health Checks forGCP Network Load Balancers 666
Add theCluster totheManagement Center (Manual Deployment) 667
Configure Cluster Health Monitor Settings 673
Manage Cluster Nodes 677
Disable Clustering 678
Rejoin theCluster 678
Reconcile Cluster Nodes 678
Delete (Unregister) theCluster orNodes andRegister toaNew Management Center 679
Monitoring theCluster 680
Cluster Health Monitor Dashboard 683
Viewing Cluster Health 684
Cluster Metrics 685
Upgrading theCluster 686
Reference forClustering 686
Threat Defense Features andClustering 687
Unsupported Features andClustering 687
Centralized Features forClustering 687
Cisco Trustsec andClustering 688
Connection Settings andClustering 688
Dynamic Routing andClustering 688
FTP andClustering 689
NATandClustering 689
SIPInspection andClustering 691
SNMP andClustering 691
Syslog andClustering 691
VPN andClustering 691
Performance Scaling Factor 692
Control Node Election 692
High Availability within theCluster 692
Node Health Monitoring 693
Interface Monitoring 693
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxvContents

Status After Failure 693
Rejoining theCluster 693
Data Path Connection State Replication 694
How theCluster Manages Connections 694
Connection Roles 694
New Connection Ownership 696
Sample Data Flow forTCP 696
Sample Data Flow forICMP andUDP 697
History forThreat Defense Virtual Clustering inthePublic Cloud 698
Clustering fortheFirepower4100/9300 699 CHAPTER 29
About Clustering ontheFirepower 4100/9300 Chassis 699
Bootstrap Configuration 700
Cluster Members 700
Cluster Control Link 700
Size theCluster Control Link 701
Cluster Control Link Redundancy 701
Cluster Control Link Reliability forInter-Chassis Clustering 702
Cluster Control Link Network 702
Management Network 702
Management Interface 702
Cluster Interfaces 702
Spanned EtherChannels 702
Configuration Replication 703
Licenses forClustering 703
Requirements andPrerequisites forClustering 704
Clustering Guidelines andLimitations 707
Configure Clustering 711
FXOS: Add aThreat Defense Cluster 711
Create aThreat Defense Cluster 711
Add More Cluster Nodes 722
Management Center: Add aCluster 725
Management Center: Configure Cluster ,Data Interfaces 731
Management Center: Configure Cluster Health Monitor Settings 733
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxviContents

FXOS: Remove aCluster Node 737
Management Center: Manage Cluster Members 738
Add aNew Cluster Member 738
Replace aCluster Member 739
Deactivate aMember 740
Rejoin theCluster 741
Delete (Unregister) aData Node 741
Change theControl Unit 742
Reconcile Cluster Members 743
Management Center: Monitoring theCluster 743
Cluster Health Monitor Dashboard 745
Viewing Cluster Health 746
Cluster Metrics 748
Examples forClustering 748
Firewall onaStick 749
TrafficSegregation 750
Reference forClustering 750
Threat Defense Features andClustering 750
Unsupported Features with Clustering 750
Centralized Features forClustering 751
Connection Settings 752
Dynamic Routing andClustering 752
FTP andClustering 753
Multicast Routing andClustering 753
NATandClustering 753
SIPInspection andClustering 754
SNMP andClustering 754
Syslog andClustering 755
TLS/SSL Connections andClustering 755
Cisco TrustSec andClustering 755
VPN andClustering 755
Performance Scaling Factor 755
Control Unit Election 755
High Availability Within theCluster 756
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxviiContents

Chassis-Application Monitoring 756
Unit Health Monitoring 756
Interface Monitoring 757
Decorator Application Monitoring 757
Status After Failure 757
Rejoining theCluster 757
Data Path Connection State Replication 758
How theCluster Manages Connections 759
Connection Roles 759
New Connection Ownership 760
Sample Data Flow forTCP 760
Sample Data Flow forICMP andUDP 761
History forClustering 762
Interfaces andDevice Settings 767 PART IX
Interface Overview 769 CHAPTER 30
Management Interface 769
Management Interface 769
Diagnostic Interface 770
Interface Mode andTypes 770
Security Zones andInterface Groups 772
Auto-MDI/MDIX Feature 773
Default Settings forInterfaces 774
Create Security Zone andInterface Group Objects 774
Enable thePhysical Interface andConfigure Ethernet Settings 775
Configure EtherChannel Interfaces 777
About EtherChannels 778
About EtherChannels 778
Guidelines forEtherChannels 781
Configure anEtherChannel 782
Sync Interface Changes with theManagement Center 786
Manage theNetwork Module fortheSecure Firewall 3100 789
Configure Breakout Ports 790
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxviiiContents

Add aNetwork Module 793
HotSwap theNetwork Module 795
Replace theNetwork Module with aDifferent Type 797
Remove theNetwork Module 800
MergetheManagement andDiagnostic Interfaces 803
Unmer getheManagement Interface 809
History forInterfaces 810
Regular Firewall Interfaces 813 CHAPTER 31
Requirements andPrerequisites forRegular Firewall Interfaces 813
Configure Firepower 1010 Switch Ports 813
About Firepower 1010 Switch Ports 814
Understanding Firepower 1010 Ports andInterfaces 814
Auto-MDI/MDIX Feature 814
Guidelines andLimitations forFirepower 1010 Switch Ports 815
Configure Switch Ports andPower Over Ethernet 816
Enable orDisable Switch Port Mode 816
Configure aVLAN Interface 817
Configure Switch Ports asAccess Ports 819
Configure Switch Ports asTrunk Ports 821
Configure Power Over Ethernet 823
Configure Loopback Interfaces 824
About Loopback Interfaces 824
Guidelines andLimitations forLoopback Interfaces 825
Configure aLoopback Interface 825
Rate-Limit TraffictotheLoopback Interface 826
Configure VLAN Subinterfaces and802.1Q Trunking 830
Guidelines andLimitations forVLAN Subinterfaces 830
Maximum Number ofVLAN Subinterfaces byDevice Model 830
Add aSubinterface 831
Configure VXLAN Interfaces 833
About VXLAN Interfaces 833
Encapsulation 833
VXLAN Tunnel Endpoint 833
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxixContents

VTEP Source Interface 834
VNI Interfaces 834
VXLAN Packet Processing 835
Peer VTEPs 835
VXLAN UseCases 836
Requirements andPrerequisites forVXLAN Interfaces 840
Guidelines forVXLAN Interfaces 840
Configure VXLAN orGeneve Interfaces 841
Configure VXLAN Interfaces 841
Configure Geneve Interfaces 844
Allow Gateway Load Balancer Health Checks 845
Configure Routed andTransparent Mode Interfaces 846
About Routed andTransparent Mode Interfaces 846
Dual IPStack (IPv4 andIPv6) 847
31-Bit Subnet Mask 847
Guidelines andLimitations forRouted andTransparent Mode Interfaces 847
Configure Routed Mode Interfaces 849
Configure Bridge Group Interfaces 854
Configure General Bridge Group Member Interface Parameters 854
Configure theBridge Virtual Interface (BVI) 856
Configure IPv6 Addressing 857
About IPv6 857
Configure theIPv6 Prefix Delegation Client 858
Configure aGlobal IPv6 Address 861
Configure IPv6 Neighbor Discovery 866
Configure Advanced Interface Settings 868
About Advanced Interface Configuration 868
About MAC Addresses 868
About theMTU 870
About theTCP MSS 871
ARP Inspection forBridge Group Traffic 872
MAC Address Table 872
Default Settings 873
Guidelines forARP Inspection andtheMAC Address Table 873
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxContents

Configure theMTU 873
Configure theMAC Address 874
Add aStatic ARP Entry 875
Add aStatic MAC Address andDisable MAC Learning foraBridge Group 876
SetSecurity Configuration Parameters 876
History forRegular Firewall Interfaces forSecure Firewall Threat Defense 878
Inline Sets andPassiveInterfaces 885 CHAPTER 32
About IPSInterfaces 885
IPSInterface Types 885
About Hardware Bypass forInline Sets 886
Hardware Bypass Triggers 886
Hardware Bypass Switchover 887
Snort FailOpen vs.Hardware Bypass 887
Hardware Bypass Status 887
Requirements andPrerequisites forInline Sets 887
Guidelines forInline Sets andPassive Interfaces 889
Configure aPassive Interface 890
Configure anInline Set 892
DHCP andDDNS 895 CHAPTER 33
About DHCP andDDNS Services 895
About theDHCPv4 Server 895
DHCP Options 895
About theDHCPv6 Stateless Server 896
About theDHCP Relay Agent 896
Requirements andPrerequisites forDHCP andDDNS 897
Guidelines forDHCP andDDNS Services 897
Configure theDHCPv4 Server 898
Configure theDHCPv6 Stateless Server 900
Create theDHCP IPv6 Pool 900
Enable theDHCPv6 Stateless Server 903
Configure theDHCP Relay Agent 904
Configure Dynamic DNS 905
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxiContents

History forDHCP andDDNS 911
SNMP fortheFirepower1000/2100 913 CHAPTER 34
About SNMP fortheFirepower 1000/2100 913
Enabling SNMP andConfiguring SNMP Properties forFirepower 1000/2100 913
Creating anSNMP TrapforFirepower 1000/2100 914
Creating anSNMP User forFirepower 1000/2100 916
Quality ofService 917 CHAPTER 35
Introduction toQoS 917
About QoS Policies 917
Requirements andPrerequisites forQoS 918
Rate Limiting with QoS Policies 918
Creating aQoS Policy 919
Setting TargetDevices foraQoS Policy 920
Configuring QoS Rules 920
QoS Rule Components 921
QoS Rule Conditions 922
Interface Rule Conditions 922
Network Rule Conditions 923
User Rule Conditions 923
Application Rule Conditions 923
Port Rule Conditions 924
URL Rule Conditions 926
Custom SGT Rule Conditions 926
ISESGT vsCustom SGT Rule Conditions 926
Autotransition from Custom SGTstoISESGTs927
Platf orm Settings 929 CHAPTER 36
Introduction toPlatform Settings 930
Requirements andPrerequisites forPlatform Settings Policies 930
Manage Platform Settings Policies 930
ARP Inspection 931
Banner 932
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxiiContents

DNS 933
External Authentication 936
Fragment Settings 941
HTTP Access 942
ICMP Access 943
NetFlow 944
Add Collector inNetFlow 945
Add TrafficClass toNetFlow 945
SSH Access 946
SMTP Server 948
SNMP 948
About SNMP 950
SNMP Terminology 950
MIBs andTraps 951
Supported Tables andObjects inMIBs 951
Add SNMPv3 Users 955
Add SNMP Hosts 958
Configure SNMP Traps 959
Configure SSL Settings 961
About SSL Settings 962
Syslog 965
About Syslog 965
Severity Levels 966
Syslog Message Filtering 967
Syslog Message Classes 967
Guidelines forLogging 970
Configure Syslog Logging forThreat Defense Devices 971
Threat Defense Platform Settings That Apply toSecurity Event Syslog Messages 972
Enable Logging andConfigure Basic Settings 973
Enable Logging Destinations 974
Send Syslog Messages toanE-mail Address 975
Create aCustom Event List 976
Limit theRate ofSyslog Message Generation 977
Configure Syslog Settings 978
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxiiiContents

Configure aSyslog Server 979
Timeouts 981
TimeSynchronization 983
TimeZone 984
UCAPL/CC Compliance 985
Performance Profile 986
Netw orkAddr essTranslation 989 CHAPTER 37
Why UseNAT? 989
NATBasics 990
NATTerminology 990
NATTypes 990
NATinRouted andTransparent Mode 991
NATinRouted Mode 991
NATinTransparent Mode orWithin aBridge Group 992
Auto NATandManual NAT 993
Auto NAT 993
Manual NAT 993
Comparing Auto NATandManual NAT 994
NATRule Order 994
NATInterfaces 996
NATExemption 997
Configuring Routing forNAT 997
Addresses ontheSame Network astheMapped Interface 997
Addresses onaUnique Network 998
TheSame Address astheReal Address (Identity NAT) 998
Requirements andPrerequisites forNATPolicies 998
Guidelines forNAT 999
Firewall Mode Guidelines forNAT 999
IPv6 NATGuidelines 999
IPv6 NATBest Practices 1000
NATSupport forInspected Protocols 1000
FQDN Destination Guidelines 1002
Additional Guidelines forNAT 1003
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxivContents

Manage NATPolicies 1005
Creating NATPolicies 1005
Configuring NATPolicy Targets 1006
Configure NATforThreat Defense 1007
Customizing NATRules forMultiple Devices 1008
Searching andFiltering theNATRule Table 1010
Enabling, Disabling, orDeleting Multiple Rules 1011
Dynamic NAT 1012
About Dynamic NAT 1012
Dynamic NATDisadvantages andAdvantages 1013
Configure Dynamic Auto NAT 1014
Configure Dynamic Manual NAT 1015
Dynamic PAT 1017
About Dynamic PAT 1017
Dynamic PATDisadvantages andAdvantages 1018
PATPool Object Guidelines 1018
Configure Dynamic Auto PAT 1019
Configure Dynamic Manual PAT 1022
Configure PATwith Port Block Allocation 1025
Static NAT 1027
About Static NAT 1027
Configure Static Auto NAT 1031
Configure Static Manual NAT 1032
Identity NAT 1035
Configure Identity Auto NAT 1036
Configure Identity Manual NAT 1037
NATRule Properties forThreat Defense 1040
Interface Objects NATProperties 1040
Translation Properties forAuto NAT 1041
Translation Properties forManual NAT 1042
PATPool NATProperties 1043
Advanced NATProperties 1044
Translating IPv6 Networks 1045
NAT64/46: Translating IPv6 Addresses toIPv4 1046
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxvContents

NAT64/46 Example: Inside IPv6 Network with Outside IPv4 Internet 1046
NAT64/46 Example: Inside IPv6 Network with Outside IPv4 Internet andDNS Translation 1048
NAT66: Translating IPv6 Addresses toDifferent IPv6 Addresses 1052
NAT66Example, Static Translation between Networks 1052
NAT66Example, Simple IPv6 Interface PAT 1055
Monitoring NAT 1058
Examples forNAT 1059
Providing Access toanInside WebServer (Static Auto NAT) 1059
Dynamic Auto NATforInside Hosts andStatic NATforanOutside WebServer 1062
Inside Load Balancer with Multiple Mapped Addresses (Static Auto NAT,One-to-Many) 1066
Single Address forFTP,HTTP ,andSMTP (Static Auto NAT-with-Port-T ranslation) 1069
Different Translation Depending ontheDestination (Dynamic Manual PAT) 1074
Different Translation Depending ontheDestination Address andPort (Dynamic Manual PAT) 1079
NATandSite-to-Site VPN 1084
Rewriting DNS Queries andResponses Using NAT 1088
DNS64 Reply Modification 1089
DNS Reply Modification, DNS Server onOutside 1096
DNS Reply Modification, DNS Server onHost Network 1099
Alarms fortheCisco ISA 3000 1103 CHAPTER 38
About Alarms 1103
Alarm Input Interfaces 1104
Alarm Output Interface 1104
Syslog Alarms 1105
SNMP Alarms 1105
Defaults forAlarms 1105
Requirements andPrerequisites forAlarms 1106
Configure theAlarms fortheISA3000 1106
Configure Alarm Input Contacts 1106
Configure Power Supply Alarms 1109
Configure Temperature Alarms 1111
Monitoring Alarms 1114
Monitoring Alarm Status 1114
Monitoring Syslog Messages forAlarms 1114
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxviContents

Turning OfftheExternal Alarm 1115
Routing 1117 PART X
Static andDefault Routes 1119 CHAPTER 39
About Static andDefault Routes 1119
Default Route 1119
Static Routes 1120
Route tonull0 Interface toDrop Unwanted Traffic 1120
Route Priorities 1120
Transparent Firewall Mode andBridge Group Routes 1120
Static Route Tracking 1121
Requirements andPrerequisites forStatic Routes 1121
Guidelines forStatic andDefault Routes 1122
Add aStatic Route 1122
Reference forRouting 1124
Path Determination 1124
Supported Route Types 1124
Static Versus Dynamic 1124
Single-Path Versus Multipath 1125
FlatVersus Hierarchical 1125
Link-State Versus Distance Vector 1125
Supported Internet Protocols forRouting 1125
Routing Table 1126
How theRouting Table IsPopulated 1126
How Forwarding Decisions AreMade 1128
Dynamic Routing andHigh Availability 1129
Dynamic Routing inClustering 1129
Dynamic Routing inIndividual Interface Mode 1130
Routing Table forManagement Traffic 1131
Equal-Cost Multi-Path (ECMP) Routing 1131
About Route Maps 1132
Permit andDeny Clauses 1132
Match andSetClause Values 1132
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxviiContents

Virtual Routers 1135 CHAPTER 40
About Virtual Routers andVirtual Routing andForwarding (VRF) 1135
About Virtual Routers andDynamic VTI 1136
How toConfigure aVirtual Router with Dynamic VTI 1136
Applications ofVirtual Routers 1136
Global andUser-Defined Virtual Routers 1137
Configuring Policies tobeVirtual-Router-A ware 1138
Interconnecting Virtual Routers 1139
Overlapping IPAddresses 1140
Configuring SNMP onUser-Defined Virtual Routers 1141
Maximum Number ofVirtual Routers ByDevice Model 1142
Requirements andPrerequisites forVirtual Routers 1143
Guidelines andLimitations forVirtual Routers 1143
Modifications totheManagement Center WebInterface -Routing Page 1145
Manage Virtual Routers 1146
Create aVirtual Router 1146
Configure aVirtual Router 1146
Modify aVirtual Router 1148
Remove Virtual Routers 1149
Monitoring Virtual Routers 1149
Configuration Examples forVirtual Routers 1150
How toRoute toaDistant Server through Virtual Routers 1150
How toProvide Internet Access with Overlapping Address Spaces 1154
How toAllow RAVPN Access toInternal Networks inVirtual Routing 1161
How toSecure Trafficfrom Networks inMultiple Virtual Routers over aSite-to-Site VPN 1164
How toSecure Trafficfrom Networks with Multiple Virtual Routers over aSite-to-Site VPN with
Dynamic VTI 1167
How toRoute Trafficbetween TwoOverlapping Network Host inVirtual Routing 1169
How toManage Overlapping Segments inRouted Firewall Mode with BVI Interfaces 1172
How toConfigure User Authentication with Overlapping Networks 1176
How toInterconnect Virtual Routers using BGP 1182
ECMP 1189 CHAPTER 41
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxviiiContents

About ECMP 1189
Guidelines andLimitations forECMP 1189
Manage ECMP Page 1191
Create anECMP Zone 1191
Configure anEqual Cost Static Route 1192
Modify anECMP Zone 1193
Remove anECMP Zone 1194
Configuration Example forECMP 1194
Bidir ectional Forwarding Detection Routing 1197 CHAPTER 42
About BFD Routing 1197
Guidelines forBFD Routing 1197
Configure BFD 1198
Configure BFD Policies 1199
Configure Single-Hop BFD Policies 1199
Configure Multi-Hop BFD Policies 1200
History forBFD Routing 1201
OSPF 1203 CHAPTER 43
OSPF 1203
About OSPF 1203
OSPF Support forFast Hello Packets 1205
Prerequisites forOSPF Support forFast Hello Packets 1205
OSPF Hello Interval andDead Interval 1205
OSPF Fast Hello Packets 1205
Benefits ofOSPF Fast Hello Packets 1205
Implementation Differences Between OSPFv2 andOSPFv3 1206
Requirements andPrerequisites forOSPF 1206
Guidelines forOSPF 1206
Configure OSPFv2 1209
Configure OSPF Areas, Ranges, andVirtual Links 1209
Configure OSPF Redistribution 1212
Configure OSPF Inter-Area Filtering 1213
Configure OSPF Filter Rules 1214
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xxxixContents

Configure OSPF Summary Addresses 1215
Configure OSPF Interfaces andNeighbors 1216
Configure OSPF Advanced Properties 1218
Configure OSPFv3 1221
Configure OSPFv3 Areas, Route Summaries, andVirtual Links 1221
Configure OSPFv3 Redistribution 1223
Configure OSPFv3 Summary Prefixes 1224
Configure OSPFv3 Interfaces, Authentication, andNeighbors 1225
Configure OSPFv3 Advanced Properties 1227
History forOSPF 1230
EIGRP 1231 CHAPTER 44
About EIGRP Routing 1231
Requirements andPrerequisites forEIGRP 1232
Guidelines andLimitations ofEIGRP Routing 1232
Configure EIGRP 1234
Configure EIGRP Settings 1234
Configure EIGRP Neighbors Settings 1235
Configure EIGRP Filter Rules Settings 1235
Configure EIGRP Redistribution Settings 1236
Configure EIGRP Summary Address Settings 1237
Configure EIGRP Interfaces Settings 1237
Configure EIGRP Advanced Settings 1238
BGP 1241 CHAPTER 45
About BGP 1241
Routing Table Changes 1241
When toUseBGP 1242
BGP Path Selection 1243
BGP Multipath 1243
Requirements andPrerequisites forBGP 1244
Guidelines forBGP 1244
Configure BGP 1245
Configure BGP Basic Settings 1245
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlContents

Configure BGP General Settings 1248
Configure BGP Neighbor Settings 1249
Configure BGP Aggregate Address Settings 1253
Configure BGPv4 Filtering Settings 1253
Configure BGP Network Settings 1254
Configure BGP Redistribution Settings 1255
Configure BGP Route Injection Settings 1256
Configure BGP Route Import/Export Settings 1256
RIP 1259 CHAPTER 46
About RIP 1259
Routing Update Process 1259
RIPRouting Metric 1260
RIPStability Features 1260
RIPTimers 1260
Requirements andPrerequisites forRIP 1261
Guidelines forRIP 1261
Configure RIP 1262
Multicast 1265 CHAPTER 47
About Multicast Routing 1265
IGMP Protocol 1265
Stub Multicast Routing 1266
PIM Multicast Routing 1266
PIM Source Specific Multicast Support 1267
Multicast Bidirectional PIM 1267
PIM Bootstrap Router (BSR) 1268
PIM Bootstrap Router (BSR) Terminology 1268
Multicast Group Concept 1269
Multicast Addresses 1269
Clustering 1269
Requirements andPrerequisites forMulticast Routing 1269
Guidelines forMulticast Routing 1269
Configure IGMP Features 1270
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xliContents

Enable Multicast Routing 1271
Configure IGMP Protocol 1271
Configure IGMP Access Groups 1273
Configure IGMP Static Groups 1273
Configure IGMP Join Groups 1274
Configure PIM Features 1275
Configure PIM Protocol 1275
Configure PIM Neighbor Filters 1276
Configure PIM Bidirectional Neighbor Filters 1277
Configure PIM Rendezvous Points 1278
Configure PIM Route Trees 1278
Configure PIM Request Filters 1279
Configure theSecure Firewall Threat Defense Device asaCandidate Bootstrap Router 1280
Configure Multicast Routes 1281
Configure Multicast Boundary Filters 1281
Policy Based Routing 1283 CHAPTER 48
About Policy Based Routing 1283
Guidelines andLimitations forPolicy Based Routing 1285
Path Monitoring 1286
Configure Path Monitoring Settings 1288
Configure Policy-Based Routing Policy 1289
Add Path Monitoring Dashboard 1292
Configuration Example forPolicy Based Routing 1292
Configuration Example forPBR with Path Monitoring 1297
Objects andCertif icates 1301 PART XI
Object Management 1303 CHAPTER 49
Introduction toObjects 1304
TheObject Manager 1306
Importing Objects 1306
Editing Objects 1309
Viewing Objects andTheir Usage 1309
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xliiContents

Filtering Objects orObject Groups 1310
Object Groups 1311
Grouping Reusable Objects 1311
Object Overrides 1312
Managing Object Overrides 1313
Allowing Object Overrides 1314
Adding Object Overrides 1314
Editing Object Overrides 1314
AAA Server 1315
Add aRADIUS Server Group 1315
RADIUS Server Group Options 1316
RADIUS Server Options 1317
Add aSingle Sign-on Server 1318
Access List 1320
Configure Extended ACL Objects 1320
Configure Standard ACL Objects 1323
Address Pools 1324
Application Filters 1324
ASPath 1325
BFD Template 1325
Cipher Suite List 1326
Creating Cipher Suite Lists 1327
Community List 1327
Extended Community 1328
DHCP IPv6 Pool 1330
Distinguished Name 1330
Creating Distinguished Name Objects 1332
DNS Server Group 1333
Creating DNS Server Group Objects 1333
External Attributes 1333
Dynamic Objects 1333
Create Dynamic Objects with Cloud-delivered Firewall Management Center 1334
Create Dynamic Objects with Cloud-delivered Firewall Management Center andOn-Premises
Cisco Secure Dynamic Attributes Connector 1336
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xliiiContents

WorkWithDynamic Objects 1337
Dynamic Object Mappings 1337
About API-Created Dynamic Objects 1338
Security Group Tag 1339
Creating Security Group TagObjects 1339
FileList 1339
Source Files forFileLists 1340
Adding Individual SHA-256 Values toFileLists 1341
Uploading Individual Files toFileLists 1341
Uploading Source Files toFileLists 1342
Editing SHA-256 Values inFileLists 1343
Downloading Source Files from FileLists 1343
FlexConfig 1344
Geolocation 1345
Creating Geolocation Objects 1345
Interface 1345
Key Chain 1346
Creating Key Chain Objects 1346
Network 1348
Network Wildcard Mask 1349
Creating Network Objects 1350
Importing Network Objects 1351
Editing andDeleting Network Objects andGroups 1351
PKI 1351
Internal Certificate Authority Objects 1352
CACertificate andPrivate Key Import 1353
Importing aCACertificate andPrivate Key 1353
Generating aNew CACertificate andPrivate Key 1354
New Signed Certificates 1354
Creating anUnsigned CACertificate andCSR 1354
Uploading aSigned Certificate Issued inResponse toaCSR 1355
CACertificate andPrivate Key Downloads 1355
Downloading aCACertificate andPrivate Key 1355
Trusted Certificate Authority Objects 1356
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlivContents

Trusted CAObject 1356
Adding aTrusted CAObject 1357
Certificate Revocation Lists inTrusted CAObjects 1357
Adding aCertificate Revocation ListtoaTrusted CAObject 1357
External Certificate Objects 1358
Adding External Certificate Objects 1358
Internal Certificate Objects 1359
Adding Internal Certificate Objects 1359
Certificate Enrollment Objects 1360
Adding Certificate Enrollment Objects 1361
Add Certificate Enrollment 1363
Certificate Enrollment Object EST Options 1363
Certificate Enrollment Object SCEP Options 1364
Certificate Enrollment Object Certificate Parameters 1365
Certificate Enrollment Object Key Options 1366
Certificate Enrollment Object Revocation Options 1367
Policy List 1368
Port 1369
Creating Port Objects 1370
Importing Port Objects 1371
Prefix List 1371
Configure IPv6 Prefix List 1371
Configure IPv4 Prefix List 1372
Route Map 1372
Security Intelligence 1376
How toModify Security Intelligence Objects 1377
Global andDomain Security Intelligence Lists 1378
Security Intelligence Lists andMultitenancy 1378
Delete Entries from Global Security Intelligence Lists 1379
ListandFeed Updates forSecurity Intelligence 1380
Changing theUpdate Frequency forSecurity Intelligence Feeds 1380
Custom Security Intelligence Lists andFeeds 1380
Custom Lists andFeeds: Requirements 1380
URL Lists andFeeds: URL Syntax andMatching Criteria 1381
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlvContents

Custom Security Intelligence Feeds 1382
Custom Security Intelligence Lists 1384
Sinkhole 1386
Creating Sinkhole Objects 1386
SLA Monitor 1386
TimeRange 1388
Creating TimeRange Objects 1388
TimeZone 1389
Tunnel Zone 1390
URL 1390
Creating URL Objects 1391
Variable Set 1391
Variable Sets inIntrusion Policies 1393
Variables 1393
Predefined Default Variables 1394
Network Variables 1396
Port Variables 1397
Advanced Variables 1398
Variable Reset 1398
Adding Variables toSets 1399
Nesting Variables 1401
Managing Variable Sets 1402
Creating Variable Sets 1403
Managing Variables 1403
Adding Variables 1404
Editing Variables 1405
VLAN Tag 1406
Creating VLAN TagObjects 1406
VPN 1407
Certificate Map Objects 1407
Secure Client Custom Attributes Objects 1408
Add Secure Client Custom Attributes Objects 1409
Add Custom Attributes toaGroup Policy 1410
Threat Defense Group Policy Objects 1410
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlviContents

Configure Group Policy Objects 1411
Group Policy General Options 1412
Group Policy Secure Client Options 1414
Group Policy Advanced Options 1417
Threat Defense IPsec Proposals 1418
Configure IKEv1 IPsec Proposal Objects 1418
Configure IKEv2 IPsec Proposal Objects 1419
Threat Defense IKE Policies 1420
Configure IKEv1 Policy Objects 1420
Configure IKEv2 Policy Objects 1421
Secure Client Customization 1423
FileObjects 1423
Certif icates 1427 CHAPTER 50
Requirements andPrerequisites forCertificates 1427
Secure Firewall Threat Defense VPN Certificate Guidelines andLimitations 1427
Managing Threat Defense Certificates 1428
Automatically Update CABundles 1429
Installing aCertificate Using Self-Signed Enrollment 1431
Installing aCertificate using EST Enrollment 1432
Installing aCertificate Using SCEP Enrollment 1433
Installing aCertificate Using Manual Enrollment 1433
Installing aCertificate Using aPKCS12 File 1434
Troubleshooting Threat Defense Certificates 1435
History forCertificates 1436
VPN 1437 PART XII
VPN Overview 1439 CHAPTER 51
VPN Types 1439
VPN Basics 1440
Internet Key Exchange (IKE) 1440
IPsec 1441
VPN Packet Flow 1442
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlviiContents

IPsec Flow Offload 1442
VPN Licensing 1443
How Secure Should aVPN Connection Be? 1443
Complying with Security Certification Requirements 1444
Deciding Which Encryption Algorithm toUse 1444
Deciding Which Hash Algorithms toUse 1445
Deciding Which Diffie-Hellman Modulus Group toUse 1445
Deciding Which Authentication Method toUse 1446
Pre-shared Keys 1446
PKIInfrastructure andDigital Certificates 1446
Removed orDeprecated Hash Algorithms, Encryption Algorithms, andDiffie-Hellman Modulus
Groups 1448
VPN Topology Options 1448
Point-to-Point VPN Topology 1449
Hub andSpoke VPN Topology 1449
FullMesh VPN Topology 1450
Implicit Topologies 1451
Site-to-Site VPNs 1453 CHAPTER 52
About Site-to-Site VPN 1453
Secure Firewall Threat Defense Site-to-site VPN Guidelines andLimitations 1455
Types ofSite-to-Site VPN Topologies 1455
Requirements andPrerequisites forSite-to-Site VPN 1456
Manage SitetoSiteVPNs 1457
Configure aPolicy-based Site-to-Site VPN 1458
Threat Defense VPN Endpoint Options 1459
Threat Defense VPN IKE Options 1462
Threat Defense VPN IPsec Options 1465
Threat Defense Advanced Site-to-site VPN Deployment Options 1467
Threat Defense VPN Advanced IKE Options 1467
Threat Defense VPN Advanced IPsec Options 1468
Threat Defense Advanced Site-to-site VPN Tunnel Options 1468
About Virtual Tunnel Interfaces 1469
Static VTI 1470
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlviiiContents

Dynamic VTI 1471
Guidelines andLimitations forVirtual Tunnel Interfaces 1473
Add aVTI Interface 1477
Create aRoute-based Site-to-Site VPN 1478
Configure Endpoints foraPoint toPoint Topology 1479
Advanced Configurations foraPoint toPoint Topology inaRoute-based VPN 1481
Configure Endpoints foraHub andSpoke Topology 1482
Advanced Configurations forHub andSpokes inaRoute-based VPN 1484
Configure Multiple Hubs inaRoute-based VPN 1485
Configure Routing forMultiple Hubs inaRoute-based VPN 1487
Verify theMultiple Hubs Configuration inaRoute-based VPN 1489
Route TrafficThrough aBackup VTI Tunnel 1489
Configure Dynamic VTI foraRoute-based Site-to-Site VPN 1490
How toConfigure aVirtual Router with Dynamic VTI 1491
Configure Routing andACPolicies forVTI 1491
Deploy aSASE Tunnel onUmbrella 1494
Guidelines andLimitations forConfiguring SASE Tunnels onUmbrella 1495
How toDeploy aSASE Tunnel onUmbrella 1496
Prerequisites forConfiguring Umbrella SASE Tunnels 1496
Map Management Center Umbrella Parameters andCisco Umbrella APIKeys 1497
Configure aSASE Tunnel forUmbrella 1498
ViewSASE Tunnel Status 1500
Monitoring theSite-to-Site VPNs 1501
History forSite-to-Site VPN 1507
Remote Access VPN 1509 CHAPTER 53
Remote Access VPN Overview 1509
Remote Access VPN Features 1510
Secure Client Components 1512
Remote Access VPN Authentication 1512
Understanding Policy Enforcement ofPermissions andAttributes 1514
Understanding AAA Server Connectivity 1514
License Requirements forRemote Access VPN 1515
Requirements andPrerequisites forRemote Access VPN 1515
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
xlixContents

Remote Access VPN Guidelines andLimitations 1516
Configuring aNew Remote Access VPN Connection 1519
Prerequisites forConfiguring Remote Access VPN 1519
Create aNew Remote Access VPN Policy 1520
Update theAccess Control Policy ontheSecure Firewall Threat Defense Device 1522
(Optional) Configure NATExemption 1523
Configure DNS 1524
Add Secure Client Profile XML File 1524
(Optional) Configure Split Tunneling 1525
(Optional) Configure Dynamic Split Tunneling 1526
Verify Dynamic Split Tunneling Configuration 1527
Verify theConfiguration 1527
Create aCopy ofanExisting Remote Access VPN Policy 1527
SetTargetDevices foraRemote Access VPN Policy 1528
Associate Local Realm with Remote Access VPN Policy 1528
Additional Remote Access VPN Configurations 1529
Configure Connection Profile Settings 1529
Configure IPAddresses forVPN Clients 1530
Configure AAA Settings forRemote Access VPN 1531
Create orUpdate Aliases foraConnection Profile 1546
Configure Access Interfaces forRemote Access VPN 1547
Configure Advanced Options forRemote Access VPN 1549
Cisco Secure Client Image 1549
Remote Access VPN Address Assignment Policy 1551
Configure Certificate toConnection Profile Mapping 1552
Configure Group Policies 1552
Configuring LDAP Attribute Mapping 1553
Configuring VPN Load Balancing 1555
Configure IPsec Settings 1558
Customize Cisco Secure Client 1563
Configure Secure Client Management VPN Tunnel 1573
Requirements andPrerequisites forSecure Client Management VPN Tunnel 1573
Limitations ofSecure Client Management VPN Tunnel 1574
Configuring Secure Client Management VPN Tunnel onThreat Defense 1574
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lContents

Multiple Certificate Authentication 1576
Guidelines andLimitations ofMultiple Certificate Authentication 1576
Configuring Multiple Certificate Authentication 1577
Customizing Remote Access VPN AAA Settings 1578
Authenticate VPN Users viaClient Certificates 1578
Configure VPN User Authentication viaClient Certificate andAAA Server 1579
Manage Password Changes over VPN Sessions 1581
Send Accounting Records totheRADIUS Server 1582
Delegating Group Policy Selection toAuthorization Server 1582
Override theSelection ofGroup Policy orOther Attributes bytheAuthorization Server 1583
Deny VPN Access toaUser Group 1584
Restrict Connection Profile Selection foraUser Group 1585
Update theSecure Client Profile forRemote Access VPN Clients 1586
RADIUS Dynamic Authorization 1586
Configuring RADIUS Dynamic Authorization 1587
Two-Factor Authentication 1588
Configuring RSA Two-Factor Authentication 1588
Configuring Duo Two-Factor Authentication 1589
Secondary Authentication 1591
Configure Remote Access VPN Secondary Authentication 1591
Single Sign-On Authentication with SAML 2.0 1593
Guidelines andLimitations forSAML 2.0 1594
Configuring aSAML Single Sign-On Authentication 1595
Configuring SAML Authorization 1596
Advanced Secure Client Configurations 1597
Configure Secure Client Modules onaThreat Defense 1597
Types ofSecure Client Modules 1598
Prerequisites forConfiguring Secure Client Modules 1599
Guidelines forConfiguring Secure Client Modules 1600
Install Secure Client Modules using aThreat Defense 1601
Configure aRemote Access VPN Group Policy with Secure Client Modules 1601
Verify Secure Client Modules Configuration 1602
Configure Application-Based (Per App VPN) Remote Access VPN onMobile Devices 1603
Prerequisites andLicensing forConfiguring PerApp VPN Tunnels 1603
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
liContents

Determine theApplication IDsforMobile Applications 1603
Configure Application-Based VPN Tunnels 1604
Verify PerApp Configuration 1606
Remote Access VPN Examples 1606
How toLimit Secure Client Bandwidth PerUser 1606
How toUseVPN Identity forUser-Id Based Access Control Rules 1607
Configure Threat Defense Multiple Certificate Authentication 1607
Dynamic Access Policies 1613 CHAPTER 54
About Secure Firewall Threat Defense Dynamic Access Policy 1613
Hierarchy ofPolicy Enforcement ofPermissions andAttributes inThreat Defense 1613
Licensing forDynamic Access Policies 1615
Prerequisites forDynamic Access Policy 1615
Guidelines andLimitations forDynamic Access Policies 1616
Configure aDynamic Access Policy (DAP) 1616
Create aDynamic Access Policy 1616
Create aDynamic Access Policy Record 1616
Configure AAA Criteria Settings forDAP 1617
Configure Endpoint Attribute Selection Criteria inDAP 1618
Add anAnti-Malware Endpoint Attribute toaDAP 1619
Add aDevice Endpoint Attribute toaDAP 1619
Add Secure Client Endpoint Attributes toaDAP 1620
Add NAC Endpoint Attributes toaDAP 1620
Add anApplication Attribute toaDAP 1620
Add aPersonal Firewall Endpoint Attribute toaDAP 1621
Add anOperating System Endpoint Attribute toaDAP 1621
Add aProcess Endpoint Attribute toaDAP 1621
Add aRegistry Endpoint Attribute toaDAP 1622
Add aFileEndpoint Attribute toaDAP 1622
Add Certificate Authentication Attributes toaDAP 1622
Configure Advanced Settings forDAP 1623
Associate Dynamic Access Policy with Remote Access VPN 1623
History forDynamic Access Policy 1624
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
liiContents

VPN Monitoring andTroubleshooting inCDO 1625 CHAPTER 55
Monitor Remote Access VPN Sessions 1625
SD-W ANSummary Dashboard 1625
Prerequisites forUsing SD-W ANSummary Dashboard 1626
Monitor WANDevices andInterfaces Using theSD-W ANSummary Dashboard 1627
Monitor Application Performance Metrics ofWANInterfaces Using theSD-W ANSummary
Dashboard 1628
System Messages 1629
Debug Commands 1629
debug aaa 1630
debug crypto 1631
debug crypto ca 1632
debug crypto ikev1 1633
debug crypto ikev2 1633
debug crypto ipsec 1634
debug ldap 1634
debug ssl 1634
debug webvpn 1635
Access Contr ol 1639 PART XIII
Access Contr olOverview 1641 CHAPTER 56
Introduction toAccess Control 1641
Introduction toRules 1642
Filtering Rules byDevice 1642
Rule andOther Policy Warnings 1643
Access Control Policy Default Action 1644
Deep Inspection Using FileandIntrusion Policies 1646
Access Control TrafficHandling with Intrusion andFilePolicies 1647
FileandIntrusion Inspection Order 1648
Access Control Policy Inheritance 1649
Best Practices forApplication Control 1650
Recommendations forApplication Control 1650
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
liiiContents

Best Practices forConfiguring Application Control 1652
Application Characteristics 1653
Application-Specific Notes andLimitations 1654
Best Practices forAccess Control Rules 1655
General Best Practices forAccess Control 1655
Best Practices forOrdering Rules 1656
Rule Preemption 1657
Rule Actions andRule Order 1658
Application Rule Order 1659
URL Rule Order 1659
Best Practices forSimplifying andFocusing Rules 1659
Maximum Number ofAccess Control Rules andIntrusion Policies 1660
Access Contr olPolicies 1661 CHAPTER 57
Access Control Policy Components 1661
System-Created Access Control Policies 1662
Requirements andPrerequisites forAccess Control Policies 1662
Managing Access Control Policies 1663
Creating aBasic Access Control Policy 1664
Editing anAccess Control Policy 1665
Locking anAccess Control Policy 1666
Managing Access Control Policy Inheritance 1668
Choosing aBase Access Control Policy 1668
Inheriting Access Control Policy Settings from theBase Policy 1669
Locking Settings inDescendant Access Control Policies 1669
Requiring anAccess Control Policy inaDomain 1670
Setting TargetDevices foranAccess Control Policy 1670
Logging Settings forAccess Control Policies 1671
Access Control Policy Advanced Settings 1672
Associating Other Policies with Access Control 1676
Viewing Rule HitCounts 1677
Analyzing Rule Conflicts andWarnings 1679
Searching forRules 1680
History forAccess Control Policies 1682
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
livContents

Access Contr olRules 1685 CHAPTER 58
Introduction toAccess Control Rules 1685
Access Control Rule Management 1687
Access Control Rule Components 1688
Access Control Rule Order 1689
Access Control Rule Actions 1690
Access Control Rule Monitor Action 1690
Access Control Rule TrustAction 1690
Access Control Rule Blocking Actions 1691
Access Control Rule Interactive Blocking Actions 1691
Access Control Rule Allow Action 1692
Requirements andPrerequisites forAccess Control Rules 1693
Guidelines andLimitations forAccess Control Rules 1694
Managing Access Control Rules 1695
Adding anAccess Control Rule Category 1695
Create andEdit Access Control Rules 1695
Access Control Rule Conditions 1697
Enabling andDisabling Access Control Rules 1705
Copying Access Control Rules from One Access Control Policy toAnother 1706
Moving Access Control Rules toaPrefilter Policy 1706
Positioning anAccess Control Rule 1708
Adding Comments toanAccess Control Rule 1709
Examples forAccess Control Rules 1709
How toControl Access Using Security Zones 1710
How toControl Application Usage 1710
How toBlock Threats 1711
How toBlock QUIC Traffic 1714
Cisco Secur eDynamic Attrib utes Connector 1717 CHAPTER 59
About theCisco Secure Dynamic Attributes Connector 1717
How ItWorks 1718
About theDashboard 1719
Dashboard ofanUnconfigured System 1720
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lvContents

Dashboard ofaConfigured System 1721
Add, Edit, orDelete Connectors 1723
Add, Edit, orDelete Dynamic Attributes Filters 1724
Create aConnector 1725
Amazon WebServices Connector—About User Permissions andImported Data 1726
Create anAWSUser with Minimal Permissions fortheCisco Secure Dynamic Attributes
Connector 1726
Create anAWSConnector 1728
Azure Connector—About User Permissions andImported Data 1729
Create anAzure User with Minimal Permissions fortheCisco Secure Dynamic Attributes
Connector 1729
Create anAzure Connector 1731
Create anAzure Service TagsConnector 1732
Create aMulticloud Defense Connector 1733
Create aGitHub Connector 1735
Google Cloud Connector—About User Permissions andImported Data 1735
Create aGoogle Cloud User with Minimal Permissions fortheCisco Secure Dynamic Attributes
Connector 1736
Create aGoogle Cloud Connector 1737
Create anOffice365Connector 1738
Create aWebex Connector 1739
Create aZoom Connector 1740
Create anAdapter 1740
How toCreate anOn-Prem Firewall Management Center Adapter 1741
How toCreate aCloud-delivered Firewall Management Center Adapter 1741
Create Dynamic Attributes Filters 1742
Dynamic Attribute Filter Examples 1744
UseDynamic Objects inAccess Control Policies 1744
About Dynamic Objects inAccess Control Rules 1745
Create Access Control Rules Using Dynamic Attributes Filters 1745
Troubleshoot theDynamic Attributes Connector 1746
Troubleshoot Error Messages 1746
GetYourTenant ID 1747
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lviContents

URL Filtering 1749 CHAPTER 60
URL Filtering Overview 1749
About URL Filtering with Category andReputation 1749
URL Category andReputation Descriptions 1750
URL Filtering Data from theCisco Cloud 1751
Best Practices forURL Filtering 1751
Filtering HTTPS Traffic 1754
UseCategories inURL Filtering 1755
License Requirements forURL Filtering 1756
Requirements andPrerequisites forURL Filtering 1756
How toConfigure URL Filtering with Category andReputation 1757
Enable URL Filtering Using Category andReputation 1758
URL Filtering Options 1758
Configuring URL Conditions 1760
Rules with URL Conditions 1761
URL Rule Order 1762
DNS Filtering: Identify URL Reputation andCategory During DNS Lookup 1762
Enable DNS Filtering toIdentify URLs During Domain Lookup 1762
DNS Filtering Limitations 1763
DNS Filtering andEvents 1763
Manual URL Filtering 1763
Manual URL Filtering Options 1764
Supplement orSelectively Override Category andReputation-Based URL Filtering 1764
Configure HTTP Response Pages 1765
Limitations toHTTP Response Pages 1765
Requirements andPrerequisites forHTTP Response Pages 1766
Choosing HTTP Response Pages 1766
Configure Interactive Blocking with HTTP Response Pages 1767
Configuring Interactive Blocking 1767
Setting theUser Bypass Timeout foraBlocked Website 1768
Configure URL Filtering Health Monitors 1769
Dispute URL Category andReputation 1769
IftheURL Category SetChanges, TakeAction 1770
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lviiContents

URL Category andReputation Changes: EffectonEvents 1771
Troubleshoot URL Filtering 1771
Security Intelligence 1775 CHAPTER 61
About Security Intelligence 1775
Best Practices forSecurity Intelligence 1776
License Requirements forSecurity Intelligence 1776
Requirements andPrerequisites forSecurity Intelligence 1777
Security Intelligence Sources 1777
Configure Security Intelligence 1778
Security Intelligence Options 1780
Security Intelligence Categories 1781
Block ListIcons 1783
Configuration Example: Security Intelligence Blocking 1783
Security Intelligence Monitoring 1784
Override Security Intelligence Blocking 1784
Troubleshooting Security Intelligence 1785
Security Intelligence Categories AreMissing from theAvailable Options List 1785
DNS Policies 1787 CHAPTER 62
DNS Policy Overview 1787
Cisco Umbrella DNS Policies 1788
DNS Policy Components 1788
License Requirements forDNS Policies 1789
Requirements andPrerequisites forDNS Policies 1789
Managing DNS andUmbrella DNS Policies 1790
Creating Basic DNS Policies 1790
Editing DNS Policies 1791
DNS Rules 1792
Creating andEditing DNS Rules 1792
DNS Rule Management 1793
Enabling andDisabling DNS Rules 1793
DNS Rule Order Evaluation 1794
DNS Rule Actions 1794
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lviiiContents

DNS Rule Conditions 1795
Security Zone Rule Conditions 1795
Network Rule Conditions 1796
VLAN TagsRule Conditions 1796
DNS Rule Conditions 1797
How toCreate DNS Rules 1797
Controlling TrafficBased onDNS andSecurity Zone 1797
Controlling TrafficBased onDNS andNetwork 1798
Controlling TrafficBased onDNS andVLAN 1798
Controlling TrafficBased onDNS ListorFeed 1799
DNS Policy Deploy 1799
Cisco Umbrella DNS Policies 1800
How toRedirect DNS Requests toCisco Umbrella 1800
Prerequisites forConfiguring theUmbrella DNS Connector 1801
Configure Cisco Umbrella Connection Settings 1802
Create anUmbrella DNS Policy 1803
Edit Umbrella DNS Policies andRules 1803
Associate theUmbrella DNS Policy with anAccess Control Policy 1804
Prefiltering andPrefilter Policies 1805 CHAPTER 63
About Prefiltering 1805
About Prefilter Policies 1805
Tunnel vsPrefilter Rules 1806
Prefiltering vsAccess Control 1807
Passthrough Tunnels andAccess Control 1809
Best Practices forFastpath Prefiltering 1810
Best Practices forEncapsulated TrafficHandling 1810
Requirements andPrerequisites forPrefilter Policies 1811
Configure Prefiltering 1812
Tunnel andPrefilter Rule Components 1813
Prefilter Rule Conditions 1815
Interface Rule Conditions 1815
Network Rule Conditions 1815
VLAN TagsRule Conditions 1816
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lixContents

Port Rule Conditions forPrefilter Rules 1816
TimeandDay Rule Conditions 1817
Tunnel Rule Conditions 1817
Encapsulation Rule Conditions 1817
Tunnel Zones andPrefiltering 1818
Using Tunnel Zones 1818
Creating Tunnel Zones 1820
Moving Prefilter Rules toanAccess Control Policy 1821
Prefilter Policy HitCounts 1822
LargeFlow Offloads 1823
Flow Offload Limitations 1824
Service Policies 1827 CHAPTER 64
About Threat Defense Service Policies 1827
How Service Policies Relate toFlexConfig andOther Features 1828
What AreConnection Settings? 1828
Requirements andPrerequisites forService Policies 1829
Guidelines andLimitations forService Policies 1829
Configure Threat Defense Service Policies 1830
Configure aService Policy Rule 1830
Bypass TCP State Checks forAsymetrical Routing (TCP State Bypass) 1833
TheAsymetrical Routing Problem 1833
Guidelines andLimitations forTCP State Bypass 1834
Configure TCP State Bypass 1835
Disable TCP Sequence Randomization 1837
Examples forService Policy Rules 1838
Protect Servers from aSYN Flood DoS Attack (TCP Intercept) 1838
Make theThreat Defense Device Appear onTraceroutes 1841
Monitoring Service Policies 1842
Intelligent Application Bypass 1845 CHAPTER 65
Introduction toIAB 1845
IAB Options 1846
Requirements andPrerequisites forIntelligent Application Bypass 1848
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxContents

Configuring Intelligent Application Bypass 1848
IAB Logging andAnalysis 1849
Content Restriction 1853 CHAPTER 66
About Content Restriction 1853
Requirements andPrerequisites forContent Restriction 1854
Guidelines andLimitations forContent Restriction 1855
Using Access Control Rules toEnforce Content Restriction 1855
Safe Search Options forAccess Control Rules 1856
Using aDNS Sinkhole toEnforce Content Restriction 1856
ZeroTrust Access 1859 CHAPTER 67
About Zero TrustAccess 1859
How Threat Defense Works with Zero TrustAccess 1860
Why UseZero TrustAccess? 1861
Components ofaZero TrustAccess Configuration 1861
Zero TrustAccess Workflow 1862
Limitations forZero TrustAccess 1863
Prerequisites forZero TrustApplication Policy 1864
Manage Zero TrustApplication Policies 1864
Create aZero TrustApplication Policy 1865
Create anApplication Group 1866
Create anApplication 1867
SetTargeted Devices forZero TrustAccess Policy 1869
Edit aZero TrustApplication Policy 1870
Monitor Zero TrustSessions 1871
History forZero TrustAccess 1872
Intrusion Detection andPrevention 1873 PART XIV
Netw orkAnalysis andIntrusion Policies Overview 1875 CHAPTER 68
Network Analysis andIntrusion Policy Basics 1875
How Policies Examine TrafficForIntrusions 1876
Decoding, Normalizing, andPreprocessing: Network Analysis Policies 1877
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxiContents

Access Control Rules: Intrusion Policy Selection 1878
Intrusion Inspection: Intrusion Policies, Rules, andVariable Sets 1879
Intrusion Event Generation 1880
System-Provided andCustom Network Analysis andIntrusion Policies 1881
System-Provided Network Analysis andIntrusion Policies 1881
Benefits ofCustom Network Analysis andIntrusion Policies 1883
Benefits ofCustom Network Analysis Policies 1883
Benefits ofCustom Intrusion Policies 1884
Limitations ofCustom Policies 1885
License Requirements forNetwork Analysis andIntrusion Policies 1887
Requirements andPrerequisites forNetwork Analysis andIntrusion Policies 1887
TheNavigation Panel: Network Analysis andIntrusion Policies 1887
Conflicts andChanges: Network Analysis andIntrusion Policies 1889
Exiting aNetwork Analysis orIntrusion Policy 1890
Getting Started with Intrusion Policies 1891 CHAPTER 69
Intrusion Policy Basics 1891
License Requirements forIntrusion Policies 1892
Requirements andPrerequisites forIntrusion Policies 1893
Managing Intrusion Policies 1893
Custom Intrusion Policy Creation 1894
Creating aCustom Snort 2Intrusion Policy 1894
Editing Snort 2Intrusion Policies 1895
Intrusion Policy Changes 1896
Access Control Rule Configuration toPerform Intrusion Prevention 1896
Access Control Rule Configuration andIntrusion Policies 1897
Configuring anAccess Control Rule toPerform Intrusion Prevention 1897
Drop Behavior inanInline Deployment 1897
Setting Drop Behavior inanInline Deployment 1898
Drop Behavior inaDual System Deployment 1898
Intrusion Policy Advanced Settings 1899
Optimizing Performance forIntrusion Detection andPrevention 1900
Tuning Intrusion Policies Using Rules 1901 CHAPTER 70
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxiiContents

Intrusion Rule Tuning Basics 1901
Intrusion Rule Types 1901
License Requirements forIntrusion Rules 1902
Requirements andPrerequisites forIntrusion Rules 1903
Viewing Intrusion Rules inanIntrusion Policy 1903
Intrusion Rules Page Columns 1903
Intrusion Rule Details 1904
Viewing Intrusion Rule Details 1905
Setting aThreshold foranIntrusion Rule 1906
Setting Suppression foranIntrusion Rule 1906
Setting aDynamic Rule State from theRule Details Page 1907
Setting anSNMP Alert foranIntrusion Rule 1907
Adding aComment toanIntrusion Rule 1908
Intrusion Rule Filters inanIntrusion Policy 1908
Intrusion Rule Filters Notes 1908
Intrusion Policy Rule Filters Construction Guidelines 1909
Intrusion Rule Configuration Filters 1911
Intrusion Rule Content Filters 1911
Intrusion Rule Categories 1912
Intrusion Rule Filter Components 1913
Intrusion Rule Filter Usage 1914
Setting aRule Filter inanIntrusion Policy 1914
Intrusion Rule States 1915
Intrusion Rule State Options 1915
Setting Intrusion Rule States 1916
Intrusion Event Notification Filters inanIntrusion Policy 1916
Intrusion Event Thresholds 1917
Intrusion Event Thresholds Configuration 1917
Adding andModifying Intrusion Event Thresholds 1918
Viewing andDeleting Intrusion Event Thresholds 1919
Intrusion Policy Suppression Configuration 1920
Intrusion Policy Suppression Types 1920
Suppressing Intrusion Events foraSpecific Rule 1920
Viewing andDeleting Suppression Conditions 1921
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxiiiContents

Dynamic Intrusion Rule States 1922
Dynamic Intrusion Rule State Configuration 1923
Setting aDynamic Rule State from theRules Page 1923
Adding Intrusion Rule Comments 1925
Custom Intrusion Rules 1927 CHAPTER 71
Custom Intrusion Rules Overview 1927
License Requirements fortheIntrusion Rule Editor 1928
Requirements andPrerequisites fortheIntrusion Rule Editor 1928
Rule Anatomy 1928
TheIntrusion Rule Header 1929
Intrusion Rule Header Action 1930
Intrusion Rule Header Protocol 1930
Intrusion Rule Header Direction 1931
Intrusion Rule Header Source andDestination IPAddresses 1931
Intrusion Rule Header Source andDestination Ports 1934
Intrusion Event Details 1935
Adding aCustom Classification 1938
Defining anEvent Priority 1939
Defining anEvent Reference 1939
Custom Rule Creation 1939
Writing New Rules 1940
Modifying Existing Rules 1941
Adding Comments toIntrusion Rules 1942
Deleting Custom Rules 1943
Searching forRules 1943
Search Criteria forIntrusion Rules 1944
Rule Filtering ontheIntrusion Rules Editor Page 1945
Filtering Guidelines 1945
Keyword Filtering 1945
Character String Filtering 1947
Combination Keyword andCharacter String Filtering 1947
Filtering Rules 1947
Keywords andArguments inIntrusion Rules 1948
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxivContents

Thecontent andprotected_content Keywords 1948
Basic content andprotected_content Keyword Arguments 1950
content andprotected_content Keyword Search Locations 1951
Overview: HTTP content andprotected_content Keyword Arguments 1953
Overview: content Keyword Fast Pattern Matcher 1957
Thereplace Keyword 1959
Thebyte_jump Keyword 1960
Thebyte_test Keyword 1963
Thebyte_extract Keyword 1965
Thebyte_math Keyword 1968
Overview: Thepcre Keyword 1970
pcre Syntax 1971
pcre Modifier Options 1973
pcre Example Keyword Values 1976
Themetadata Keyword 1978
Service Metadata 1979
Metadata Search Guidelines 1984
IPHeader Values 1985
ICMP Header Values 1987
TCP Header Values andStream Size 1988
Thestream_reassembly Keyword 1992
SSL Keywords 1992
Theappid Keyword 1994
Application Layer Protocol Values 1995
TheRPC Keyword 1995
TheASN.1 Keyword 1995
Theurilen Keyword 1996
DCE/RPC Keywords 1997
SIPKeywords 2000
GTP Keywords 2002
SCADA Keywords 2014
Modbus Keywords 2014
DNP3 Keywords 2015
CIPandENIP Keywords 2018
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxvContents

S7Commplus Keywords 2019
Packet Characteristics 2020
Active Response Keywords 2022
Theresp Keyword 2022
Thereact Keyword 2023
Thedetection_filter Keyword 2024
ThetagKeyword 2025
Theflowbits Keyword 2026
flowbits Keyword Options 2026
Guidelines forUsing theflowbits Keyword 2028
flowbits Keyword Examples 2028
Thehttp_encode Keyword 2033
http_encode Keyword Syntax 2034
http_encode Keyword example: Using Twohttp_endcode Keywords toSearch forTwo
Encodings 2034
Overview: Thefile_type andfile_group Keywords 2034
Thefile_type andfile_group Keywords 2035
Thefile_data Keyword 2036
Thepkt_data Keyword 2037
Thebase64_decode andbase64_data Keywords 2037
LayersinIntrusion andNetw orkAnalysis Policies 2039 CHAPTER 72
Layer Basics 2039
License Requirements forNetwork Analysis andIntrusion Policy Layers 2039
Requirements andPrerequisites forNetwork Analysis andIntrusion Policy Layers 2040
TheLayer Stack 2040
TheBase Layer 2041
System-Provided Base Policies 2041
Custom Base Policies 2041
TheEffectofRule Updates onBase Policies 2042
Changing theBase Policy 2043
TheCisco Recommendations Layer 2043
Layer Management 2044
Shared Layers 2045
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxviContents

Managing Layers 2046
Navigating Layers 2047
Intrusion Rules inLayers 2047
Configuring Intrusion Rules inLayers 2048
Removing Rule Settings from Multiple Layers 2049
Accepting Rule Changes from aCustom Base Policy 2050
Preprocessors andAdvanced Settings inLayers 2051
Configuring Preprocessors andAdvanced Settings inLayers 2052
Tailoring Intrusion Protection toYourNetw orkAssets 2053 CHAPTER 73
About Cisco Recommended Rules 2053
Default Settings forCisco Recommendations 2054
Advanced Settings forCisco Recommendations 2055
Generating andApplying Cisco Recommendations 2056
Script Detection 2057
Sensiti veData Detection 2059 CHAPTER 74
Sensitive Data Detection Basics 2059
Global Sensitive Data Detection Options 2060
Individual Sensitive Data TypeOptions 2061
System-Provided Sensitive Data Types 2062
License Requirements forSensitive Data Detection 2062
Requirements andPrerequisites forSensitive Data Detection 2063
Configuring Sensitive Data Detection 2063
Monitored Application Protocols andSensitive Data 2064
Special Case: Sensitive Data Detection inFTP Traffic 2065
Custom Sensitive Data Types 2065
Data Patterns inCustom Sensitive Data Types 2066
Configuring Custom Sensitive Data Types 2068
Editing Custom Sensitive Data Types 2069
Global Limit forIntrusion EventLogging 2071 CHAPTER 75
Global Rule Thresholding Basics 2071
Global Rule Thresholding Options 2072
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxviiContents

License Requirements forGlobal Thresholds 2073
Requirements andPrerequisites forGlobal Thresholds 2074
Configuring Global Thresholds 2074
Disabling theGlobal Threshold 2075
Intrusion Prevention Performance Tuning 2077 CHAPTER 76
About Intrusion Prevention Performance Tuning 2077
License Requirements forIntrusion Prevention Performance Tuning 2078
Requirements andPrerequisites forIntrusion Prevention Performance Tuning 2078
Limiting Pattern Matching forIntrusions 2078
Regular Expression Limits Overrides forIntrusion Rules 2079
Overriding Regular Expression Limits forIntrusion Rules 2080
PerPacket Intrusion Event Generation Limits 2081
Limiting Intrusion Events Generated PerPacket 2081
Packet andIntrusion Rule Latency Threshold Configuration 2082
Latency-Based Performance Settings 2082
Packet Latency Thresholding 2082
Packet Latency Thresholding Notes 2083
Enabling Packet Latency Thresholding 2084
Configuring Packet Latency Thresholding 2084
Rule Latency Thresholding 2085
Rule Latency Thresholding Notes 2086
Configuring Rule Latency Thresholding 2087
Intrusion Performance Statistic Logging Configuration 2088
Configuring Intrusion Performance Statistic Logging 2088
Netw orkMalwar eProtection andFilePolicies 2091 PART XV
Netw orkMalwar eProtection andFilePolicies 2093 CHAPTER 77
About Network Malware Protection andFilePolicies 2093
FilePolicies 2094
Requirements andPrerequisites forFilePolicies 2094
License Requirements forFileandMalware Policies 2095
Best Practices forFilePolicies andMalware Detection 2095
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxviiiContents

FileRule Best Practices 2095
FileDetection Best Practices 2096
FileBlocking Best Practices 2096
FilePolicy Best Practices 2097
How toConfigure Malware Protection 2098
Plan andPrepare forMalware Protection 2098
Configure FilePolicies 2099
Add FilePolicies toYourAccess Control Configuration 2100
Configuring anAccess Control Rule toPerform Malware Protection 2101
SetUpMaintenance andMonitoring ofMalware Protection 2102
Cloud Connections forMalware Protection 2102
AMP Cloud Connection Configurations 2103
Requirements andBest Practices forAMP Cloud Connections 2103
Change AMP Options 2103
Dynamic Analysis Connections 2104
Requirements forDynamic Analysis 2104
Viewing theDefault Dynamic Analysis Connection 2104
Enabling Access toDynamic Analysis Results inthePublic Cloud 2104
Maintain YourSystem: Update FileTypes Eligible forDynamic Analysis 2105
FilePolicies andFileRules 2106
Create orEdit aFilePolicy 2106
Advanced andArchive FileInspection Options 2106
Managing FilePolicies 2109
FileRules 2110
FileRule Components 2111
FileRule Actions 2112
Creating FileRules 2119
Access Control Rule Logging forMalware Protection 2120
Retrospective Disposition Changes 2120
FileandMalware Inspection Performance andStorage Options 2120
Tuning FileandMalware Inspection Performance andStorage 2122
(Optional) Malware Protection with AMP forEndpoints 2123
Comparison ofMalware Protection: Firepower vs.AMP forEndpoints 2123
About Integrating Firepower with AMP forEndpoints 2124
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxixContents

Benefits ofIntegrating Firepower andAMP forEndpoints 2124
AMP forEndpoints andAMP Private Cloud 2125
Integrate Firepower andSecure Endpoint 2125
History forNetwork Malware Protection andFilePolicies 2127
Encrypted TrafficHandling 2129 PART XVI
TrafficDecryption Overview 2131 CHAPTER 78
TrafficDecryption Explained 2131
TLS/SSL Handshake Processing 2132
ClientHello Message Handling 2133
ServerHello andServer Certificate Message Handling 2136
TLS/SSL Best Practices 2138
TheCase forDecryption 2138
When toDecrypt Traffic,When NottoDecrypt 2139
Decrypt andResign (Outgoing Traffic) 2140
Known Key Decryption (Incoming Traffic) 2141
Other Decryption Rule Actions 2141
Decryption Rule Components 2141
Decryption Rule Order Evaluation 2142
Multi-Rule Example 2143
TLS Crypto Acceleration 2145
TLS Crypto Acceleration Guidelines andLimitations 2146
ViewtheStatus ofTLS Crypto Acceleration 2147
How toConfigure Decryption Policies andRules 2148
History forDecryption Policy 2149
Decryption Policies 2153 CHAPTER 79
About Decryption Policies 2153
Requirements andPrerequisites forDecryption Policies 2154
Create aDecryption Policy 2154
Create aDecryption Policy with Outbound Connection Protection 2156
Upload anInternal CAforOutbound Protection 2158
Generate anInternal CAforOutbound Protection 2158
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxContents

Create aDecryption Policy with Inbound Connection Protection 2159
Create aDecryption Policy with Other Rule Actions 2161
Decryption Policy Default Actions 2162
Default Handling Options forUndecryptable Traffic 2162
SetDefault Handling forUndecryptable Traffic 2164
Decryption Policy Advanced Options 2164
TLS 1.3Decryption Best Practices 2166
Decryption Rules 2169 CHAPTER 80
Decryption Rules Overview 2169
Requirements andPrerequisites forDecryption Rules 2169
Decryption Rule Guidelines andLimitations 2170
Guidelines forUsing TLS/SSL Decryption 2170
Decryption Rule Unsupported Features 2171
TLS/SSL DoNotDecrypt Guidelines 2171
TLS/SSL Decrypt -Resign Guidelines 2173
TLS/SSL Decrypt -Known Key Guidelines 2175
TLS/SSL Block Guidelines 2175
TLS/SSL Certificate Pinning Guidelines 2176
TLS/SSL Heartbeat Guidelines 2176
TLS/SSL Anonymous Cipher Suite Limitation 2176
TLS/SSL Normalizer Guidelines 2176
Other Decryption Rule Guidelines 2177
Decryption Rule TrafficHandling 2177
Encrypted TrafficInspection Configuration 2179
Decryption Rule Order Evaluation 2180
Decryption Rule Conditions 2181
Security Zone Rule Conditions 2182
Network Rule Conditions 2182
VLAN TagsRule Conditions 2183
User Rule Conditions 2183
Application Rule Conditions 2184
Port Rule Conditions 2185
Category Rule Conditions 2185
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxiContents

Server Certificate-Based Decryption Rule Conditions 2186
Certificate Decryption Rule Conditions 2186
Distinguished Name (DN) Rule Conditions 2187
Trusting External Certificate Authorities 2192
Certificate Status Decryption Rule Conditions 2193
Cipher Suite Decryption Rule Conditions 2196
Encryption Protocol Version Decryption Rule Conditions 2199
Decryption Rule Actions 2199
Decryption Rule Monitor Action 2199
Decryption Rule DoNotDecrypt Action 2200
Decryption Rule Blocking Actions 2201
Decryption Rule Decrypt Actions 2201
Monitor TLS/SSL Hardware Acceleration 2201
Informational Counters 2202
Alert Counters 2202
Error Counters 2202
Fatal Counters 2203
Troubleshooting Using Crypto Archives 2204
Decryption Rules andPolicy Example 2207 CHAPTER 81
Decryption Rules Best Practices 2207
Bypass Inspection with Prefilter andFlow Offload 2208
DoNotDecrypt Best Practices 2209
Decrypt -Resign andDecrypt -Known Key Best Practices 2209
Decryption Rules toPutFirst 2210
Decryption Rules toPutLast 2210
Decryption Policy Walkthrough 2210
Recommended Policy andRule Settings 2211
Decryption Policy Settings 2212
Access Control Policy Settings 2213
Decryption Rule Examples 2214
TraffictoPrefilter 2215
First Decryption Rule: DoNotDecrypt Specific Traffic 2215
Next Decryption Rules: Decrypt Specific TestTraffic 2216
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxiiContents

DoNotDecrypt Low-Risk Categories, Reputations, orApplications 2217
Create aDecrypt -Resign Rule forCategories 2218
Last Decryption Rules: Block orMonitor Certificates andProtocol Versions 2220
Decryption Rule Settings 2226
User Identity 2227 PART XVII
User Identity Overview 2229 CHAPTER 82
About User Identity 2229
Identity Terminology 2230
About User Identity Sources 2230
Best Practices forUser Identity 2231
Identity Deployments 2233
How toSetUpanIdentity Policy 2233
TheUser Activity Database 2237
TheUsers Database 2237
Cisco Defense Orchestrator Host andUser Limits 2238
Cloud-delivered Firewall Management Center Host Limit 2238
Cisco Defense OrchestratorCloud-delivered Firewall Management Center User Limit 2239
Realms 2241 CHAPTER 83
About Realms andRealm Sequences 2241
Realms andTrusted Domains 2243
Supported Servers forRealms 2246
Supported Server Object Class andAttribute Names 2247
License Requirements forRealms 2248
Requirements andPrerequisites forRealms 2248
Create aProxy Sequence 2248
Create aMicrosoft Azure ADRealm 2250
About Azure ADandISEwith Resource Owned Password Credentials 2250
About Azure ADandISEwith TEAP/EAP-TLS 2251
How toCreate aMicrosoft Azure ADRealm 2251
Configure Microsoft Azure Active Directory 2252
How toConfigure ISEforMicrosoft Azure AD 2253
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxiiiContents

GetRequired Information ForYourMicrosoft Azure ADRealm 2254
Create anAzure ADRealm 2256
Azure ADUser Session Timeout 2257
Create anLDAP Realm oranActive Directory Realm andRealm Directory 2258
Prerequisites forKerberos Authentication 2260
Realm Fields 2261
Realm Directory andSynchronize fields 2264
Connect Securely toActive Directory 2267
Find theActive Directory Server's Name 2267
Export theActive Directory Server's Root Certificate 2268
Synchronize Users andGroups 2269
Create aRealm Sequence 2270
Configure theManagement Center forCross-Domain-T rust: TheSetup 2272
Configure theSecure Firewall Management Center forCross-Domain-T rustStep 1:Configure Realms
andDirectories 2273
Configure themanagement center forCross-Domain-T rustStep 2:Synchronize Users andGroups 2277
Configure themanagement center forCross-Domain-T rustStep 3:Resolve Issues 2278
Manage aRealm 2279
Compare Realms 2280
Troubleshoot Realms andUser Downloads 2280
Troubleshoot Cross-Domain Trust 2283
History forRealms 2286
User Contr olwith ISE/ISE-PIC 2287 CHAPTER 84
TheISE/ISE-PIC Identity Source 2287
Source andDestination Security Group Tag(SGT) Matching 2288
License Requirements forISE/ISE-PIC 2289
Requirements andPrerequisites forISE/ISE-PIC 2289
ISE/ISE-PIC Guidelines andLimitations 2289
How toConfigure ISE/ISE-PIC forUser Control 2292
How toConfigure ISEWithout aRealm 2292
How toConfigure ISE/ISE-PIC forUser Control Using aRealm 2293
Configure ISE/ISE-PIC 2295
Configure Security Groups andSXP Publishing inISE 2295
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxivContents

Export Certificates from theISE/ISE-PIC Server forUseintheManagement Center 2298
Export aSystem Certificate 2299
Generate aSelf-Signed Certificate 2299
Import ISE/ISE-PIC Certificates 2300
Configure ISEforUser Control 2301
ISE/ISE-PIC Configuration Fields 2302
Troubleshoot theISE/ISE-PIC orCisco TrustSec Issues 2304
History forISE/ISE-PIC 2305
User Contr olwith Capti vePortal 2307 CHAPTER 85
TheCaptive Portal Identity Source 2307
About Hostname Redirect 2308
License Requirements forCaptive Portal 2308
Requirements andPrerequisites forCaptive Portal 2308
Captive Portal Guidelines andLimitations 2308
How toConfigure theCaptive Portal forUser Control 2311
Configure theCaptive Portal Part1:Create aNetwork Object 2312
Configure theCaptive Portal Part2:Create anIdentity Policy andActive Authentication Rule 2314
Update aCustom Authentication Form 2316
Configure theCaptive Portal Part3:Create aTCP Port Access Control Rule 2316
Configure theCaptive Portal Part4:Create aUser Access Control Rule 2317
Captive Portal Example: Create aDecryption Policy with anOutbound Rule 2318
Configure Captive Portal Part6:Associate Identity andDecryption Policies with theAccess Control
Policy 2320
Captive Portal Fields 2321
Exclude Applications from Captive Portal 2322
Troubleshoot theCaptive Portal Identity Source 2323
History forCaptive Portal 2324
User Contr olwith Remote Access VPN 2325 CHAPTER 86
TheRemote Access VPN Identity Source 2325
Configure RAVPN forUser Control 2326
Troubleshoot theRemote Access VPN Identity Source 2326
NotObserving Correct Settings forVPN Statistics 2327
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxvContents

User Contr olwith TSAgent 2329 CHAPTER 87
TheTerminal Services (TS) Agent Identity Source 2329
TSAgent Guidelines 2330
User Control with TSAgent 2330
Troubleshoot theTSAgent Identity Source 2330
History forTSAgent 2331
User Identity Policies 2333 CHAPTER 88
About Identity Policies 2333
License Requirements forIdentity Policies 2334
Requirements andPrerequisites forIdentity Policies 2334
Create anIdentity Policy 2335
Create anIdentity Mapping Filter 2336
Identity Rule Conditions 2337
Security Zone Rule Conditions 2337
Network Rule Conditions 2338
Redirect toHost Name Network Rule Conditions 2338
VLAN TagsRule Conditions 2338
Port Rule Conditions 2339
Port, Protocol, andICMP Code Rule Conditions 2339
Realm &Settings Rule Conditions 2340
Create anIdentity Rule 2342
Identity Rule Fields 2344
Sample Identity Policies andRules 2344
Create anIdentity Policy with aPassive Authentication Rule 2345
Create aSample Identity Policy with anActive Authentication Rule 2347
Active Authentication Using aRealm 2349
Active Authentication Using aRealm Sequence 2350
Manage anIdentity Policy 2351
Manage anIdentity Rule 2352
Troubleshoot User Control 2352
Netw orkDisco very 2355 PART XVIII
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxviContents

Netw orkDisco veryOverview 2357 CHAPTER 89
About Detection ofHost, Application, andUser Data 2357
Host andApplication Detection Fundamentals 2358
Passive Detection ofOperating System andHost Data 2358
Active Detection ofOperating System andHost Data 2359
Current Identities forApplications andOperating Systems 2359
Current User Identities 2360
Application andOperating System Identity Conflicts 2361
NetFlow Data 2361
Requirements forUsing NetFlow Data 2362
Differences between NetFlow andManaged Device Data 2362
Host Identity Sour ces 2365 CHAPTER 90
Overview: Host Data Collection 2365
Requirements andPrerequisites forHost Identity Sources 2366
Determining Which Host Operating Systems theSystem CanDetect 2366
Identifying Host Operating Systems 2366
Custom Fingerprinting 2367
Managing Fingerprints 2368
Activating andDeactivating Fingerprints 2368
Editing anActive Fingerprint 2369
Editing anInactive Fingerprint 2369
Creating aCustom Fingerprint forClients 2370
Creating aCustom Fingerprint forServers 2372
Host Input Data 2375
Requirements forUsing Third-Party Data 2375
Third-Party Product Mappings 2376
Mapping Third-Party Products 2376
Mapping Third-Party Product Fixes 2377
Mapping Third-Party Vulnerabilities 2378
Custom Product Mappings 2379
Creating Custom Product Mappings 2379
Editing Custom Product Mapping Lists 2380
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxviiContents

Activating andDeactivating Custom Product Mappings 2381
Nmap Scanning 2381
Nmap Remediation Options 2382
Nmap Scanning Guidelines 2386
Example: Using Nmap toResolve Unknown Operating Systems 2387
Example: Using Nmap toRespond toNew Hosts 2388
Managing Nmap Scanning 2389
Adding anNmap Scan Instance 2390
Editing anNmap Scan Instance 2391
Adding anNmap Scan Target 2392
Editing anNmap Scan Target 2392
Creating anNmap Remediation 2393
Editing anNmap Remediation 2395
Running anOn-Demand Nmap Scan 2395
Nmap Scan Results 2396
Viewing Nmap Scan Results 2396
Nmap Scan Results Fields 2397
Importing Nmap Scan Results 2398
Application Detection 2399 CHAPTER 91
Overview: Application Detection 2399
Application Detector Fundamentals 2400
Identification ofApplication Protocols intheWebInterface 2401
Implied Application Protocol Detection from Client Detection 2402
Host Limits andDiscovery Event Logging 2402
Special Considerations forApplication Detection 2403
Application Detection inSnort 2andSnort 3 2404
Requirements andPrerequisites forApplication Detection 2405
Custom Application Detectors 2405
Custom Application Detector andUser-Defined Application Fields 2405
Configuring Custom Application Detectors 2408
Creating aUser-Defined Application 2409
Specifying Detection Patterns inBasic Detectors 2410
Specifying Detection Criteria inAdvanced Detectors 2411
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxviiiContents

Specifying EVE Process Assignments 2412
Testing aCustom Application Protocol Detector 2413
Viewing orDownloading Detector Details 2414
Sorting theDetector List 2414
Filtering theDetector List 2415
Filter Groups fortheDetector List 2415
Navigating toOther Detector Pages 2416
Activating andDeactivating Detectors 2416
Editing Custom Application Detectors 2417
Deleting Detectors 2418
Netw orkDisco veryPolicies 2419 CHAPTER 92
Overview: Network Discovery Policies 2419
Requirements andPrerequisites forNetwork Discovery Policies 2420
Network Discovery Customization 2420
Configuring theNetwork Discovery Policy 2421
Network Discovery Rules 2421
Configuring Network Discovery Rules 2422
Actions andDiscovered Assets 2422
Monitored Networks 2423
Port Exclusions 2425
Zones inNetwork Discovery Rules 2427
TheTraffic-Based Detection Identity Source 2427
Configuring Advanced Network Discovery Options 2430
Network Discovery General Settings 2431
Configuring Network Discovery General Settings 2431
Network Discovery Identity Conflict Settings 2431
Configuring Network Discovery Identity Conflict Resolution 2432
Network Discovery Vulnerability Impact Assessment Options 2432
Enabling Network Discovery Vulnerability Impact Assessment 2433
Indications ofCompromise 2433
Enabling Indications ofCompromise Rules 2434
Adding NetFlow Exporters toaNetwork Discovery Policy 2434
Network Discovery Data Storage Settings 2435
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxixContents

Configuring Network Discovery Data Storage 2436
Configuring Network Discovery Event Logging 2437
Adding Network Discovery OSandServer Identity Sources 2437
Troubleshooting YourNetwork Discovery Strategy 2438
FlexConf igPolicies 2441 PART XIX
FlexConf igPolicies 2443 CHAPTER 93
FlexConfig Policy Overview 2443
Recommended Usage forFlexConfig Policies 2444
CLICommands inFlexConfig Objects 2444
Determine theASA Software Version andCurrent CLIConfiguration 2445
Prohibited CLICommands 2445
Template Scripts 2447
FlexConfig Variables 2448
How toProcess Variables 2448
How toSeeWhat aVariable WillReturn foraDevice 2451
FlexConfig Policy Object Variables 2452
FlexConfig System Variables 2453
Predefined FlexConfig Objects 2454
Predefined TextObjects 2459
Requirements andPrerequisites forFlexConfig Policies 2463
Guidelines andLimitations forFlexConfig 2463
Customizing Device Configuration with FlexConfig Policies 2464
Configure FlexConfig Objects 2466
Add aPolicy Object Variable toaFlexConfig Object 2468
Configure Secret Keys 2469
Configure FlexConfig TextObjects 2470
Configure theFlexConfig Policy 2471
SetTargetDevices foraFlexConfig Policy 2472
Preview theFlexConfig Policy 2473
Verify theDeployed Configuration 2474
Remove Features Configured Using FlexConfig 2475
Convert from FlexConfig toManaged Feature 2477
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxContents

Examples forFlexConfig 2477
How toConfigure Precision TimeProtocol (ISA 3000) 2477
How toConfigure Automatic Hardware Bypass forPower Failure (ISA 3000) 2481
Migrating FlexConfig Policies 2483
Advanced Netw orkAnalysis andPreprocessing 2487 PART XX
Advanced Access Contr olSettings forNetw orkAnalysis andIntrusion Policies 2489 CHAPTER 94
About Advanced Access Control Settings forNetwork Analysis andIntrusion Policies 2489
Requirements andPrerequisites forAdvanced Access Control Settings forNetwork Analysis and
Intrusion Policies 2489
Inspection ofPackets That Pass Before TrafficIsIdentified 2490
Best Practices forHandling Packets That Pass Before TrafficIdentification 2490
Specify aPolicy toHandle Packets That Pass Before TrafficIdentification 2490
Advanced Settings forNetwork Analysis Policies 2491
Setting theDefault Network Analysis Policy 2492
Network Analysis Rules 2493
Network Analysis Policy Rule Conditions 2493
Configuring Network Analysis Rules 2494
Managing Network Analysis Rules 2495
GetStarted with Snort 3Netw orkAnalysis Policies 2497 CHAPTER 95
Overview ofNetwork Analysis Policies 2497
Manage Network Analysis Policies 2498
Snort 3Definitions andTerminologies forNetwork Analysis Policy 2499
Prerequisites forNetwork Analysis andIntrusion Policies 2501
Custom Network Analysis Policy Creation forSnort 3 2501
Common Industrial Protocol Safety 2505
Detect andBlock Safety Segments inCIPPackets 2506
Network Analysis Policy Mapping 2506
ViewNetwork Analysis Policy Mapping 2507
Create aNetwork Analysis Policy 2507
Modify theNetwork Analysis Policy 2507
Search foranInspector ontheNetwork Analysis Policy Page 2508
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxiContents

Copy theInspector Configuration 2508
Customize theNetwork Analysis Policy 2509
Make Inline Edit foranInspector toOverride Configuration 2512
Revert Unsaved Changes during Inline Edits 2513
ViewtheListofInspectors with Overrides 2514
Revert Overridden Configuration toDefault Configuration 2514
Validate Snort 3Policies 2515
Examples ofCustom Network Analysis Policy Configuration 2517
Network Analysis Policy Settings andCached Changes 2528
Custom Rules inSnort 3 2528
Overview ofEncrypted Visibility Engine 2531
How EVE Works 2532
Indications ofCompromise Events 2532
QUIC Fingerprinting inEVE 2533
Configure EVE 2533
ViewEVE Events 2534
ViewEVE Dashboard 2535
About Elephant Flow Detection andRemediation 2536
Elephant Flow Upgrade from Intelligent Application Bypass 2536
Configure Elephant Flow 2536
Application LayerPreprocessors 2541 CHAPTER 96
Introduction toApplication Layer Preprocessors 2541
License Requirements forApplication Layer Preprocessors 2542
Requirements andPrerequisites forApplication Layer Preprocessors 2542
TheDCE/RPC Preprocessor 2542
Connectionless andConnection-Oriented DCE/RPC Traffic 2543
DCE/RPC Target-Based Policies 2544
RPC over HTTP Transport 2545
DCE/RPC Global Options 2545
DCE/RPC Target-Based Policy Options 2547
Traffic-Associated DCE/RPC Rules 2551
Configuring theDCE/RPC Preprocessor 2551
TheDNS Preprocessor 2553
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxiiContents

DNS Preprocessor Options 2554
Configuring theDNS Preprocessor 2555
TheFTP/T elnet Decoder 2556
Global FTP andTelnet Options 2556
Telnet Options 2557
Server-Level FTP Options 2558
FTP Command Validation Statements 2560
Client-Level FTP Options 2561
Configuring theFTP/T elnet Decoder 2562
TheHTTP Inspect Preprocessor 2563
Global HTTP Normalization Options 2564
Server-Level HTTP Normalization Options 2565
Server-Level HTTP Normalization Encoding Options 2573
Configuring TheHTTP Inspect Preprocessor 2576
Additional HTTP Inspect Preprocessor Rules 2578
TheSunRPC Preprocessor 2578
SunRPC Preprocessor Options 2579
Configuring theSunRPC Preprocessor 2579
TheSIPPreprocessor 2580
SIPPreprocessor Options 2581
Configuring theSIPPreprocessor 2583
Additional SIPPreprocessor Rules 2584
TheGTP Preprocessor 2585
GTP Preprocessor Rules 2585
Configuring theGTP Preprocessor 2586
TheIMAP Preprocessor 2587
IMAP Preprocessor Options 2587
Configuring theIMAP Preprocessor 2588
Additional IMAP Preprocessor Rules 2589
ThePOP Preprocessor 2590
POP Preprocessor Options 2590
Configuring thePOP Preprocessor 2591
Additional POP Preprocessor Rules 2592
TheSMTP Preprocessor 2593
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxiiiContents

SMTP Preprocessor Options 2593
Configuring SMTP Decoding 2597
TheSSH Preprocessor 2598
SSH Preprocessor Options 2599
Configuring theSSH Preprocessor 2602
TheSSL Preprocessor 2603
How SSL Preprocessing Works 2603
SSL Preprocessor Options 2604
Configuring theSSL Preprocessor 2605
SSL Preprocessor Rules 2606
SCAD APreprocessors 2609 CHAPTER 97
Introduction toSCADA Preprocessors 2609
License Requirements forSCADA Preprocessors 2609
Requirements andPrerequisites forSCADA Preprocessors 2610
TheModbus Preprocessor 2610
Modbus Preprocessor Ports Option 2610
Configuring theModbus Preprocessor 2611
Modbus Preprocessor Rules 2612
TheDNP3 Preprocessor 2612
DNP3 Preprocessor Options 2612
Configuring theDNP3 Preprocessor 2613
DNP3 Preprocessor Rules 2614
TheCIPPreprocessor 2614
CIPPreprocessor Options 2615
CIPEvents 2615
CIPPreprocessor Rules 2616
Guidelines forConfiguring theCIPPreprocessor 2616
Configuring theCIPPreprocessor 2617
TheS7Commplus Preprocessor 2618
Configuring theS7Commplus Preprocessor 2618
Transport andNetw orkLayerPreprocessors 2621 CHAPTER 98
Introduction toTransport andNetwork Layer Preprocessors 2621
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxivContents

License Requirements forTransport andNetwork Layer Preprocessors 2621
Requirements andPrerequisites forTransport andNetwork Layer Preprocessors 2622
Advanced Transport/Network Preprocessor Settings 2622
Ignored VLAN Headers 2622
Active Responses inIntrusion Drop Rules 2622
Advanced Transport/Network Preprocessor Options 2623
Configuring Advanced Transport/Network Preprocessor Settings 2624
Checksum Verification 2625
Checksum Verification Options 2625
Verifying Checksums 2626
TheInline Normalization Preprocessor 2627
Inline Normalization Options 2627
Configuring Inline Normalization 2632
TheIPDefragmentation Preprocessor 2633
IPFragmentation Exploits 2633
Target-Based Defragmentation Policies 2634
IPDefragmentation Options 2634
Configuring IPDefragmentation 2637
ThePacket Decoder 2638
Packet Decoder Options 2638
Configuring Packet Decoding 2641
TCP Stream Preprocessing 2642
State-Related TCP Exploits 2643
Target-Based TCP Policies 2643
TCP Stream Reassembly 2644
TCP Stream Preprocessing Options 2645
Configuring TCP Stream Preprocessing 2651
UDP Stream Preprocessing 2653
UDP Stream Preprocessing Options 2653
Configuring UDP Stream Preprocessing 2654
Specif icThreatDetection 2655 CHAPTER 99
Introduction toSpecific Threat Detection 2655
License Requirements forSpecific Threat Detection 2655
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxvContents

Requirements andPrerequisites forSpecific Threat Detection 2656
Back Orifice Detection 2656
Back Orifice Detection Preprocessor 2656
Detecting Back Orifice 2657
Portscan Detection 2657
Portscan Types, Protocols, andFiltered Sensitivity Levels 2658
Portscan Event Generation 2660
Portscan Event Packet View 2662
Configuring Portscan Detection 2663
Rate-Based Attack Prevention 2665
Rate-Based Attack Prevention Examples 2666
detection_filter Keyword Example 2666
Dynamic Rule State Thresholding orSuppression Example 2667
Policy-W ideRate-Based Detection andThresholding orSuppression Example 2668
Rate-Based Detection with Multiple Filtering Methods Example 2669
Rate-Based Attack Prevention Options andConfiguration 2670
Rate-Based Attack Prevention, Detection Filtering, andThresholding orSuppression 2671
Configuring Rate-Based Attack Prevention 2672
Adapti veProfiles 2675 CHAPTER 100
About Adaptive Profiles 2675
License Requirements forAdaptive Profiles 2676
Requirements andPrerequisites forAdaptive Profiles 2676
Adaptive Profile Updates 2676
Adaptive Profile Updates andCisco Recommended Rules 2677
Adaptive Profile Options 2677
Configuring Adaptive Profiles 2678
Refer ence 2681 PART XXI
FAQandSupport 2683 CHAPTER 101
CDO Platform Maintenance Schedule 2683
What does thedefault action "Analyze alltunnel traffic"forprefiltering mean? 2684
How CDO Processes Personal Information 2684
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxviContents

CanIrestore abackup from adifferent device? 2684
Does deploying anew prefilter policy immediately affectongoing sessions? 2684
How doIkeep mysecurity databases andfeeds uptodate? 2684
What version ofSecure Firewall Threat Defense canImanage with cloud-delivered Firewall Management
Center? 2685
How doIexclude specific traffic(Webex, Zoom, etc)from theremote access VPN? 2685
How doIprevent users from accessing undesirable external network resources, such asinappropriate
websites? 2686
Security Feed Questions 2687
How doIupdate intrusion rules (SRU/LSP)? 2687
How doIupdate myCisco vulnerability database (VDB)? 2687
How doIupdate myGeolocation database? 2688
How doIupdate Security Intelligence feeds? 2688
How doIupdate URL reputations? 2689
How doIsetup Rate-Based Attack Prevention ontheFTD using Snort 2? 2689
Complete theInitial Configuration ofaSecure Firewall Threat Defense Device Using theCLI 2690
Secur eFirewall Management Center Command Line Refer ence 2695 CHAPTER 102
About theSecure Firewall Management Center CLI 2695
Secure Firewall Management Center CLIModes 2696
Secure Firewall Management Center CLIManagement Commands 2696
exit 2696
expert 2696
?(question mark) 2697
Secure Firewall Management Center CLIShow Commands 2697
version 2697
Secure Firewall Management Center CLIConfiguration Commands 2698
password 2698
Secure Firewall Management Center CLISystem Commands 2699
generate-troubleshoot 2699
lockdown 2700
reboot 2700
restart 2700
shutdown 2700
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxviiContents

Security ,Inter netAccess, andCommunication Ports 2703 CHAPTER 103
Security Requirements 2703
Cisco Clouds 2703
Internet Access Requirements 2704
Communication Port Requirements 2704
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
lxxxviiiContents

PARTI
Managing Cisco Secure Firewall Threat Defense
with Cloud-delivered Firewall Management
Center
•Managing Cisco Secure Firewall Threat Defense Devices with Cloud-delivered Firewall Management
Center ,onpage 1
•Cisco AIAssistant User Guide ,onpage 5

CHAPTER 1
Managing Cisco Secure Firewall Threat Defense
Devices with Cloud-delivered Firewall
Management Center
Thecloud-delivered Firewall Management Center isasoftware-as-a-service (SaaS) product thatmanages
Secure Firewall Threat Defense devices andisdelivered viaCisco Defense Orchestrator (CDO). The
cloud-delivered Firewall Management Center offersmany ofthesame functions asanon-premises Secure
Firewall Management Center .
Thecloud-delivered Firewall Management Center hasthesame appearance andbehavior asanon-premises
Secure Firewall Management Center anduses thesame FMC API.
AsaSaaS product, theCisco Defense Orchestrator (CDO) operations team isresponsible fordeploying and
maintaining cloud-delivered Firewall Management Center software. Asnewfeatures areintroduced, theCDO
operations team updates your CDO tenant's cloud-delivered Firewall Management Center foryou.
Amigration wizard isavailable tohelp youmigrate your Secure Firewall Threat Defense devices from your
on-premises Secure Firewall Management Center tothecloud-delivered Firewall Management Center .The
devices must have Threat Defense software Version 7.0.3 oralater 7.0.x release, orVersion 7.2orlater
installed tobemigrated. Threat Defense 7.1releases arenotsupported.
Onboarding Secure Firewall Threat Defense devices iscarried outinCDO using familiar processes such as
onboarding adevice with itsserial number orusing aCLIcommand thatincludes aregistration key.Once
thedevice isonboarded, itisvisible both inCDO andinthecloud-delivered Firewall Management Center ,
however ,youconfigure thedevice inthecloud-delivered Firewall Management Center .InCDO, youcan
view device-specific information such asversion, configuration status, connectivity ,health status, andnode
status. When youclick onthehealth status from CDO, youaretaken totherespective device's health monitoring
page inthecloud-delivered Firewall Management Center user interface.
CDO provides high availability support forthethreat defense devices thatitmanages through thedatainterface.
This feature issupported fordevices running software version 7.2orlater.
Youcananalyze syslog events generated byyour onboarded threat defense devices using Security Analytics
andLogging (SaaS) orSecurity Analytics andLogging (On-Premises). TheSaaS version stores events inthe
cloud andyouview theevents inCDO. Theon-premises version stores events inanon-premises Secure
Network Analytics appliance andanalysis isdone intheon-premises Secure Firewall Management Center .
Inboth cases, justaswith anon-premises FMC today ,youcanstillsend logs toalogcollector ofyour choice
directly from thesensors.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
1

Thelicense forcloud-delivered Firewall Management Center isaper-device-managed license andthere isno
license required forthecloud-delivered Firewall Management Center itself. Existing Secure Firewall Threat
Defense devices re-use their existing smart licenses andnewSecure Firewall Threat Defense devices provision
new smart licenses foreach feature implemented ontheFTD.
Existing customers cancontinue touseCDO formanaging other device types like, theSecure Firewall ASA,
Meraki, Cisco IOSdevices, Umbrella, andAWSvirtual private clouds. IfyouuseCDO tomanage aSecure
Firewall Threat Defense device configured forlocal management with Firepower Device Manager ,youcan
continue tomanage them with CDO aswell.
Tolearn how tohave acloud-delivered Firewall Management Center provisioned onyour tenant, seeEnable
Cloud-delivered Firewall Management Center onYourCDO Tenant ,onpage 3.
Learn more about theFirewall Management Center features wesupport incloud-delivered Firewall Management
Center
•Onboarding Overview
•Migrate Secure Firewall Threat Defense toCloud
•Health
•Backup/Restore ,onpage 333
•Scheduling
•Import/Export
•Reporting andAlerting
•Transparent orRouted Firewall Mode
•High Availability
•Interfaces andDevice Settings
•Routing ,onpage 1117
•Objects andCertificates
•Network Address Translation
•Access Control Policies
•VPN
•Intrusion Detection andPrevention
•Network Malware Protection andFilePolicies
•Encrypted TrafficHandling
•User Identity
•Network Discovery
•FlexConfig Policies
•Advanced Network Analysis andPreprocessing
•Enable Cloud-delivered Firewall Management Center onYourCDO Tenant ,onpage 3
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
2Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center

•Hardware andSoftware Support ,onpage 3
•CDO Platf orm Maintenance Schedule ,onpage 4
Enable Cloud-delivered Firewall Management Center onYour
CDO Tenant
Ifyouwant tomanage your Secure Firewall Threat Defense devices, youcanenable thecloud-delivered
Firewall Management Center onyour tenant. Youneed tohave anadmin orasuper admin userroletoperform
thistask.
Procedure
Step 1 From theCDO menu, click Tools &Services >Firewall Management Center >
 >FMC >Enable
Cloud-Deli veredFMC .
Step 2 CDO starts provisioning acloud-delivered Firewall Management Center instance inthebackground; ittypically
takes 15to30minutes forthistobecomplete. Youcantrack theprovisioning progress ontheStatus column
ofCloud-Deli veredFMC .
After theprovisioning iscomplete, thestatus changes toActive.Inaddition, yougetaCloud-deli vered
Firewall Management Center isReady notification ontheCDO notifications panel andontheapplications
onwhich youhave configured incoming webhooks. SeeNotification Settings formore information.
After youreceive theCloud-deli veredFirewall Management Center isReady notification, ensure
thatyoulogoutofandloginback toyour tenant once, toseetheCloud-Deli veredFMC right pane
options, such asActions ,Management ,andSystem .Note
Youcanthen onboard your threat defense devices tothecloud-delivered Firewall Management Center and
manage them.
Hardware and Software Support
Cloud-delivered Firewall Management Center supports these Secure Firewall Threat Defense software versions
when they areinstalled onanysupported hardware orvirtual device:
•Verion 7.0.3 orlater 7.0.x versions.
•Version 7.2andlater versions.
Software Version 7.1is_not_ supported. Note
SeeFirepower Threat Defense Support Specifics formore information.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
3Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Enable Cloud-delivered Firewall Management Center onYourCDO Tenant

CDO Platform Maintenance Schedule
CDO updates itsplatform every week with new features andquality improvements. Updates canbemade
during a3hour period according tothisschedule.
Time ofDay
(24-hour time)Day oftheWeek
09:00 UTC -12:00 UTC Thursday
During thismaintenance period, youcanstillaccess your tenant andifyouhave acloud-delivered Firewall
Management Center ,youcanaccess thatplatform aswell. Additionally ,thedevices youhave onboarded to
CDO continue toenforce their security policies.
•Weadvise younottouseCDO todeploy configuration changes onthedevices itmanages during
maintenance periods.
•Ifthere isanyissue thatstops CDO from communicating, thatfailure isaddressed onallaffected tenants
asquickly aspossible, even ifitisoutside themaintenance window .Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
4Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
CDO Platform Maintenance Schedule

CHAPTER 2
Cisco AIAssistant User Guide
•Getting Started with Cisco AIAssistant ,onpage 5
•Prompt Guide forCisco AIAssistant ,onpage 9
•Create Policy Rules ,onpage 12
•Cisco AIAssistant Frequently Asked Questions (FAQ),onpage 16
Getting Started with Cisco AIAssistant
Overview
Firewall administrators often encounter challenges inmanaging firewall policies andaccessing related
documentation. TheAIAssistant with Cisco Defense Orchestrator (CDO) andcloud-delivered Firewall
Management Center streamlines these tasks, making itmore efficient tomanage firewall devices, policies,
andreference documentation when needed.
Prerequisites
Administrators need toensure they have metthefollowing prerequisites tousetheAIAssistant :
•User roles:
•CDO andcloud-delivered Firewall Management Center- Super Administrators orAdministrators.
•On-Prem FMC -Global Domain Admin.
Upon successful login intoyour tenant, youwillnotice anAIAssistant widget positioned inthetopmenu bar
ofthedashboard (
 ),click onthewidget tolaunch theAIAssistant .
Onboarding First-T ime User
After opening theAIAssistant forthefirsttime, acarousel window opens andyouareintroduced totheAI
Assistant .Youarepresented with information onhow theAIAssistant protects theprivacy ofyour data, and
afewtipsonhow tobestuseit.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
5

Inthecarousel window ,Click Next tothelearn how theAIAssistant works with your data. Werecommend
thatyouread through thistounderstand how theAIAssistant treats your data andstrives fortransparency .
Atanypoint, ifyouclick Cancel theAIAssistant carousel closes.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
6Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Getting Started with Cisco AIAssistant

Youwillnotbeable tousetheAIAssistant until youhave navigated through allthescreens inthecarousel.
This andanyother action youtake with theAIAssistant isspecific toyour user account.
Youractions donotaffectother authorized administrators ofyour tenant.
Note
Clicking Launch AIAssistant opens theAIAssistant inafloating conversation window; Youcanselect a
response from oneofoursuggestion tiles ortype inaquestion inthetextbox.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
7Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Getting Started with Cisco AIAssistant

TheAIAssistant comes pre-enabled onevery tenant. Ifyouprefer todisable theAIAssistant navigate goto
theSettings page andswitch offtheAIAssistant toggle todisable it.Note
Cisco AIAssistant Components
TheCisco AIAssistant isengineered with user-friendly components.
•TextInput Box -Atthebottom ofthewindow ,youhave atextinput boxthatallows youtotype and
engage with theAIAssistant.
•New Thread-Click the"+"icon tostart anew conversation with theAIAssistant
•Chat History -Expand themenu trayontheleftsideofthescreen toseeyour chat history .
•Feedback -TheAIAssistant hasanoption toprovide feedback foritsresponses. Click thumbs upto
show appreciation orthumbs down tolettheassistant know thatitcandobetter .
•Expand View-Click ontheexpand icon onthetopright toopen theAIAssistant infullscreen view .
Cisco AIAssistant Best Practices
Werecommend thefollowing bestpractices toeffectively communicate with theAIAssistant :
•Askdetailed questions -TheAIAssistant istrained with policy/rule configuration anddocumentation
data.. Inorder toreceive arelevant response, werecommend thatyouprovide theassistant with important
details.
Sample question- How many decryption policies areenabled onmyaccount? Where canIaccess thepolicies?
Dothepolicies have source anddestination enabled?Tip
•Divide thetasks intosub-tasks -Fortasks thatrequired multiple setsofinstructions itcanbebeneficial
todivide thetasks andinput thesub-tasks after theprevious taskisanswered.
TheAIAssistant takes 24-hours tosync policy database, thisresults ina24hr delay ofthedata provided in
responses forpolicy inquiry .This does notimpact anyother features andusers cancontinue tointeract with
theAIAssistant .Note
Inthesample question above -Wesuggest breaking down thequestion intosmaller tasks andasking them
oneatatime, waiting foraresponse before moving ontothenext question. This approach helps prevent
information overload andreduces theneed forrepetition. -
•How many decryption policies areenabled onmyaccount?
•Where canIaccess thepolicies?
•Dothepolicies have source anddestination enabled?Tip
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
8Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Getting Started with Cisco AIAssistant

•Youcannot upload files orimages totheAIAssistant .
•TheAIAssistant currently provides support only inEnglish language.
Please read through thePrompt Guide togain abetter understanding oftherecommended bestpractices. Note
Prompt Guide forCisco AIAssistant
TheCisco AIAssistant ’sPrompt Guide isdesigned tohelp youinteract more effectively with ourAIAssistant ,
ensuring yougetaccurate, relevant, andhelpful responses toyour queries andcommands. Yourexperience
with Cisco AIAssistant canbegreatly enhanced byhow effectively youcommunicate with it.
Understanding aPrompt
Aprompt isaquestion oranytextinput thatyouprovide totheCisco AIAssistant toinitiate aconversation
orrequest information. Essentially ,it'sthequestion youpose totheAIAssistant .Theway youformat and
construct your prompt plays acrucial roleindetermining theresponse from theAIAssistant .
KeyComponents ofaprompt:
•Clarity :Beclear andspecific about what you're asking for.
•Context :Provide necessary background information.
•Purpose :State what youwant toachieve with your prompt.
Examples ofEffective Prompts
What’ sthedifference? Effective Prompt General Prompt
General prompt -Without
indicating theneed for"both" or
"all" attributes explicitly ,the
assistant might provide default
information oneither IPsorports,
notboth.
Effecti veprompt -This prompt is
clear anduses thekeyword
"distinct" tospecify theneed for
unique values, which aligns with
theAIAssistant capabilities.Canyouprovide mewith the
distinct IPaddresses thatare
currently blocked byourfirewall
policies?What aretheIPaddresses andports
currently being blocked?
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
9Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Prompt Guide forCisco AIAssistant

What’ sthedifference? Effective Prompt General Prompt
General prompt -This is
overloaded with requests andlacks
clarity onwhether allattributes are
needed together ,leading to
potential confusion fortheAI
Assistant .
Effecti veprompt -This clearly
states therequirement formultiple
attributes byusing "both," ensuring
theassistant understands toinclude
allrequested information.Ineed both thenames and
descriptions ofallactive firewall
rules. Please include both attributes
intheoutput.Tellmethefirewall rules, who set
them, andallthechanges made last
month.
General prompt -This combines
questions about rules andupdating
procedures, which canlead to
incomplete orinaccurate responses
duetolackofcontext orspecificity .
Effecti veprompt -Theisspecific
about theneed foralistofrules and
their actions, making ita
straightforward request fortheAI
Assistant .Show mealistofallfirewall rules
along with their corresponding
actions forthepastweek.What arethefirewall rules forIP
addresses XandY,andhow doI
update them?
General prompt -This is
ambiguous anddoes notusethe
provided keywords inamanner that
theAIAssistant caneffectively
interpret.
Effecti veprompt -This approach
helps maintain context andensures
each question isaddressed
accurately .Initial Question: What arethe
current firewall rules?
Follow-Up Question: Canyoualso
provide theactions associated with
these rules?Give meeverything butonly the
names.
General prompt -This istoo
vague andlacks detail. TheAI
Assistant isunable todetermine
which specific policy theuser is
requesting information about.
Effecti veprompt -This informs
theAIAssistant theuser needs
details forEdge ACP access policy .
TheAIAssistant willrespond with
alltherelevant details.Iwant tounderstand myEdge ACP
access control policy ,canyoutell
memore about it?Tellmeeverything about the
policies onmyaccount.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
10Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Prompt Guide forCisco AIAssistant

What’ sthedifference? Effective Prompt General Prompt
General prompt -This lacks
specificity ,combining multiple
complex requests without clear
instructions, andassuming theAI
Assistant hasimplicit knowledge
ofhow toaggregate andpresent the
data. This leads topotential
misunderstandings andresponses
thatmay notmeet user
expectations.
Effecti veprompt -This approach
helps maintain context andprovides
theassistant with clear instructions.InEdge ACP policy ,what ports and
protocols areconfigured inthe
rules? Include thecounts ofthe
number ofrules using itandsort
largesttosmallest.Show meports, protocols, andrule
counts inEdge ACP policy ,biggest
tosmallest.
Guidelines forCrafting Effective Prompts
Byproviding precise input andcontext, yousignificantly increase thechances ofreceiving atargeted, relevant,
anduseful answer from theAIAssistant
•BeSpecif icandprovide context: Draft your with relevant information, usethecorrect device names,
policy names, etc.thatcould help theAIAssistant understand your request better .
•UseProper Syntax: While AIAssistant canunderstand colloquial language, clear andgrammatically
correct sentences canimprove response accuracy .
•Clarify theDesir edOutput: Ifyouhave apreference fortheresponse format (e.g., alist,adetailed
explanation, tables), mention it.
•Corr ection andFeedback: Iftheresponse doesn't meet your expectations, youcanprovide feedback
oraskforclarification within your next .
•DirectNaming Requests: Usethephrase "give meonly thenames" toinstruct theAIAssistant toprovide
solely names initsresponse. Forexample, ifauser wants toknow thenames offirewall rules orpolicy
names without additional details, they canusethephrase 'give meonly thenames offirewall rules' to
instruct theAIAssistant toprovide solely thenames initsresponse.
•Unique Values: Employ thekeyword "unique" torequest unique values from theAIAssistant .
•Rules andActions: When requesting information about rules, users canspecify which attributes they
want toinclude intheresponse forcomprehensive insights. Forexample, ifauser wants toknow about
firewall rules allowing access toaspecific zone, they canspecify additional attributes such astheaction
(e.g., allow ordeny) andanyrelevant source zones. Byproviding specific instructions, users cantailor
theresponse totheir exact requirements andgain deeper insights intotheconfiguration. This approach
allows users toobtain more relevant andactionable information from theAIAssistant .
•Sequential Questioning: Formultiple inquiries, pose them asseparate, follow-up questions toenhance
clarity andcontext, rather than combining them intoasingle complex .
•Explicit Multi-Attrib uteQueries: Clearly state "Both" or"allofthefollowing" when seeking multiple
attributes; otherwise, theAIAssistant might select anattribute atrandom torespond to.Forexample,
when querying about firewall rules, attributes could include details such astherulename, description,
action (e.g., allow ordeny), source IPaddresses, destination IPaddresses, ports, protocols, etc.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
11Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Prompt Guide forCisco AIAssistant

Inthecontext ofmulti-attribute queries, itmeans requesting information about multiple characteristics
orproperties simultaneously .Forinstance, auser might want toknow both thenames anddescriptions
offirewall rules, orthey might beinterested inthesource IPaddresses anddestination ports ofnetwork
traffic.
Create Policy Rules
TheAIAssistant simplifies policy rulecreation process fortheSecure Firewall Threat Defense managed by
cloud-delivered Firewall Management Center andminimizes theneed forextensive technical knowledge or
manual configuration. Byleveraging Prompt Guide forCisco AIAssistant ,administrators canquickly establish
robust security measures, enhancing theoverall efficiency andsecurity oftheir network. These rules once
created arelisted under thepolicies section inyour tenant.
Example Scenario
Consider ascenario where anadministrator receives thefollowing request:
RickMiles canaccess Facebook onhiswork computer only fromtheoffice.
This would betheprocess theadministrator would follow tocreate therule:
Procedure
Step 1 Theadministrator needs tocreate anew ruletoaccommodate thisrequest. They putthisrequest totheAI
Assistant:
Step 2 TheAIAssistant asks aquestion tobetter understand theadministrator ’srequirement, andthen guides them
through aselection ofoptions tocreate therule:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
12Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Create Policy Rules

Step 3 TheAIAssistant finds multiple results forFacebook, andasks theadministrator toclarify ifthey arereferring
toFacebook asanapplication, URL oraZone:
Step 4 TheAIAssistant prompts theadministrator toselect thepolicy towhich therulewillbeadded:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
13Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Create Policy Rules

Step 5 TheAIAssistant suggests a“Rule Name”, which theadministrator canmodify ifneeded:
Iftheadministrator chooses a“Rule Name” thatalready exists inapolicy ,theassistant displays an
error prompting theadministrator toenter anew name.Note
Step 6 TheAIAssistant prompts theadministrator toselect a“User name” anda“Category” fortherule:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
14Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Create Policy Rules

Step 7 TheAIAssistant requests confirmation forrulecreation andprovides asummary oftheadministrator's request
along with theinputs fortherule:
Theadministrator canedittheruleinformation byclicking Edit andcancel theprocess ofrulecreation
byclicking Cancel .Note
Step 8 Assuming thattheadministrator confirms “Yes”forrulecreation, theruleiscreated andwillbereflected in
thepolicy theadministrator chose:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
15Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Create Policy Rules

Ifyouareunable tocreate apolicy rule, refer toCisco AIAssistant Frequently Asked Questions (FAQ),
onpage 16.Note
Cisco AIAssistant Frequently Asked Questions (FAQ)
Q.What istheCisco AIAssistant ?
A. TheCisco AIAssistant isanapplication thatanswers questions about existing configurations onyour
Secure Firewall Threat Defense device andhow tomanage those devices inthecloud-delivered Firewall
Management Center .
Q.What cantheAIAssistant help youwith?
A. TheAIAssistant answers questions about how toconfigure your Secure Firewall Threat Defense
devices.•
•TheAIAssistant answers questions about how toconfigure access control andother security policies.
•TheAIAssistant simplifies theconfiguration foraquicker ,easier policy rulebuilding.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
16Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Cisco AIAssistant Frequently Asked Questions (FAQ)

•TheAIAssistant helps diagnose andtroubleshoot firewall-related issues.
Q.How doyouaccess theAIAssistant ?
A. TheAIAssistant isintegrated with Cisco Defense Orchestrator andcloud-delivered Firewall Management
Center .Toaccess theAIAssistant click theAIAssistant button (
 )ontheCDO orcloud-delivered
Firewall Management Center home page.
Q.What doIdoifaresponse iswrong?
A. Click thefeedback option toreport incorrect information.
Q.How doIasktheAIAssistant aquestion?
A. Click theAIAssistant button (
 )onCisco Defense Orchestrator orcloud-delivered Firewall
Management Center home page andtype your question textbox.
Q.What subjects canIaskabout?
A. YoucanasktheAIAssistant about your configured firewall devices, policies, andsettings; andask
questions about how toconfigure your firewall.
Q.What subjects canIaskabout?
A. YoucanasktheAIAssistant about your configured firewall devices, policies, andsettings; andask
questions about how toconfigure your firewall.
Q.IstheCisco AIAssistant Secure?
A. Yes.TheCisco AIAssistant implemented onyour CDO tenant only hasaccess totheinformation and
security policies onyour tenant andyour cloud-delivered Firewall Management Center ,ifyouhave
implemented thatfeature. TheAIAssistant cannot “learn” about policies onother CDO tenants andso,
can’tanswer questions about other CDO tenants orintegrate information from them.
Q.What isCisco's data privacy policy?
A. This isCisco's Online Privacy Statement intheCisco's TrustCenter .
Q.CanIusetheAIAssistant tocreate rules?
A. Yes,youcanusetheAIAssistant tocreate rules. TheAIAssistant provides auser-friendly interface
with simple prompts thatguide youthrough therulecreation process. Itensures accuracy andefficiency ,
allowing youtoseamlessly integrate andmanage policy rules within your workflow .
Q.What types ofrules aresupported bytheAIAssistant?
A. Currently ,theAIAssistant supports theAccess Control Policy Rules. Youcancreate ruletoAllow ,
block ,BLOCK_RESET .Administrators canrequest specific details about Access Rule policies fortheir
tenant.
Q.TheAIAssistant isunable tocreate arule, how doIfixthis?
A. TheAIAssistant isunable tocreate apolicy rule:
•Object notfound: IftheAIAssistant cannot findthespecified object name within thetenant, it
willprompt theadmin toverify theobject name andtryagain. Werecommend providing theassistant
with anupdated prompt thatincludes thecorrect object name.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
17Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Cisco AIAssistant Frequently Asked Questions (FAQ)

•Incomplete Request :TheAIAssistant requires complete andaccurate information tocreate arule.
Forabetter understanding, please refer tothetable below:
A.Required Object
(Theuser must provide atleast oneofthese objects
togive theAIAssistant better context forrule
creation. )Object provided bytheuser
•Destination Zone
•Destination Network
•Destination Port
•Destination Dynamic Attribute
•Application
•URL•Source Zone
•Source Network
•Source Dynamic Attribute
•Destination Zone
•Destination Network
•Destination Port
•Destination Dynamic Attribute
•Application
•URLUser
•Source Zone
•Source Network
•Source Dynamic Attribute
•User
•Application
•URL•Destination Zone
•Destination Network
•Destination Port
•Destination Dynamic Attribute
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
18Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Cisco AIAssistant Frequently Asked Questions (FAQ)

Required Object
(Theuser must provide atleast oneofthese objects
togive theAIAssistant better context forrule
creation. )Object provided bytheuser
•Source Zone
•Source Network
•Source Dynamic Attribute
•User
•Destination Zone
•Destination Network
•Destination Port
•Destination Dynamic Attribute•Application
•URL
Q.DoIneed topaytousetheCisco AIAssistant forFirewall?
A. TheCisco AIAssistant iscurrently available forearly customer evaluation atnocost. During thisrollout
phase, usage isfreeofcharge.However ,Cisco plans toinclude theproduct intheGeneral Price List
(GPL) inthefuture. After general availability ,Cisco reserves theright torequire customers topurchase
asubscription tocontinue using theproduct.
Q.Arethere anylimitations onfeatures andfunctionality during theabove -mentioned initial customer
evaluation period?
A. No,there arenoplanned limitations ontheusage ofavailable functionality .During theearly availability
period, youwillhave fullaccess toallfeatures andfunctionalities oftheproduct. However ,Cisco will
monitor usage levels andmay,atitssolediscretion, restrict orlimit usage, aswell asaddorremove
features andfunctionalities during thisevaluation phase.
Q.What happens ifIchoose nottosubscribe and/or donotpayfortheproduct after theabove-mentioned
period?
A. Ifyouchoose nottosubscribe, your access totheCisco AIAssistant forFirewall willbelimited or
discontinued inaccordance with ourpolicy .Youwillhave theoption toreactivate your subscription at
anytime.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
19Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Cisco AIAssistant Frequently Asked Questions (FAQ)

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
20Managing Cisco Secure Firewall Threat Defense with Cloud-delivered Firewall Management Center
Cisco AIAssistant Frequently Asked Questions (FAQ)

PARTII
Onboard Devices toCloud-delivered Firewall
Management Center
•Onboard anFTD totheCloud-delivered Firewall Management Center ,onpage 23
•Migrate On-Prem Management Center Managed Secure Firewall Threat Defense toCloud-delivered
Firewall Management Center ,onpage 49
•Device Management ,onpage 73
•Change Management ,onpage 149
•Users ,onpage 161
•Configuration Deployment ,onpage 169

CHAPTER 3
Onboard anFTD totheCloud-delivered Firewall
Management Center
Read thefollowing information foronboarding prerequisties andprocedures.
•Onboarding Overview ,onpage 23
•Prerequisites toOnboard aDevice toCloud-delivered Firewall Management Center ,onpage 24
•Onboard aDevice with aCLIRegistration Key,onpage 25
•Onboard aDevice with Zero-T ouch Provisioning ,onpage 27
•Deploy aThreat Defense Device with AWS,onpage 28
•Deploy aThreat Defense Device inAzure ,onpage 30
•Deploy aThreat Defense Device toGoogle Cloud Platform ,onpage 33
•Onboard aSecure Firewall Threat Defense Cluster ,onpage 36
•Delete Devices from Cloud-delivered Firewall Management Center ,onpage 37
•About Device Interfaces ,onpage 38
•Troubleshooting ,onpage 41
Onboarding Overview
Review thefollowing usecases andsupported sofware versions thatarecompatible with cloud-delivered
Firewall Management Center management.
Youmust ensure thatthethreat defense device ports have external andoutbound access forthecloud-delivered
Firewall Management Center toonboard them. There isnorequirement foranon-premises orcloud-based
Security Device Controller (SDC) forthisoperation. Formore information, seeNetwork Requirements .
Tosend threat defense Syslog events totheCisco cloud, youcansetuptheSecure Event Connector (SEC).
Formore information, seeInstalling Secure Event Connectors .Note
Threat Defense Devices Currently Managed byCloud-delivered Firewall Management Center
Thefollowing scenarios occur when youeither move ormigrate adevice tothecloud-delivered Firewall
Management Center :
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
23

•Ifyoudelete adevice from anon-prem management center orSecure Firewall Threat Defense device
manager toonboard tothecloud-delivered Firewall Management Center ,thechange ofmanagers wipes
anypolicies configured through theon-prem management center .
•Ifyoumigrate adevice from anon-prem management center tothecloud-delivered Firewall Management
Center ,thedevice retains themajority ofyour previously configured policies.
Ifyoudonotknow ifyour device isalready managed byanalternative manager ,usetheshowmanagers
command inthedevice's CLI.Note
Onboarding Methods
Cloud-delivered Firewall Management Center supports thefollowing onboarding methods:
•Onboard aDevice with aCLIRegistration Key -Onboard adevice with aregistration key.Theinitial
device setup wizard iscomplete onthedevice.
•Onboard aDevice with Zero-T ouch Provisioning -Onboard anew factory-shipped device with itsserial
number .Note thatthismethod only supports Firepower 1000 ,Firepower 2100 ,orSecure Firewall 3100
devices.
Version 7.0.3 does notsupport zero-touch provisioning . Note
Prerequisites toOnboard aDevice toCloud-delivered Firewall
Management Center
Onboard Limitations and Requirements
Beaware ofthefollowing limitations when onboarding adevice tothecloud-delivered Firewall Management
Center :
•Devices must berunning version 7.0.3, orversion 7.2andlater.Westrongly recommend version 7.2
orlater.
•Youcanmigrate anHApairthatismanaged byanOn-Prem Firewall Management Center byfollowing
theMigrate FTD toCloud-Delivered Firewall Management Center process. Confirm both peers areina
healthy state prior tomigrating.
•Only devices thatareconfigured forlocal management andaremanaged byadevice manager canbe
onboarded with theserial number andzero-touch provisioning methods.
•Ifthedevice ismanaged byanon-prem management center ,youcaneither onboard thedevice to
cloud-delivered Firewall Management Center ormigrate thedevice. Migrating retains anyexisting
policies andobjects, whereas onboarding thedevice removes most policies andallobjects. SeeMigrate
FTD toCloud-Delivered Firewall Management Center formore information.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
24Onboard Devices toCloud-delivered Firewall Management Center
Prerequisites toOnboard aDevice toCloud-delivered Firewall Management Center

•Ifyour device iscurrently managed byadevice manager ,unregister allyour smart licenses before you
onboard thedevice. Even ifyouswitch device management, theCisco Smart Software Manager will
retain thesmart licenses.
•Ifyouhave previously onboarded adevice thatwasmanaged byadevice manager anddeleted thedevice
from CDO with theintention ofre-onboarding forcloud management, youmust register thedevice
manager totheSecurity Services Exchange cloud after deleting thedevice. Seethe"Access Security
Services Exchange" chapter intheFirepower andCisco Secur eXThreatResponse Integration Guide .
Onboarding adevice tothecloud-delivered Firewall Management Center removes anypolicies andmost
objects configured through theprevious manager .Ifyour device iscurrently managed byanon-prem
management center ,itispossible tomigrate thedevice andretain your policies andobjects. SeeMigrate FTD
toCloud-Delivered Firewall Management Center formore information.Tip
Network Requirements
Before youonboard adevice, ensure thefollowing ports have external andoutbound access. Confirm the
following ports onthedevice areallowed. Ifcommunication ports areblocked behind afirewall, onboarding
thedevice may fail.
Youcannot configure these ports intheCDO UI.Youmust enable these ports through thedevice's SSH. Note
Table 1:Device Port Requirements
Details Protocol /Feature Port
Send andreceive data from the
internet.HTTPS 443/tcp
Communicate with theAMP cloud
(public orprivate)HTTPS 443
Securely communicate between
appliances inadeployment.Appliance communications 8305/tcp
Management and Data Interfaces
Make sure your device iscorrectly configured with either amanagement ordata interface.
Toconfigure amanagement ordata interface onyour device, seeComplete theInitial Configuration ofa
Secure Firewall Threat Defense Device Using theCLI,onpage 2690 .
Onboard aDevice with aCLIRegistration Key
Usetheprocedure below toonboard adevice forcloud-delivered Firewall Management Center with aCLI
registration key.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
25Onboard Devices toCloud-delivered Firewall Management Center
Onboard aDevice with aCLIRegistration Key

Ifyour device iscurrently managed byanon-prem management center ,onboarding thedevice willfail.You
caneither delete thedevice from theon-prem management center andonboard asafresh, new device with
nopolicies orobjects, oryoucanmigrate thedevice andretain theexisting policies andobjects. SeeMigrate
FTD toCloud-Delivered Firewall Managmenet Center formore information.Note
Youcancreate aCDO -managed, standalone logical threat defense device using theSecure Firewall chassis
manager ortheFXOS CLI.Important
Before you begin
Before youonboard adevice, besure tocomplete thefollowing tasks:
•Cloud-delivered Firewall Management Center isenabled foryour tenant.
•Confirm thedevice's CLIconfiguration issuccessfully completed. SeeComplete theInitial Configuration
ofaSecure Firewall Threat Defense Device Using theCLI,onpage 2690 formore information.
•Review theprerequesites andlimitations before youonboard thedevice. See"Prerequisites toOnboard
aDevice toCloud-delivered Firewall Management Center "inManaging Firewall Threat Defense with
Cloud-Delivered Firewall Management Center inCisco Defense Orchestrator formore information.
•Thedevice canbeconfigured foreither local management with Secure Firewall device manager orremote
management with Secure Firewall Management Center .
•Device must berunning version 7.0.3, or7.2.0 andlater.
•Youhave reset thedevice's SSH password aspartofthebootstrap process. Ifyouhave younotreset the
SSH password, CDO recommends using theOnboard aDevice with Zero-T ouch Provisioning ,onpage
27method
Procedure
Step 1 LogintoCDO .
Step 2 Intheleftpane, click Inventory .
Step 3 Inthetop-right corner ,click Onboard (
 ).
Step 4 Click theFTD tile.
Step 5 Under Management Mode ,ensure youselect FTD .Byselecting FTD under Management Mode ,youwill
notbeable tomanage thedevice using theprevious management platform. Allexisting policy configurations
except forinterface configurations willbereset. Youmust re-configure policies after youonboard thedevice.
Step 6 Select UseCLI Registration Keyastheonboarding method.
Step 7 Enter thedevice name intheDevice Name field andclick Next .
Step 8 InthePolicy Assignment step, usethedrop-down menu toselect anaccess control policy todeploy once
thedevice isonboarded. Ifyouhave nopolicies configured, select theDefault Access Contr olPolicy .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
26Onboard Devices toCloud-delivered Firewall Management Center
Onboard aDevice with aCLIRegistration Key

Step 9 Specify whether thedevice youareonboarding isaphysical orvirtual device. Ifyouareonboarding avirtual
device, youmust select thedevice's performance tierfrom thedrop-down menu.
Step 10 Select thesubscription licenses youwant toapply tothedevice. Click Next .
Step 11 CDO generates acommand with theregistration key.Connect tothedevice youareonboarding using SSH.
Loginas"admin" orauser with equivalent admin privileges andpaste theentire registration keyasisinto
thedevice's CLI.
Note: ForFirepower 1000 ,Firepower 2100 ,ISA3000 ,andthreat defense virtual devices, open anSSH
connection tothedevice andloginasadmin .Copy theentire registration command andpaste itintothe
device's CLIinterface attheprompt. IntheCLI, enter Ytocomplete theregistration. Ifyour device was
previously managed bydevice manager ,enter Yestoconfirm thesubmission.
Step 12 Click Next intheCDO onboarding wizard.
Step 13 (Optional) Add labels toyour device tohelp sortandfilter theInventory page. Enter alabel andselect the
blue plus button. Labels areapplied tothedevice after it'sonboarded toCDO .
What todonext
Once thedevice issynchronized, select thedevice youjustonboarded from theInventory page andselect
anyoftheoptions listed under theDevice Management pane located totheright. Westrongly recommend
thefollowing actions:
•Ifyoudidnotalready ,create acustom access control policy tocustomize thesecurity foryour environment.
SeeAccess Control Overview inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall
Mana gement Center inCisco Defense Orchestr ator formore information.
•Enable Cisco Security Analytics andLogging (SAL) toview events intheCDO dashboard orregister
thedevice toanSecure Firewall Management Center forsecurity analytics. SeeCisco Security Analytics
andLogging inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall Mana gement Center
inCisco Defense Orchestr ator formore information.
Onboard aDevice with Zero-T ouch Provisioning
Only theFirepower 1000 ,Firepower 2100 ,andSecure Firewall 3100 devices canbeonboarded with the
zero-touch provisioning method.
Before you begin
Confirm thefollowing iscompleted prior toonboarding:
•Youhave aCDO tenant. Ifyoudonot,seeRequest aCDO Tenant formore information.
•Cloud-delivered Firewall Management Center isenabled foryour tenant.
•Thedevice isfreshly installed buthasnever been logged intobyeither thedevice CLI, amanagement
center ,orthedevice manager .
•Thedevice isrunning version 7.2orlater.Version 7.0.3 does notsupport zero-touch provisioning .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
27Onboard Devices toCloud-delivered Firewall Management Center
Onboard aDevice with Zero-T ouch Provisioning

Procedure
Step 1 LogintoCDO .
Step 2 Intheleftpane, click Inventory .
Step 3 Inthetop-right corner ,click Onboard (
 ).
Step 4 Click theFTD tile.
Step 5 Under Management Mode ,ensure youselect FTD .Byselecting FTD under Management Mode ,youwill
notbeable tomanage thedevice using theprevious management platform. Allexisting policy configurations
except forinterface configurations willbereset. Youmust re-configure policies after youonboard thedevice.
Step 6 Click theUseSerial Number tile.
Step 7 Select cloud-delivered Firewall Management Center from thedrop-down list.Click Next .
Step 8 Enter theDevice Serial Number andtheDevice Name .Select Next .
Step 9 Choose anoption depending onwhether thedevice islogged intoandconfigured foramanager:
•Ifyour device isbrand new andhasnever been configured foramanager ,click Yes,thisnew device
hasneverbeen logged into orconfiguredforamanager .
•Ifyour device hasbeen previously registered foramanager orisstillregistered toamanager ,click No,
thisdevice hasbeen logged into andconfiguredforamanager .
Step 10 Click Next .
Step 11 InthePolicy Assignment step, usethedrop-down menu toselect anaccess control policy todeploy once
thedevice isonboarded. Ifyouhave nopolicies configured, select theDefault Access Contr olPolicy .
Step 12 Select thesubscription licenses youwant toapply tothedevice. Click Next .
What todonext
Once thedevice issynchronized, select thedevice youjustonboarded from theInventory page andselect
anyoftheoptions listed under theDevice Management pane located totheright. Westrongly recommend
thefollowing actions:
•Ifyoudidnotalready ,create acustom access control policy tocustomize thesecurity foryour environment.
SeeAccess Control Overview inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall
Mana gement Center inCisco Defense Orchestr ator formore information.
•Enable Cisco Security Analytics andLogging (SAL) toview events intheCDO dashboard orregister
thedevice toanSecure Firewall Management Center forsecurity analytics. SeeCisco Security Analytics
andLogging inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall Mana gement Center
inCisco Defense Orchestr ator formore information.
Deploy aThreat Defense Device with AWS
Usethefollowing procedure toonboard andpreliminarily provision thefirewall ofathreat defense device
thatisassociated with anAWSVPC tobemanaged bycloud-delivered Firewall Management Center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
28Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Device with AWS

Before you begin
Confirm thefollowing prerequisites arefulfilled prior togenerating avirtual threat defense anddeploying to
anAWSenvironment:
•Youmust have thecloud-delivered Firewall Management Center feature enabled andassociated with
your tenant.
Procedure
Step 1 LogintoCDO .
Step 2 Inthenavigation pane, click Inventory andclick theblue plus button.
Step 3 Select theFTD tile.
Step 4 Under Management Mode ,besure FTD isselected.
Step 5 Select UseAWSVPC astheonboarding method. Ifthere isnoAWSVPC already onboarded, youcanclick
theprovided linkfrom thisstepandonboard thevirtual environment.
Step 6 Select theavailability zone from thedrop-down menu. Select thezone where thecloud threat defense is
located, andnotwhere your local computer islocated.
Step 7 Select themanagement interface subnet with either ofthefollowing options:
•Useexisting subnets -Expand thedrop-down menus andselect theappropriate subnets forthe
management interface, inside interface, andoutside interface subnets.
•Create new subnets -Add asetofsubnet interfaces forthedevice touseonce onboarded. Cisco Defense
Orchestrator automatically creates these subnets andapplies them totheAWSVPC aspartofthe
onboarding procedure.
Note thatthediagnostic interface willusethesame interface asthemanagement interface.
Step 8 Click Select toassign thesubnets. Click Next .
Step 9 Enter thedevice name intheDevice Name field andclick Next .
Step 10 InthePolicy Assignment step, usethedrop-down menu toselect anaccess control policy todeploy once the
device isonboarded. Ifyouhave nopolicies configured, select theDefault Access Contr olPolicy .
Step 11 Select theSubscription Licenses youwant applied tothedevice. Youmust have atleast theURL license
selected forvirtual threat defense devices.
What todonext
Itmay take afewminutes forthedevice toappear inCDO 'sInventory page asitcannot synchronize until
CDO hassuccessfully deployed thecloud formation, initliaized thedevice connections, andestablished
communication with both thevirtual device andtheAWSVPC environment.
Ifnecessary ,youcanmodfiy thevirtual threat defense device performance tierselection after onboarding
through thecloud-delivered Firewall Management Center UI.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
29Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Device with AWS

Deploy aThreat Defense Device inAzure
This isatwo-part process thatinvolves onboarding anAzure account toCDO aswell asgenerating avirtual
threat defense andsimultaneously deploying ittoyour Azure instance.
Onboard anAzure VNet Environment
Usethefollowing procedure toonboard anAzure VNet forcloud-delivered Firewall Management Center
management:
Before you begin
Youmust have thefollowing completed prior tothisonboarding procedure:
•Cloud-delivered Firewall Management Center isenabled foryour tenant.
•Youmust have atleast oneresource group available inyour Azure account with anempty Azure VNet
instance. Ifyoudonothave aresource group tohost thevirtual device, create onewith theAzure portal.
SeeMicrosoft Azure's Manage Azur eresour cegroups byusing theAzur eportal guide formore
information.
•Yourresource group intheAzure portal must have avirtual network created forthevirtual device. If
youdonothave one, create oneintheAzure portal. SeeMicrosoft Azure's Create avirtual netw ork
using theAzur eportal quickstart guide formore information.
•Youmust register Cisco Defense Orchestrator toyour Microsoft account toensure successful
communication between Azure andCDO .Seethe"Quickstart: Register anapplication with theMicrosoft
identity platform" section oftheAzure product documentation formore information.
•Youmust assign abuilt-in role, orcreate acustom role, within theAzure environment andassign ita
member orgroup thatwillaccess both Azure andCDO .Seethe"Azure custom role" section orthe
"Azure custom roles" oftheAzure product documentation formore information.
•Youmust enable allofthefollowing permissions intheAzure environment inorder tosuccessully
communicate with andonboard toCDO :
"Microsoft.Network/virtualNetworks/write"
"Microsoft.Network/virtualNetworks/join/action"
"Microsoft.Network/virtualNetworks/subnets/read"
"Microsoft.Network/virtualNetworks/subnets/write"
"Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action"
"Microsoft.Network/networkSecurityGroups/read"
"Microsoft.Network/networkSecurityGroups/write"
"Microsoft.Network/networkSecurityGroups/join/action"
"Microsoft.Network/networkSecurityGroups/securityRules/write"
"Microsoft.Network/networkSecurityGroups/securityRules/read"
"Microsoft.Network/networkSecurityGroups/securityRules/delete"
"Microsoft.Storage/storageAccounts/write"
"Microsoft.Storage/storageAccounts/read"
"Microsoft.Resources/deployments/write"
"Microsoft.Resources/deployments/read"
"Microsoft.Network/publicIP Addresses/read"
"Microsoft.Network/publicIP Addresses/write"
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
30Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Device inAzure

"Microsoft.Network/routeT ables/read"
"Microsoft.Network/routeT ables/write"
"Microsoft.Network/networkInterfaces/read"
"Microsoft.Network/networkInterfaces/write"
"Microsoft.Compute/virtualMachines/write"
"Microsoft.Resources/deployments/operationstatuses/read"
"Microsoft.Resources/subscriptions/resourcegroups/deployments/operationstatuses/read"
"Microsoft.Network/routeT ables/join/action"
"Microsoft.Network/virtualNetworks/subnets/join/action"
"Microsoft.Network/publicIP Addresses/join/action"
"Microsoft.Network/networkInterfaces/join/action"
"Microsoft.Compute/virtualMachines/read"
"Microsoft.Resources/subscriptions/resourceGroups/write"
"Microsoft.Resources/subscriptions/resourceGroups/delete"
Procedure
Step 1 Review theprerequisites listed above. Youmust register CDO toyour Microsoft account, create auser role,
andenable alltheapplicable permissions prior toonboarding avirtual environment.
Step 2 LogintoCDO .
Step 3 Inthenavigation pane, click Inventory andclick theblue plus button.
Step 4 Select theAzur eVNet tile.
Step 5 Enter thefollowing credentials tocontinue with theonboarding wizard, then click Next :
•Azur eTenant ID(Directory ID)-Adirectory IDisaunique identifier forthetenant intheworld of
Microsoft cloud services. There isonly onedirectory IDpertenant. Tolocate it,logintotheAzure portal
andnavigate toAzur eServices >Azur eActiveDirectory andlocate theTenant IDlisted onthatpage.
•Client ID(Application ID)-Anapplication IDisaunique identifier assigned toCDO byAzure AD
when theappwasregistered. Tolocate it,logintotheAzure portal andnavigate toAzur eServices >
Azur eActiveDirectory >AppRegistrations andview theapplication IDinthelistofapps. Ifthere
isnoapplication IDforCDO ,click New Registrations tocreate oneforthisonboarding procedure.
•Client Secret-Youmust manually request aclient secret, although theAzure portal auto-generates a
unique string toprotect your tenant. Tolocate it,logintotheAzure portal andnavigate toAzur eServices >
Azur eActiveDirectory >AppRegistrations ,then expand theapplication forCDO .Inthepanel on
theleft,click Certif icates &secrets.Ifthere isnosecret, click New client secrettocreate one. Copy
theValue entry forthisonboarding procedure, nottheSecret IDentry .
•Subscription ID-Asubscription isatenant-based agreement touseMicrosoft cloud services; inthis
case, Azure VNet. Thesubscription IDistheunique code associated between thetenant andthisparticular
cloud service. Tolocate it,logintotheAzure portal andnavigate toAzur eServices >Subscriptions .
Ifthere arenosubscriptions available forCDO ,click Add tocreate one.
Step 6 IntheCDO onboarding wizard, usethedrop-down menu toselect theAzur eVNet youwant toonboard.
Step 7 Enter theDevice Name andselect Next .This device name iswhat theAzure VNet isdisplayed asinthe
Inventory page.
Step 8 (Optional) Add labels toyour device tohelp sortandfilter theInventory page. Enter alabel andselect the
blue plus button. Labels areapplied tothedevice after it'sonboarded toCDO .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
31Onboard Devices toCloud-delivered Firewall Management Center
Onboard anAzure VNet Environment

What todonext
Onboard avirtual device inCDO with thisinstance ofAzure VNet asthemanager .SeeDeploy aThreat
Defense Virtual inAzure ,onpage 32formore information.
Deploy aThreat Defense Virtual inAzure
Onboard athreat defense virtual forAzure thatismanaged bycloud-delivered Firewall Management Center .
TheAzure environment canonly support onethreat defense virtual .Toonboard multiple devices, youmust
have aseparate Azure instance foreach ofthose devices.
Before you begin
Ensure thatyouhave anactive Azure subscription.
Procedure
Step 1 LogintoCDO .
Step 2 Intheleftpane, click Inventory andclick theplus icon.
Step 3 Under Select aDevice orService Type,click theFTD tile.
Step 4 Under Management Mode ,ensure thatFTD isselected.
Byselecting FTD under Management Mode ,thedevice isreconfigured tousethecloud-delivered
Firewall Management Center asthemanager .Warning
Step 5 Click Deploy anFTD toacloud environment astheonboarding method.
Step 6 Choose Azur easyour cloud provider from thedrop-down list.
Step 7 (Optional) Ifyouhave notregistered your CDO account toanAzure subscription, youcandosonow.Click
Azur eCloud Shell tolaunch theAzure cloud shell andpaste thescript thatisprovided. Ifyouhave registered
your account orifyouhave completed executing thescript, click Next .
Step 8 Choose aRegion todeploy theAzure subscription from thedrop-down list.
Step 9 Enter theFTD Passw ordthatyouwish touseforSSH console access.
Step 10 Enter aDevice Name .This name isapplied tothethreat defense virtual intheInventory page andAzure
resource group.
Step 11 InthePolicy Assignment step, usethedrop-down menu toselect anaccess control policy todeploy once
thedevice isonboarded. Ifyouhave nopolicies configured, select theDefault Access Contr olPolicy .
Step 12 Select thelicenses youwant toapply tothedevice. Youmust select atleast theessential license asthebase
license forthisdevice. Click Next .
Step 13 Click Complete onboarding .
This completes theonboarding wizard. Itmay take upto20minutes forthedevice tofully onboard and
synchronize. Tomonitor thecreation process, expand theWorkflo wsoption oftheAzure subscription that
ishosting thedevice.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
32Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Virtual inAzure

What todonext
Once thedevice issynchronized, select thedevice youjustonboarded from theInventory page andselect
anyoftheoptions listed under theDevice Management pane located totheright. Westrongly recommend
thefollowing actions:
•Ifyoudidnotalready ,create acustom access control policy tocustomize thesecurity foryour environment.
SeeAccess Control Overview inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall
Mana gement Center inCisco Defense Orchestr ator formore information.
•Enable Cisco Security Analytics andLogging (SAL) toview events intheCDO dashboard orregister
thedevice toanSecure Firewall Management Center forsecurity analytics. SeeCisco Security Analytics
andLogging inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall Mana gement Center
inCisco Defense Orchestr ator formore information.
Deploy aThreat Defense Device toGoogle Cloud Platform
Deploy athreat defense device onyour Google Cloud Platform (GCP) account toprotect your Google Cloud
workloads. Thesecurity policy forthisdevice willbemanaged onyour cloud-delivered Firewall Management
Center .
Youmust firsthave aGCP account, aGCP project created, andseveral networks established foreffective
communication between cloud-delivered Firewall Management Center andGCP.Once youhave established
theGCP settings, onboard athreat defense device tobedeployed totheGCP.
Usethefollowing procedures toonboard anddeploy athreat defense device toGCP.
Create VPC Networks forGCP
Thethreat defense virtual deployment requires four networks which youmust create prior todeploying the
threat defense virtual. Thenetworks areasfollows:
•Management VPC forthemanagement subnet.
•Diagnostic VPC orthediagnostic subnet.
•Inside VPC fortheinside subnet.
•Outside VPC fortheoutside subnet.
Additionally ,youmay have tosetuptheroute tables andGCP firewall rules toallow trafficflow through the
threat defense virtual. Theroute tables andfirewall rules areseparate from those thatareconfigured onthe
threat defense virtual itself. Name theGCP route tables andfirewall rules according toassociated network
andfunctionality
Procedure
Step 1 IntheGCP console, choose VPC netw orks ,then click Create VPC Netw ork.
Step 2 IntheName field, enter thedesired name.
Step 3 From theSubnet creation mode, click Custom .
Step 4 IntheName field under New subnet ,enter thedesired name.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
33Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Device toGoogle Cloud Platform

Step 5 From theRegion drop-down list,select theregion appropriate foryour deployment. Allfour networks must
beinthesame region.
Step 6 From theIPaddr essrange field, enter thefirstnetwork's subnet inCIDR format, such as10.10.0.0/24.
Step 7 Accept thedefaults forallother settings, then click Create.
Step 8 Repeat steps 1-7tocreate theremaining three VPC networks.
What todonext
Youmay have tocreate firewall rules toapply toyour newly created VPC networks. GototheGCP console
andnavigate toNetw orking >VPC netw ork>Firewall andthen click Create Firewall Rule .SeeGCP
documentation formore information.
Once your GCP VPC networks have been finalized, continue ontodeploy thethreat defense virtual.
Deploy aThreat Defense Device onGoogle Cloud Platform
Before you begin
When youperform thisprocedure, Cisco Defense Orchestrator creates thethreat defense virtual aspartofthe
onboarding wizard. Youcannot usethisprocedure with physical threat defense device oradevice thatis
already onboarded toCDO .
Thefollowing prerequisites must bemetprior toonboarding athreat defense thatiscurrently associated with
aGoogle Cloud Platform (GCP) environment:
•Youmust have cloud-delivered Firewall Management Center enabled foryour tenant.
•Youmust have aGCP account andalready have aproject created. SeeGCP documentation formore
information.
•Management interfaces (2)—One used toconnect thethreat defense virtual tothemanagement center ,
second used fordiagnostics; cannot beused forthrough traffic.
Trafficinterfaces (2)—Used toconnect thethreat defense virtual toinside hosts andtothepublic
network. SeeCreate VPC Networks forGCP ,onpage 33formore information.
•Youmust enable allofthefollowing permissions intheGCP environment inorder tosuccessully
communicate with andonboard toCDO :
deploymentmanager .deployments.create
deploymentmanager .deployments.get
compute.networks.list
Procedure
Step 1 LogintoCDO .
Step 2 Inthenavigation pane, click Inventory andclick theblue plus button (+)toaddanew device.
Step 3 Select theFTD tile.
Step 4 Under Management Mode ,select FTD .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
34Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Device onGoogle Cloud Platform

Step 5 Select UseGCP VPC astheonboarding method.
Step 6 IFyouhave notauthenticated your GCP environment with CDO before thispoint, copy thebash command
thatCDO generates andrunitonyour bash environment orontheGoogle Cloud Shell toauthenticate your
GCP account andallow communication between theapplications. IFyouhave already authenticated your
GCP account prior ,ignore theaccount integration steps andclick Next .
Step 7 Usethedrop-down menu toselect theGCP project youwant toassociate with thedevice youaregoing to
onboard. Ifthere arenoprojects immeidately available, click +Link New Project .Ifyouclick +Link New
Project ,follow these steps:
a)Enter theGCP project IDwhen prompted. Locate thisvalue intheGCP UI.Tolocate theproject ID,see
GCP documentation .
b)Upload Credentials File. Click Browseandnavigate towhere thethe.JSON filegenerated from the
script inStep 1oftheonboarding wizard islocally stored. Select itandclick Save.
Step 8 Click Next .
Step 9 Usethedrop-down menus toselect thefollowing paramters andclick Next :
•Inside VPC
•Inside Sub Netw ork
•Outside VPC
•Outside Sub Netw ork
•Management VPC
•Management Sub Netw ork
•Diagnostic Netw ork
•Diagnostic Sub Netw ork
Step 10 Enter aname forthethreat defense device intheDevice Name field andclick Next .
Step 11 InthePolicy Assignment step, usethedrop-down menu toselect anaccess control policy todeploy once the
device isonboarded. Ifyouhave nopolicies configured inthecloud-delivered Firewall Management Center
associated with your CDO tenant, select theDefault Access Contr olPolicy .
Step 12 Select theSubscription Licenses youwant applied tothedevice. Youmust have atleast theURL license
selected forvirtual threat defense devices.
Step 13 Click Complete Onboarding .
What todonext
Navigate totheInventory page toview theprogress ofthedevice registration there. Once thedevice is
synchronized, westrongly recommend cross-launching tocloud-delivered Firewall Management Center and
customize your access control policy anddevice status.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
35Onboard Devices toCloud-delivered Firewall Management Center
Deploy aThreat Defense Device onGoogle Cloud Platform

Onboard aSecure Firewall Threat Defense Cluster
Ifyoumust delete acluster ,delete thecluster from theCDO Inventory page. SeeDelete Devices from
Cloud-delivered Firewall Management Center ,onpage 37formore information.Note
Thefollowing table provides information about device models thatsupport cluster onboarding andcreation
onthecloud-delivered Firewall Management Center :
Support cluster creation from
cloud-delivered Firewall
Management Center ?Minimum Secure Firewall
Threat Defense Version for
Cluster ManagementSecure Firewall Threat Defense Platforms
Yes 7.2.1 VMware, KVM
No 7.2.1 AWS, GCP
No 7.3 Azure
Yes 7.2.1 Secure Firewall 3100
No 7.0.6 Firepower 4100
Yes 7.4 Secure Firewall 4200
No 7.0.6 Firepower 9300
Before you begin
Read through thefollowing limitations:
•Firepower 4100 andFirepower 9300 devices must beclustered through thedevice's chassis manager .
•Secure Firewall 3100 devices, Secure Firewall 4200 devices, KVM, andVMware environments must
beclustered through theSecure Firewall Management Center UI.
•Azure, AWS, andGCP environment clusters must becreated through their own environment and
onboarded toSecure Firewall Management Center .
Procedure
Step 1 LogintoCDO .
Step 2 Intheleftpane, click Inventory .
Step 3 Click theFTD tile.
Step 4 Under Management Mode ,ensure youselect FTD .Byselecting FTD under Management Mode ,youwill
notbeable tomanage thedevice using theprevious management platform. Allexisting policy configurations
except forinterface configurations willbereset. Youmust re-configure policies after youonboard thedevice.
Step 5 Select UseCLI Registration Key.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
36Onboard Devices toCloud-delivered Firewall Management Center
Onboard aSecure Firewall Threat Defense Cluster

Step 6 Enter thedevice name intheDevice Name field andclick Next .
Step 7 InthePolicy Assignment step, usethedrop-down menu toselect anaccess control policy todeploy once
thedevice isonboarded. Ifyouhave nopolicies configured, select theDefault Access Contr olPolicy .
Step 8 Specify whether thedevice youareonboarding isaphysical orvirtual device. Ifyouareonboarding avirtual
device, youmust select thedevice's performance tierfrom thedrop-down menu.
Step 9 Select thesubscription licenses youwant toapply tothedevice. Click Next .
Step 10 CDO generates acommand with theregistration key.Paste theentire registration keyasisintothedevice's
CLI.
Step 11 (Optional) Add labels toyour device tohelp sortandfilter theInventory page. Enter alabel andselect the
blue plus button. Labels areapplied tothedevice after it'sonboarded toCDO .
What todonext
Once thedevice issynchronized, select thedevice youjustonboarded from theInventory page andselect
anyoftheoptions listed under theDevice Management pane located totheright. Westrongly recommend
thefollowing actions:
•Ifyoudidnotalready ,create acustom access control policy tocustomize thesecurity foryour environment.
SeeAccess Control Overview inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall
Mana gement Center inCisco Defense Orchestr ator formore information.
•Enable Cisco Security Analytics andLogging (SAL) toview events intheCDO dashboard orregister
thedevice toanSecure Firewall Management Center forsecurity analytics. SeeCisco Security Analytics
andLogging inMana ging Firewall ThreatDefense with Cloud-Deliver edFirewall Mana gement Center
inCisco Defense Orchestr ator formore information.
Delete Devices from Cloud-delivered Firewall Management
Center
Though devices may beregistered tocloud-delivered Firewall Management Center ,CDO stillmanages device
enrollment. Youmust delete thedevice from theCDO dashboard toremove adevice from cloud-delivered
Firewall Management Center .
CDO does notsynchronize thedeletion ofdevices thatareassociated with anAWSVPC environment. You
must delete adevice direclty from theAWSVPC UI.SeeAWSdocumentation formore information.Note
Procedure
Step 1 LogintoCDO andclick Inventory .
Step 2 Locate thedevice youwant todelete byusing thefilters orsearch bar.Select itsothedevice rowishighlighted.
Ifyour device ispartofahigh availability pair,locate andselect theactive device.
Step 3 IntheDevice Actions pane located totheright, click Remo ve.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
37Onboard Devices toCloud-delivered Firewall Management Center
Delete Devices from Cloud-delivered Firewall Management Center

Step 4 When prompted, select OKtoconfirm theremoval oftheselected device. Click Cancel tokeep thedevice
onboarded.
About Device Interfaces
Management Interfaces
When yousetupyour device, youspecify theIPaddress thatyouwant toconnect to.Both management and
event trafficgotothisaddress atinitial registration.
Insome situations, thedevice might establish theinitial connection onadifferent management interface;
subsequent connections should usethemanagement interface with thespecified IPaddress.Note
Ifthedevice hasaseparate event-only interface, themanaged device sends subsequent event trafficissentto
theevent-only interface ifthenetwork allows. Inaddition, some managed-device models include anadditional
management interface thatyoucanconfigure forevent-only traffic.
Note thatifyouconfigure adata interface formanagement, youcannot useseparate management andevent
interfaces.Note
Iftheevent network goes down, then event trafficreverts totheregular management interfaces onthethe
managed device.
About Data Interfaces
Youcanuseeither thededicated management interface oraregular data interface forcommunication with
thedevice. CDO access onadatainterface isuseful ifyouwant tomanage theFTD remotely from theoutside
interface, oryoudonothave aseparate management network. CDO supports high availability ontheFTD
managed remotely from thedata interface.
FTD management access from adata interface hasthefollowing limitations:
•Youcanonly enable manager access ononephysical, data interface. Youcannot useasubinterface or
EtherChannel.
•Routed firewall mode only,using arouted interface.
•PPPoE isnotsupported. Ifyour ISPrequires PPPoE, youwillhave toputarouter with PPPoE support
between theFTD andtheWANmodem.
•Theinterface must beintheglobal VRF only.
•SSH isnotenabled bydefault fordata interfaces, soyouwillhave toenable SSH later using CDO .
Because themanagement interface gateway willbechanged tobethedata interfaces, youalsocannot
SSH tothemanagement interface from aremote network unless youaddastatic route forthemanagement
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
38Onboard Devices toCloud-delivered Firewall Management Center
About Device Interfaces

interface using theconfigurenetw orkstatic-r outes command. ForFTDv onAmazon WebServices, a
console portisnotavailable, soyoushould maintain your SSH access tothemanagement interface: add
astatic route forManagement before youcontinue with your configuration. Alternatively ,besure to
finish allCLIconfiguration (including theconfiguremanager addcommand) before youconfigure the
data interface.
Network Routes onDevice Management Interfaces
Management interfaces (including event-only interfaces) support only static routes toreach remote networks.
When yousetupyour managed device, thesetup process creates adefault route tothegateway IPaddress
thatyouspecify .Youcannot delete thisroute; youcanonly modify thegateway address.
Ifyouconfigure adatainterface formanagement instead ofusing thededicated Management interface, traffic
isrouted over thebackplane tousethedata routing table. Theinformation inthissection does notapply .Note
Atleast onestatic route isrecommended permanagement interface toaccess remote networks. Werecommend
placing each interface onaseparate network toavoid potential routing problems, including routing problems
from other devices tothedevice. Ifyoudonotexperience problems with interfaces onthesame network, then
besure toconfigure static routes correctly .Forexample, both management0 andmanagement1 areonthe
same network, buttheFTD management andevent interfaces areondifferent networks. Thegateway is
192.168.45.1. Ifyouwant management1 toconnect tothemanagement's event-only interface at10.6.6.1/24,
youcancreate astatic route for10.6.6.0/24 through management1 with thesame gateway of192.168.45.1.
Trafficto10.6.6.0/24 willhitthisroute before ithitsthedefault route, somanagement1 willbeused as
expected.
Log Into theCommand Line Interface ontheDevice
Youcanlogdirectly intothecommand lineinterface onthreat defense devices. Ifthisisyour firsttime logging
in,complete theinitial setup process using thedefault admin user; seeComplete theInitial Configuration of
aSecure Firewall Threat Defense Device Using theCLI,onpage 2690 .
Ifauser makes three consecutive failed attempts tologintotheCLIviaSSH, thesystem terminates theSSH
connection.Note
Before you begin
Create additional user accounts thatcanlogintotheCLIusing theconfigureuser addcommand.
Procedure
Step 1 Connect tothethreat defense CLI, either from theconsole portorusing SSH.
YoucanSSH tothemanagement interface ofthethreat defense device. Youcanalsoconnect totheaddress
onadata interface ifyouopen theinterface forSSH connections. SSH access todata interfaces isdisabled
bydefault. SeeSSH Access ,onpage 946toallow SSH connections tospecific data interfaces.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
39Onboard Devices toCloud-delivered Firewall Management Center
Network Routes onDevice Management Interfaces

Forphysical devices, youcandirectly connect totheconsole portonthedevice. Seethehardware guide for
your device formore information about theconsole cable. Usethefollowing serial settings:
•9600 baud
•8data bits
•Noparity
•1stop bit
TheCLIontheconsole portisFXOS (with theexception oftheISA3000, where itistheregular threat defense
CLI) .Usethethreat defense CLIforbasic configuration, monitoring, andnormal system troubleshooting.
SeetheFXOS documentation forinformation onFXOS commands.
Step 2 Loginwith theadmin username andpassword.
Example:
firepower login:admin
Password:
Lastlogin:ThuMay1614:01:03 UTC2019onttyS0
Successful loginattempts foruser'admin' :1
firepower#
Step 3 Ifyouused theconsole port, access thethreat defense CLI.
connect ftd
This stepdoes notapply totheISA3000. Note
Example:
firepower# connect ftd
>
Step 4 AttheCLIprompt (>),useanyofthecommands allowed byyour level ofcommand lineaccess.
Toreturn toFXOS ontheconsole port, enter exit.
Step 5 (Optional) Ifyouused SSH, youcanconnect toFXOS.
connect fxos
Toreturn tothethreat defense CLI, enter exit.
Step 6 (Optional) Access thediagnostic CLI:
system support diagnostic-cli
UsethisCLIforadvanced troubleshooting. This CLIincludes additional showandother commands.
This CLIhastwosub-modes: user EXEC andprivileged EXEC mode. More commands areavailable in
privileged EXEC mode. Toenter privileged EXEC mode, enter theenable command; press enter without
entering apassword when prompted.
Example:
>systemsupport diagnostic-cli
firepower> enable
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
40Onboard Devices toCloud-delivered Firewall Management Center
Log Into theCommand Line Interface ontheDevice

Password:
firepower#
Toreturn totheregular CLI, type Ctrl-a ,d.
Troubleshooting
Usethefollowing scenarios totroubleshoot anyonboarding issues.
Troubleshoot Cloud-delivered Firewall Management Center Connectivity with
TCP
Usethefollowing procedure totroubleshoot connectivity between thecloud-delivered Firewall Management
Center andathreat defense device with TCP port8305.
Procedure
Step 1 LogintoCDO .
Step 2 Navigate toTools&Services intheleftpanel andselect Firewall Management Center toopen theServices
page. Choose Cloud-Deli veredFMC andlocate thecloud-delivered Firewall Management Center 'sFQDN
inthetoprighthand corner .
Step 3 Make sure thethreat defense device's state inCDO iscurrently Onboarding .Cloud-delivered Firewall
Management Center willnotrespond ifthedevice isnotinanonboarding state. Ifonboarding hasfailed, click
Retry Onboarding .
Step 4 Logintothethreat defense device with SSH.
Step 5 Enter intoExpert mode with thefollowing command:
>expert
admin@devicename:~$
Step 6 Execute aTCP handshake:
admin@devicename: ~$nc-vxxxxxx.cdo.cisco.com 8305
Connection toxxxxxx.cdo.cisco.com 8305port[tcp/*] succeeded!
^C(CTRL-C toexitnetcat)
admin@devicename:~$.
What todonext
Ifthere isstillnoresponse from thecloud-delivered Firewall Management Center ,then there isachance that
outbound portTCP 8305 may beblocked upstream from your threat defense device andthatnetwork path
willneed tobeassured before your threat defense willbeable toconnect tocloud-delivered Firewall
Management Center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
41Onboard Devices toCloud-delivered Firewall Management Center
Troubleshooting

Troubleshoot Threat Defense Device Connectivity
Testconnectivity totheInternet from themanagement-plane ofthethreat defense device:
Procedure
Purpose Command orAction
Logintothethreat defense device with SSH. Step 1
Ping oneorboth ofthefollowing: Step 2 •system 208.67.222.222
•system cisco.com
What todonext
Ifeither ofthese tests fail,there islikely anL1-L3 issue andyouwillneed tocheck your management
networking configuration (shownetwork )and/or aDNS issue.
Troubleshoot Device Connectivity Loss After Cloud-delivered Firewall
Management Center Update
Acloud-delivered Firewall Management Center isassigned adynamic IPaddress when itisadded toaCDO
tenant. When themanagement center isupdated, themanagement center receives anew dynamic IPaddress.
Ifyouhave afirewall inspecting theoutbound trafficfrom your threat defense device tothecloud-delivered
Firewall Management Center ,your firewall rules must allow thethreat defense traffictoflow totheFQDN
andportofthemanagement center rather than itsIPaddress, orthemanagement center willnotbeable to
manage your threat defense device.
Forexample, ifyour network trafficruleallowing management trafficfrom your threat defense device tothe
cloud-delivered Firewall Management Center looks likethis:
allowalltraffic <my-threat-defense-ip-src> to200.165.200.225
where 200.165.200.225 isthemanagement address ofthecloud-delivered Firewall Management Center ,
change theoneallow ruletothese twoallow rules asboth ports 443and8305 need tobeopen:
allowalltraffic <my-threat-defense-ip-src >to<my-cdfFMC-FQDN>:443
allowalltraffic <my-threat-defense-ip-src >to<my-cdfFMC-FQDN>:8305
See“Network Requirements” inPrerequisites toOnboard aDevice toCloud-delivered Firewall Management
Center formore portinformation.
Where doIfind thedomain name ofmycloud-delivered Firewall Management Center ?
Where doIfindthedomain name ofmycloud-delivered Firewall Management Center?
1.LogintoCDO .
2.From themenu bar,navigate Tools &Services >Firewall Management Center .
3.Select theCloud-delivered Firewall Management Center intheFMC table.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
42Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Threat Defense Device Connectivity

4.Inthetop-right corner ofthescreen, youwillseetheHostname ofthemanagement center .This isthe
FQDN.
Figure 1:Cloud-delivered FMC FQDN
Troubleshoot Onboarding aDevice totheCloud-delivered Firewall
Management Center Using theCLIRegistration Key
Error: Device Remains inPending Setup State After Onboarding
When adevice fails toregister ,thedevice's connectivity status isdisplayed asPending Setup .Inthepanel
located totheright, CDO displays aRegistration Failed message aswell asaRetry Onboarding button to
immediately allow youtoreattempt onboarding thedevice.
Ifyoufailtoexecute theconfiguration manager command inthedevice CLIwithin 3mins after onboarding
ittoCDO ,thedevice's registration attempt expires andresults inaregistrationg failure. Usethefollowing
procedure toresolve theissue:
Procedure
Step 1 LogintoCDO andnavigate totheInventory page. Locate thedevice thatfailed toregister .
Step 2 Inthepanel located totheright, locate theRegistration Failed window .Beside thedevice's CLIregistration
key,click Copy .This actions copies theCLIkeytoalocal clipboard.
Step 3 Open anSSH connection tothedevice andloginasadmin .
Step 4 Paste theCLIregistration keyintothedevice's CLIinterface. IntheCLI, enter Ytocomplete theregistration.
Ifyour device waspreviously managed bydevice manager ,enter Yestoconfirm thesubmission.
Troubleshoot Onboarding aDevice toCloud-delivered Firewall Management
Center Using theSerial Number
Device isOffline orUnreachable
Ifthedevice isunreachable during theonboarding proess, oratanypoint post-onboarding, CDO displays an
Unreachable connectivity status. Thedevice willnotbeable tofully onboard toCDO until thedevice isable
toconnect. Thefollowing scenarios might bethecause:
•Thedevice iscabled incorrectly .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
43Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Onboarding aDevice totheCloud-delivered Firewall Management Center Using theCLIRegistration Key

•Yournetwork may require astatic IPaddress forthedevice.
•Yournetwork uses custom DNS, orthere isexternal DNS blocking thenetwork.
•Ifyour device isassociated with theEuropean region (https://defenseorchestrator .eu/),youmay need to
enable PPPoE authentication.For other domains, review thedomain requirements .
•Thedevice may beblocked byafirewall, orisincorrectly blocking aportforconnectivity .Review the
device Network Requirements ,onpage 25andconfirm thecorrect outgoing ports areenabled.
Error: Serial Number Already Claimed
The Device was Purchased From anExternal Vendor
Ifthedevice waspurchased from anexternal vendor andfails toonboard with aSerial Number Already
Claimed error ,it'spossible thedevice isstillassociated tothevendor's tenant. Usethefollowing steps to
claim thedevice anditsserial number:
1.Delete thedevice from your CDO tenant.
2.Install theFXOS image onthedevice. Formore information, seethe"Reimage Procedures" chapter of
theCisco FXOS Troubleshooting Guide fortheFirepower 1000/21000 andSecure Firewall 3100 Firepower
Threat Defense guide.
3.Connect alaptop tothedevice's console port.
4.Connect totheFXOS CLIandloginasadmin .
5.IntheFXOS CLI, connect tolocal-mgmt with thefirepower #connect local-mgmt command.
6.Execute thefirepower(local-mgmt) #cloudderegister command toderegister thedevice from the
cloud tenancy .
7.Once thedevice issuccessfully unregistered, theCLIinterface returns asuccess message. Anexample
ofthemessage:
Example: firepower(local-mgmt) #cloudderegister Release ImageDetected RESULT=success
MESSAGE=SUCCESS 10,X-Flow-Id: 2b3c9e8b-76c3-4764-91e4-cfd9828e73f9
Ifthedevice wasnever registered toanother CDO tenant, themessage above statesRESULT=success
MESSAGE=DEVICE_NOT_FOUND .Note
8.Onboard thedevice toyour CDO tenant with itsserial number .SeeOnboard aDevice with Zero-T ouch
Provisioning ,onpage 27formore information.
The Device isClaimed ByaCDO Tenant inAnother Region
Thedevice may have been previously managed byanother CDO instance inadifferent region andisstill
registered tothattenant.
Ifyoudohave access tothetenant thedevice iscurrently registered to,usethefollowing procedure:
1.Delete thedevice from theincorrect CDO tenant.
2.Logintothedevice's device manager UI.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
44Onboard Devices toCloud-delivered Firewall Management Center
Error: Serial Number Already Claimed

3.Navigate toSystem Settings >Cloud Services .
4.Click Cloud Services andselect Unregister Cloud Services from thedrop-down list.
5.Confirm theaction andclick Unregister .This action generates awarning toindicate thatthedevice has
been removed from CDO .This isexpected behavior .
6.LogintoCDO tenant inthecorrect region andonboard thedevice. SeeOnboard aDevice with Zero-T ouch
Provisioning ,onpage 27formore information.
7.Navigate toSystem Settings >Cloud Services .
8.Click Cloud Services andselect Unregister Cloud Services from thedrop-down list.
9.Select theAuto-enr ollwith Tenancy fromCisco Defense Orchestrator andclick Register .Thedevice
maps tothenew tenant thatbelongs tothenew region andCDO onboards thedevice.
Ifyoudonothave access tothetenant, usetheprocedure below:
1.Connect totheFXOS CLIfrom theconsole portandloginasadmin .Forinformation onhow tologinto
theFXOS CLI, seeAccessing theFXOS CLI.
2.IntheFXOS CLI, connect tolocal-mgmt with thefirepower #connect local-mgmt command.
3.Execute thefirepower(local-mgmt) #cloudderegister command toderegister thedevice from the
cloud tenancy .
4.Once thedevice issuccessfully unregistered, theCLIinterface returns asuccess message. Anexample
ofthemessage:
Example: firepower(local-mgmt) #cloudderegister Release ImageDetected RESULT=success
MESSAGE=SUCCESS 10,X-Flow-Id: 2b3c9e8b-76c3-4764-91e4-cfd9828e73f9
Ifthedevice wasnever registered toanother CDO tenant, themessage above statesRESULT=success
MESSAGE=DEVICE_NOT_FOUND .Note
5.Inyour CDO tenant inthecorrect domain, onboard thedevice. SeeOnboard aDevice with Zero-T ouch
Provisioning ,onpage 27formore information.
6.Inthedevice's device manager UI,navigate toSystem Settings >Cloud Services .
7.Select theAuto-enr ollwith Tenancy fromCisco Defense Orchestrator andclick Register .Thedevice
maps tothenew tenant thatbelongs tothenew region andCDO onboards thedevice.
Error: Claim Error
Ifyouenter thewrong serial number when onboarding adevice, CDO generates aClaim Errorstatus.
Confirm thatthedevice isclaimed inthecorrect region within CDO . Note
Resolve thisissue with theprovedure below:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
45Onboard Devices toCloud-delivered Firewall Management Center
Error: Claim Error

Procedure
Step 1 LogintoCDO andnavigate totheInventory page. Locate thedevice with theerror .
Step 2 Select thedevice soitishighlighted andRemo vethedevice from CDO .
Step 3 Confirm thefollowing:
•Thedevice isonline andcanreach theinternet.
•Thedevice hasnotalready been onboarded toyour CDO instance orclaimed byaCDO tenant inanother
region.
Step 4 Locate thedevice's serial number .Youcanuseoneofthefollowing methods:
•Forthe1000, 2100 and3100 series model, locate theserial number onthephysical device.
•Open anSSH connection tothedevice andissue theshowserial-number command.
Step 5 InCDO ,onboard thedevice with thecorrect serial number .SeeOnboard aDevice with Zero-T ouch
Provisioning ,onpage 27formore information.
Error: Failed toClaim
IfyouseeanError:Failed toClaim connectivity status orerror message after attempting toonboard a
device, thefollowing might bethecause:
•TheSecurity Services Exchange platform may have temporary issues thatresult innoconnectivity .
•TheCDO server may bedown.
Follow theprocedure below toresolve thisissue:
Procedure
Step 1 LogintoCDO andnavigate totheInventory page. Locate thedevice thatfailed toregister .
Step 2 Select thedevice soitishighlighted andRemo vethedevice from your CDO tenant.
Step 3 Waitatleast 10minutes before attempting toonboard thedevice back toyour CDO tenant. SeeOnboard a
Device with Zero-T ouch Provisioning ,onpage 27formore information.
What todonext
Ifyouarestillunable toclaim thedevice, review thedevice's workflow toseeisthere isanerror message. If
there is,Export theWorkflow andopen asupport case tofurther troubleshoot theissue.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
46Onboard Devices toCloud-delivered Firewall Management Center
Error: Failed toClaim

Error: Provisional Error
Device Password Has Not Been Changed
Ifyoudidnotchange thedefault password ofthedevice when configuring thedevice forremote management
andselected theNo,thisdevicehasbeen logged intoandconfiguredforamanager option when onboarding
thedevice toCDO ,thedevice willgenerate anUnPr ovisioned connectivity status intheInventory page.
Usethefollowing procedure toresolve thisissue:
1.LogintoCDO andnavigate totheInventory page.
2.Locate andselect thedevice with theUnPr ovisioned connectivity status soitishighlighted.
3.Inthepane located totheright, locate theChange Passw ordwindow .
4.Click Change Passw ordandenter anewpassword foryour device. This overwrites thedefault password.
Itmay take afewminutes forthedevice toonboard andfully synchronize toCDO .
Device Password Has Already Been Changed
Ifyoudidchange thedefault password ofthedevice when configuring thedevice forremote management
andselected theIsthisanew device that hasneverbeen logged into orconfiguredbefore?option when
onboarding thedevice toCDO ,CDO generates anUnPr ovisioned connectivity status intheInvenotry page.
Usethefollowing procedure toresolve thisissue:
1.LogintoCDO andnavigate totheInventory page.
2.Locate andselect thedevice with theUnPr ovisioned connectivity status soitishighlighted.
3.Inthepane located totheright, locate theConf irmandProceed window .
4.Click Conf irmandProceed .This action ignores thepassword thatwasprovided intheonboarding wizard
andreinstates thedefault password forthedevice. CDO then continues toonboard thedevice.
Other Provisional Error Scenarios
Regardless ofthedefault password configuration ofthedevice, itisstillpossible foradevice toresult inan
UnPr ovisioned conectivity status during theonboarding process. Ifyouconfirm thepassword selection in
theonboarding wizard isaccurate forthestate ofthedevice, consider thefollowing options toresolve the
issue:
•Select thedevice soitishighlighted. Inthewindow located ontheright pane ofthescreen, click Retry
toforce CDO tore-onboard thedevice with existing provisional parameters.
•Delete thedevice from theInventory page andattempt tore-onboard thedevice.
•Inthedevice's device manager UI,navigate toSystem Settings >Cloud Services .Select theAuto-enr oll
with Tenancy fromCisco Defense Orchestrator andclick Register .
Ifyouarestillunable toclaim thedevice, review thedevice's workflow toseeisthere isanerror message. If
there is,Export theWorkflow andopen asupport case tofurther troubleshoot theissue.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
47Onboard Devices toCloud-delivered Firewall Management Center
Error: Provisional Error

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
48Onboard Devices toCloud-delivered Firewall Management Center
Error: Provisional Error

CHAPTER 4
Migrate On-Prem Management Center Managed
Secure Firewall Threat Defense to
Cloud-delivered Firewall Management Center
•About Migrating Threat Defense toCloud-delivered Firewall Management Center ,onpage 49
•Supported Secure Firewall Management Center andSecure Firewall Threat Defense Software for
Migration ,onpage 50
•Licensing ,onpage 51
•Supported Features ,onpage 51
•Unsupported Features ,onpage 54
•Migration Guidelines andLimitations forVPN Configuration ,onpage 55
•Managing Threat Defense Events andAnalytics ,onpage 56
•Before YouBegin Migration ,onpage 57
•Migrate Threat Defense toCloud-delivered Firewall Management Center ,onpage 59
•ViewaThreat Defense Migration Job,onpage 61
•Enable Notification Settings ,onpage 67
•Troubleshoot Threat Defense Migration toCloud ,onpage 67
About Migrating Threat Defense toCloud-delivered Firewall
Management Center
Cisco Defense Orchestrator admin users canmigrate threat defense devices tothecloud-delivered Firewall
Management Center from on-prem management center srunning Version 7.2orlater.Inaddition, youcan
migrate devices tothecloud-delivered Firewall Management Center from anon-prem management center
1000/2500/4500, wesupport atempor aryupgrade from Version 7.0toVersion 7.4.
Before initiating themigration process, itisimportant toupgrade theon-prem management center models to
aCDO -supported version andonboard ittoCDO .Only after thisstep, youcanproceed with migrating the
devices thatareassociated with theon-prem management center .
Youhave a14-day evaluation period toreview andassess themigration changes thataremade tothethreat
defense devices before CDO automatically commits them. During thisevaluation period, ifyouarenotsatisfied
with thechanges, youcaneither undo thechanges andcontinue managing thedevice with theon-prem
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
49

management center orcommit themigration changes. It'simportant tonote thatafter theevaluation period
expires, CDO willautomatically commit thechanges, anditwillnolonger bepossible toundo them.
After migrating thedevices, thecloud-delivered Firewall Management Center onboards thethreat defense
devices andimports allshared policies andassociated objects, device-specific policies, anddevice configuration
from theon-prem management center tothecloud-delivered Firewall Management Center .Inaddition, the
devices canbefound inCDO 'sInventory page.
Cloud-delivered Firewall Management Center handles allduplicate policy andobject names thatareidentified
during theon-prem management center migration process. This behavior isexplained indetail later inthis
document.Note
User Roles
Theuser roles oftheon-prem management center arenolonger applicable inCDO after migration. Your
authorization toperform tasks onthemigrated device isbased onyour user roleinCDO .SeetheUsers topic
tounderstand theon-prem management center andcloud-delivered Firewall Management Center user role
mapping.
Pause Migration toReview Imported Shared Policies
CDO provides anoption thatallows themigration tobepaused once theshared access policies, including
Access Control andNATpolicies, have been prepared within thecloud-delivered Firewall Management
Center .This strategic pause prevents thestart ofthe14-day evaluation period, ensuring thedevice's current
state orthedevice's manager isaffected during thereview phase. This window provides anopportunity fora
thorough evaluation ofthestaged configuration.
Upon asatisfactory review oftheconfiguration within theplanned migration window ,theprocess canbe
resumed. Resuming migration willimport thedevice-specific settings, such asrouting andinterfaces, andwill
register thethreat defense swith thecloud-delivered Firewall Management Center .Note thatthisaction starts
the14-day evaluation period. Post-migration, itismandatory toexecute deployment from thecloud-delivered
Firewall Management Center tofinalize themigration successfully .
Supported Secure Firewall Management Center and Secure
Firewall Threat Defense Software forMigration
This section describes theminimum software requirements formigrating Secure Firewall Threat Defense
devices from thefollowing on-prem Secure Firewall Management Center versions:
•Minimum on-prem management center :7.2
•Minimum threat defense :7.0.3 or7.2(notsupported forVersion 7.1)
On-Prem Management Center 1000/2500/4500 Model-Managed Threat Defense
Youcanmigrate devices tothecloud-delivered Firewall Management Center from anon-prem management
center 1000/2500/4500 model. Wesupport atempor aryupgrade from Version 7.0toVersion 7.4.Youcan
download theupgrade package here.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
50Onboard Devices toCloud-delivered Firewall Management Center
Supported Secure Firewall Management Center and Secure Firewall Threat Defense Software forMigration

Theon-prem management center 1000/2500/4500, youwould have migrated devices from Version 7.4,which
isunsupported forgeneral operations butserves asaninterim solution until themigration iscomplete. To
return theon-prem management center toasupported version youmust remove there-migrated devices,
reimage back toVersion 7.0.x, restore from backup, andre-register thedevices.Note
Unzip (butdonotuntar) theupgrade package before uploading ittotheon-prem management center .To
upgrade toVersion 7.4,seeCisco Secure Firewall Management Center Upgrade Guide, Version 6.0-7.0 .
Werecommend upgrading thedevices toVersion 7.0.x before upgrading theon-prem management center to
Version 7.4.
Anupgrade isrequired because Version 7.0on-prem management center sdonotsupport device migration
tothecloud. Version 7.4isonly supported during thedevice migration andevaluation process. These on-prem
management center swillnotrunanyintermediate versions. Only standalone andhigh availability threat
defense devices running Version 7.0.3+ (7.0.5 recommended) areeligible formigration.Important
Licensing
•When thethreat defense ismigrated tothecloud, allfeature licenses associated with thedevice are
transferred toCDO andreleased from themanagement center totheSmart License pool. Thedevice
reclaims thedevice-specific licenses during itsregistration with CDO .Youneed notapply license on
thedevice again.
•Thedevice-specific licenses arenotrequired ifyouwant tokeep devices inthemanagement center for
analytics.
•Ensure youhave registered thecloud-delivered Firewall Management Center with asmart license.
Supported Features
Handling Shared Policies and Objects
When themigration process begins, theshared policies andassociated objects thatareassociated with the
threat defense devices areimported firstandthen followed bythedevice configuration.
Thefollowing shared policies areimported toCDO after changing themanager onthreat defense devices:
•Access control
•IPS
•SSL
•Prefilter
•NAT
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
51Onboard Devices toCloud-delivered Firewall Management Center
Licensing

•QoS
•Identity
•Platform settings
•Flex config
•Network analysis
•DNS
•Malware &file
•Health
•Remote Access VPN
•Site-to-Site VPN
Ifapolicy orobject inCDO hasthesame name asthepolicy orobject thatisimported from theon-prem
management center ,CDO takes thefollowing actions after changing themanagement successfully .
Action Condition Policies, Objects
Thecloud-delivered Firewall
Management Center policy isused
instead oftheimported policy from
theon-prem management center .Name ofthecloud-delivered
Firewall Management Center policy
matches theon-prem management
center policy .Access control, SSL, IPS, Prefilter ,
NAT,QoS, Identity ,Platform
settings, Network analysis, DNS,
Malware &Filepolicies.
Theexisting cloud-delivered
Firewall Management Center
default group policy DfltGr pPolicy
isused instead.Thedefault group
policy DfltGr pPolicy from the
on-prem management center is
ignored.RAVPN Default group policy
DfltGr pPolicy
Theexisting cloud-delivered
Firewall Management Center
network andportobjects with the
same name andcontent areused
instead ofimported objects from
theon-prem management center .
Iftheobject hasthesame name but
different content, anobject override
iscreated.Name andcontent ofnetwork and
portobjects inthecloud-delivered
Firewall Management Center match
theones intheon-prem
management center .Network, Port objects
Theexisting cloud-delivered
Firewall Management Center object
isused instead oftheimported
object from theon-prem
management center .Allother objects
Any Syslog alert object thatisassociated with theaccess control policy isimported intoCDO .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
52Onboard Devices toCloud-delivered Firewall Management Center
Supported Features

Migration Support forThreat Defense inaHigh-A vailability Pair
Youcanmigrate adevice inahigh-availability pairtothecloud-delivered Firewall Management Center .The
device management ofboth active andstandby devices shifts tothecloud-delivered Firewall Management
Center .
Westrongly recommend committing themanager changes before performing anyadvanced operations, such
ascreating high-availability configurations orbreaking high-availability configurations from themanagement
center onthedevices thatarebeing migrated.
Performing such tasks during theevaluation period isnotsupported andmay result inmigration commit
failure.Important
Migration Support forManagement Center inaHigh Availability Pair
Youcanmigrate thethreat defense devices inahigh availability from on-prem management center tothe
cloud.
Theon-prem management center canbeonboarded using SecureX orcredentials with theSDC method.
Always onboard theactive management center andnotthestandby .
Ifyouhave already onboarded astandalone management center andlater configured itasastandby ,delete
thestandby management center andonboard theactive one.Note
Points toRemember :
•Secur eXOnboarding Method
•High availability break isnotsupported during the14days evaluation period. Youcanbreak high
availability after committing thechanges manually orautomatically after theevaluation period.
•High availability switchover issupported during the14days evaluation period.
•Credentials Onboarding Method Using SDC
•High availability break orhigh availability switchover isnotsupported during the14days evaluation
period. Youcanperform these operations after committing thechanges manually orautomatically
after theevaluation period.
•After aswitchover ,onboard thenew active unit, which waspreviously instandby mode, andthen
start amigration jobonthedevices.
Migration Support forThreat Defense Cluster
Migration ofthethreat defense cluster from theon-prem management center tothecloud-delivered Firewall
Management Center issupported aslong astheminimum supported versions ofthethreat defense onthe
following platforms aremet.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
53Onboard Devices toCloud-delivered Firewall Management Center
Supported Features

Minimum On-Prem Management
Center Version forCluster
MigrationMinimum Secure Firewall Threat
Defense Version forCluster
MigrationSecure Firewall Threat Defense
Platforms
7.4.1 7.2.1 VMware, KVM
7.4.1 7.2.1 AWS, GCP
7.4.1 7.3 Azure
7.4.1 7.2.1 Secure Firewall 3100
7.4.1 7.0.6 Firepower 4100
7.4.1 7.4 Secure Firewall 4200
7.4.1 7.0.6 Firepower 9300
Before migrating thethreat defense cluster ,itisimportant tokeep inmind thefollowing points:
•Donotattempt tomigrate thethreat defense cluster during anyclustering-related operations initiated
from theon-prem management center .
•After thecluster migration, itisrecommended tocommit themanager changes manually before carrying
outanyadvanced operations, such asadding anode, breaking anode, orbreaking acluster from the
on-prem management center ontheclusters. This isbecause performing such tasks during theevaluation
period isnotsupported andmay result inmigration commit failure.Important
Unsupported Features
Migration ofathreat defense device registered only foranalytics-only with themanagement center feature is
notcurrently supported.
Thefollowing configuration arenotimported from themanagement center toCDO aspartofmigration:
•Custom Widgets, Application Detectors, Correlation, SNMP andEmail Alerts, Scanners, Groups, Dynamic
Access Policy ,Custom AMP Configuration, Users, Domains, Scheduled Deployment Tasks, ISE
configuration, Scheduled GeoDB Updates, Threat Intelligence Director configuration, Dynamic Analysis
Connections.
•ISEinternal certificate object isnotimported aspartofthemigration. Youmust export anew system
certificate oracertificate anditsassociated private keyfrom ISEandimport itintoCDO .
Secure Firewall Recommended Rules
Migrating threat defense tothecloud mirates therulerecommendations thatarealready associated with any
oftheintrusion policies. However ,thecloud-delivered Firewall Management Center does notallow the
generation ofnewrulerecommendations orauto-update thealready migrated recommendations postmigration.
This isbecause thecloud-delivered Firewall Management Center does notsupport rulerecommendations.
SeeAuto Cisco Recommended Rules .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
54Onboard Devices toCloud-delivered Firewall Management Center
Unsupported Features

Custom Network Analysis
Ifthedevice isassociated with acustom network analysis policy ,youmust remove allreferences tothispolicy
from theonpremise before migration.
1.Logontotheonpremise management center .
2.Choose Policies >Access Contr ol.
3.Click theediticon ontheaccess control policy youwant todisassociate thecustom NAP andthen click
theAdvanced tab.
4.IntheNetw orkAnalysis andIntrusion Policies area, click theediticon.
5.IntheDefault Netw orkAnalysis Policy list,select asystem-provided policy .
6.Click OK.
7.Click Savetosave thechanges andthen click Deploy todownload thechanges tothedevice.
After migration, youcanmanually create theNetwork Analysis Policy inCDO .
Migration Guidelines and Limitations forVPN Configuration
Keep thefollowing inmind when youmigrate adevice with VPN configuration.
Migration Support forRemote Access VPN Policy
Aspartofthemigration process, CDO imports allthesettings ofaremote access VPN policy except forthe
following:
•Object overrides.
Ifoverrides areused intheaddress pool object, youmust manually addthem totheimported object using
CDO ,after migration.
•Local users.
Iftheauthentication server isconfigured toalocal database foruser authentication, theassociated local
realm object isimported intoCDO .However ,youmust manually addthelocal users totheimported
local realm object using CDO ,after migration. SeeCreate aRealm andRealm Directory .
•Remote Access VPN load-balancing configuration.
•Remote Access VPN certificate enrollment with domain configuration.
Perform thefollowing after migration toenroll thecertificate with domain configuration:
1.InCDO ,choose Inventory >FTD .
2.Select themigrated FTD andintheDevice Management ontheright, click Device Overview .
3.Choose Devices >Certif icates .
Perform oneofthefollowing tasks:
•Ifthecertificates areimported inanErrorstate, click theRefr eshcertif icate status icon to
synchronize thecertificate status with thedevice. Thecertificate status turns green.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
55Onboard Devices toCloud-delivered Firewall Management Center
Migration Guidelines and Limitations forVPN Configuration

•Ifthecertificates arenotimported, youmust manually addthecertificates defined intheRemote
Access VPN policy thatisconfigured inthemanagement center .
Migration Support forSite-to-Site VPN Policy
After you've selected athreat defense device with asite-to-site VPN configuration, CDO willautomatically
select allitspeers from different topologies. This isbecause devices inthesite-to-site VPN topology must be
migrated together toensure amigration tosucceed.
Although themigration wizard doesn't listtheextranet devices thatareassociated with them, they willstill
beincluded automatically during themigration process.Note
CDO imports allthesettings ofasite-to-site VPN policy except forthefollowing:
•Ifobject overrides areused inthenetwork object, youmust manually addthem totheimported object
using CDO ,after migration.
•Iftheauthentication type isconfigured as"Preshared Automatic Key" intheon-prem management center ,
CDO defines anew pre-shared keyfortheVPN postmigration deployment. Theupdated pre-shared key
does notbreak existing tunnels, andthenew tunnels start using thenew pre-shared key.
•When thedevices aremoved toCDO ,andthechanges have yettobecommitted, thesite-to-site VPN
policy thatisassociated with those devices canbeedited using theon-prem management center ,however ,
itdoesn't update thedevice configuration inCDO .
•Ifdevices areconfigured forSASE tunnels onCisco Umbrella, refrain from migrating such devices.
Managing Threat Defense Events and Analytics
Theevents andanalytics management canberetained intheon-prem management center ortransferred to
CDO ,where thedevices must beconfigured tosend events toCDO .While initiating themigration process,
youareallowed tochoose themanager towhich thedevice events must besentforanalytics.
Ifyouaremigrating devices from on-prem management center 1000/2500/4500, itisnotpossible tousethe
on-prem management center formanaging events duetolimited availability .Therefore, youmust useSecurity
Analytics andLogging (OnPrem) orSecurity Analytics andLogging (SAAS) fordevices tosend events for
analytics. SeeCisco Security Analytics andLogging .Attention
Ifyouselect theon-prem management center foranalytics, CDO becomes themanager forselected devices
butretains acopy ofthose devices ontheon-prem management center inanalytics-only mode. Thedevices
continue tosend events totheon-prem management center ,andCDO manages theconfiguration changes.
Ifyouselect CDO foranalytics, CDO becomes themanager fortheselected devices anddeletes these devices
from theon-prem management center .CDO manages both configuration changes andevents andanalytics
management. Youmust configure threat defense devices tosend events totheCisco cloud. Youcanuseeither
Security Services Exchange ortheSecure Event Connector (SEC) tosend events from thedevices totheCisco
Secure Analytics andLogging (SAL) inthecloud.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
56Onboard Devices toCloud-delivered Firewall Management Center
Managing Threat Defense Events and Analytics

Before YouBegin Migration
Before youbegin theprocess, ensure thatthefollowing prerequisites aremet:
•Aprovisioned CDO tenant isregistered with aSmart License.
•Theon-prem management center isonboarded toCDO .Onboarding theon-prem management center
alsoonboards allthethreat defense devices registered tothaton-prem management center .SeeOnboard
anFMC .
Create anew user intheon-prem management center with Administrator roleor
acustom user rolewith "Devices" and"System" permissions foronboarding
purposes.Note
Ifyouonboard anon-prem management center toCDO andsimultaneously sign
intothaton-prem management center with thesame user name, theonboarding
fails.Caution
•Fortheon-prem management center 1000/2500/4500 migration:
•Run Version 7.4(available forthese models onatemporary basis). Werecommend devices be
running Version 7.0.5.
•Werecommend thatyoucreate abackup ofon-prem management center .
Forversions on-prem management center Version 6.5to7.1,seetheBackuptheFMC topic inthe
Firepower Management Center Configuration Guide.
Foron-prem management center Version 7.2andlater,seetheBackuptheMana gement Center
topic intheCisco Secure Firewall Management Center Administration Guide .
•Thethreat defense devices must besynchronized andnothave pending changes onthem. Themigration
fails onadevice ifCDO identifies pending changes onthatdevice.
•Allpeer devices inasite-to-site VPN topology must beonline andhave nopending deployment.
•On-Prem Management Center should allow outbound HTTP/HTTPS toupload configurations toAmazon
S3.
•CDO imports Syslog alert object used intheaccess control policy from theon-prem management center .
IfCDO already contains analert object with thesame name butadifferent type (SNMP ,Email), itis
reused during configuration import.
Theuser must check whether theSyslog object name matches theexisting SNMP orEmail alert object
inCDO .Ifthename matches, youmust rename theSyslog object intheon-prem management center
before starting themigration process.
•Ifyouattempt tomigrate firewalls with modified system defined FlexConfig textobjects from anon-prem
management center tothecloud-delivered Firewall Management Center ,thevalues ofthemodified
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
57Onboard Devices toCloud-delivered Firewall Management Center
Before YouBegin Migration

system defined FlexConfig textobjects arenotmigrated tothecloud-delivered Firewall Management
Center ,andthedeployment willfail.
Toavoid this, perform these tasks before youstart themigration:
•Copy themodified system defined FlexConfig textobject values from theon-prem management
center tocloud-delivered Firewall Management Center before migration.
•Initiate migration from on-prem management center tocloud-delivered Firewall Management Center
after verifying thepredefined FlexConfig textobjects.
High Availability Failover Link Must BeUp
Thehigh availability failover linkshould beupforasuccessful migration. Before initiating themigration
process onCDO ,determine thehealth status ofthefailover linkontheon-prem management center .
1.Identify thefailover interfaces ofallHApairs youwant tomigrate tocloud-delivered Firewall Management
Center .
a.Choose Devices >Device Management .
b.Next tothedevice high-availability pairyouwant toedit, click Edit (
).
c.Click theHigh Availability tab.
d.IntheHigh Availability Link area, theInterface field shows thefailover interface used inthepair.
e.Identify theinterfaces used forfailover communication ifthere aremultiple HApairs formigration.
2.Check thehealth status ofthefailover interfaces.
a.Choose Devices >Device Management .
b.Next tothedevice high-availability pairyouwant, click Health Monitor .
c.Intheleftpane, expand thehigh availability pairtoseethethreat defense devices.
d.Click thedevice indicated intheexclamation mark (
 ).
e.Click theCritical button atthetop.
TheInterface Status shows theerrors associated with interfaces.
f.Ifthefailover interface isdown, theInterface ‘failo ver_interfacename’ hasnolink message is
displayed.
However ,youcanmigrate theHApairtocloud-delivered Firewall Management Center ifyouseeanyother
data interface issues except forthefailover interface.Note
g.Rectify theissue andclick Sync fromonpr emfmcnowtoobtain thelatest changes onthedevice.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
58Onboard Devices toCloud-delivered Firewall Management Center
Before YouBegin Migration

Migrate Threat Defense toCloud-delivered Firewall
Management Center
Procedure
Step 1 Inthenavigation barontheleft,choose Tools &Services >Migrations >Migrate FTD tocdFMC .
Step 2 Click
 andchoose On-Pr emFMC-managed FTD tocdFMC .
Youcaninitiate only onemigration jobatonetime. Note
Step 3 IntheSelect OnPr emFMC area, perform thefollowing:
a.Youcanclick theOnboard anFMC linktoonboard theon-prem management center ifyouhave not
done already .SeeOnboard anFMC .
b.Select theon-prem management center from theavailable listandclick Next .
IntheSelect Devices step, youwillseethethreat defense devices thattheselected on-prem management
center manages. Ifahigh-availability pairissetupontheon-premise on-prem management center ,thehigh
availability node willbeshown instead oftheactive andstandby devices.
TheLast Synced time field indicates thetime thatiselapsed since thedevice configuration issynchronized
intotheon-prem management center .Youcanclick Sync fromOnPr emFMC Nowtofetch thelatest device
changes.
Step 4 IntheSelect Devices step, perform thefollowing:
a)Select thedevices thatyouwant tomigrate.
These devices caninclude standalone, high-availability pairs, orclusters. Ifyouhave ahigh-availability
pairoracluster ,select thenode thatrepresents it.Also, youcanhover your mouse pointer over thecluster
toview more details about thecontrol node.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
59Onboard Devices toCloud-delivered Firewall Management Center
Migrate Threat Defense toCloud-delivered Firewall Management Center

•Thedevices running onunsupported versions arenotavailable forselection.
•Thedevices thatareregistered foranalytics only with theon-prem management center or
have pending changes tobedeployed arenoteligible formigration.
•When youselect adevice thatisassociated with asite-to-site VPN topology ,CDO
automatically selects itspeer devices belonging toeither thesame topology oradifferent
topology ,because alldevices inthesite-to-site VPN topology must bemigrated together for
asuccessful migration totake place. Thewizard does notlisttheextranet devices, ifany.
However ,CDO migrates extranet devices.
TheS2SVPN Topology column indicates thenumber ofsite-to-site VPN topologies inwhich
aselected device participates. Youclick thetopology linktoview thetopologies anddevices
thataremigrated along with theselected device. This field isnotapplicable todevices that
arenotpartofthesite-to-site VPN topology .
•Ahigh availability pairispresented asasingle node. Youmust select thisnode toinclude
active andstandby devices inthemigration.Note
b)IntheMulti-De vice Action list,youcanchoose acommon action toapply onalldevices.
c)IntheCommit Action column, youcanchoose oneofthefollowing actions fortheselected device:
•Retain onOnPr emFMC forAnalytics :After themigration process iscompleted, theanalytics
management forselected threat defense devices isretained ontheon-prem management center .
•Delete FTD fromOnPr emFMC :After themigration process iscompleted, theselected devices
areremoved from theon-prem management center andareavailable forCDO tohandle theanalytics.
Youmust configure thedevices tosend events toCDO formanaging analytics. When thedevices
aredeleted from theon-prem management center ,they cannot berevoked.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
60Onboard Devices toCloud-delivered Firewall Management Center
Migrate Threat Defense toCloud-delivered Firewall Management Center

Fortheon-prem management center 1000/2500/4500, when youselect devices tomigrate,
make sure youchoose Delete FTD fromOnPr emFMC .Note thatthedevice isnotfully
deleted unless youcommit thechanges or14days pass.Important
Theactions thatarespecified here arecommitted automatically after the14days evaluation period or
after thechanges arecommitted manually .Note
Step 5 (Optional) Check thePause migration toreview imported sharedpolicies check box.
When youenable thisoption, themigration process willpause after theshared access policies likeAccess
Control andNATpolicies arestaged inthecloud-delivered Firewall Management Center .This pause ensures
thattheevaluation doesn't start andthatthedevice's current state andmanager remain unaffected. Itgives
youample time toreview theimported configuration foraccuracy .After you've assessed everything, youcan
resume themigration during theplanned migration interval, which willthen kick offthe15-day evaluation
period.
Step 6 Check theAutodeploy toFTDs after successful migration check boxtodeploy themigrated configuration
automatically tothedevice after successfully migrating andregistering thedevice with thecloud-delivered
Firewall Management Center .
However ,ifyouprefer toreview andmanually deploy theconfiguration from thecloud-delivered Firewall
Management Center after successful migration, youcanuncheck thisoption andproceed tothenext step.
Step 7 Click Migrate FTD tocdFMC .
Step 8 Click ViewMigration toCloud Progresstoseetheprogress.
What todonext
Ifyouhave paused themigration forreview ,youmust manually click Proceed Migration toimport the
remaining configuration. SeeProceed Migration Process ,onpage 63.
Youcanview theoverall andindividual status ofmigration jobsandgenerate areport when ajobiscompleted
successfully .SeeViewaThreat Defense Migration Job,onpage 61.
View aThreat Defense Migration Job
Themigration dashboard provides thestatus ofallmigration jobs initiated from theCDO .Youcanexpand a
specific jobtoseethestatus ofindividual devices associated with thattenant. This helps youkeep track of
theprogress ofyour migration andidentify issues, ifany,thatneed tobeaddressed.
Ifyouhave setupalerts fordevice workflows, click thenotifications icon
 toseethealerts thathave
been triggered during themigration process. Additionally ,ifyouhave opted toreceive email notifications
from CDO ,youwillalsoreceive anemail notification regarding alerts, ifany.
About the14-day Evaluation Period
When amigration jobissuccessful, youhave 14days totestandassess migration changes using cloud-delivered
Firewall Management Center .Ifyouareconvinced about themigration changes, werecommend thatyou
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
61Onboard Devices toCloud-delivered Firewall Management Center
View aThreat Defense Migration Job

commit thedevices manually ,andnotwait forCDO toautomatically commit themigration changes. See
Commit Migration Changes Manually toCloud-delivered Firewall Management Center .
Note thatfortheon-prem management center 1000/2500/4500, youwould have migrated devices from Version
7.4,which isunsupported forgeneral operations. Toreturn theon-prem management center toasupported
version youmust remove there-migrated devices, reimage back toVersion 7.0.x, restore from backup, and
re-register thedevices.
•Youcannot revoke theactions thatarespecified inthemigration commit window after committing the
changes.
•Youcancancel themigration during theevaluation period andreturn thedevice totheon-prem
management center .
•Youcannot delete adevice from either theon-prem management center orcloud-delivered Firewall
Management Center during theevaluation period.Note
Changes canbemade anddeployed tothedevice using CDO during theevaluation period. Ifyouswitch
device management back totheon-prem management center ,CDO-specific changes made during theevaluation
period isnotsaved onthedevice once itisreverted tothesource CDO tenant. Youmust deploy thechanges
from theon-prem management center tothedevice after reverting thedevice's manager .Important
•Name :Represents thejobname thatshows theon-prem management center name andthedate andtime
when thejobwasinitiated.
•Number ofFTDs :Shows thetotal number ofdevices thatarebeing migrated tothecloud.
•Status :Shows thestatus ofthejob.Expand thejobtoseethestatus ofindividual devices.
When ajobiscompleted successfully ,theFTD Migration jobissuccessful message appears inthe
Status column. Youcanclick thetooltip toseethenumber ofdays remaining forevaluating themanager .
Youcanclick Commit Migration Changes Manually toCloud-delivered Firewall Management Center
tocommit thechanges manually before the14days evaluation period ends.
•Last Update :Shows thedate andtime thatareupdated only when achange ismade tothedevice.
•Actions :Click
 toexecute thefollowing actions:
•Workflo ws:Takes youtotheWorkflo wstomonitor thejob.
•Download Report :Allows youtogenerate anddownload areport ofevery jobthatiscompleted
successfully .SeeGenerate aThreat Defense Migration Report ,onpage 66.
•Commit Manager Changes :Allows youtoapply thechanges manually todevices before the
evaluation period ends. SeeCommit Migration Changes Manually toCloud-delivered Firewall
Management Center ,onpage 63.
•Remo veMigration Job:Allows youtoremove acompleted job.Link isavailable only forcompleted
jobs. SeeDelete aMigration Job,onpage 66.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
62Onboard Devices toCloud-delivered Firewall Management Center
View aThreat Defense Migration Job

After asuccessful migration, CDO deploys theconfiguration tothedevice. Ifthesystem identifies errors or
warnings inthechanges tobedeployed, itdisplays them intheValidation Messages window .Toview
complete details, click thearrow icon before thewarnings orerrors. Ifthedeployment fails, seetheBest
Practices forDeploying Configuration Chang essection ofFirepower Management Center Device Configuration
Guide X.Y.
Configure Relam Sequence forIdentity Policy
Ifthedevice contains anidentity policy with aRealm orISEconfiguration, configure your device asaproxy
forCDO tocommunicate with theidentity source. Theidentity policies don't function ifCDO fails toconnect
totheIdentity Realms.
Atooltip appears intheStatus column foradevice thatrequires additional configuration.
1.Click thetooltip icon andthen click Lear nmore.
2.IntheConf igureProxywindow ,click Conf iguremyrealms .
Toaddaproxy sequence, seetheCreateaProxySequence section intheFirepower Management Center
Device Configuration Guide, 7.2.
Proceed Migration Process
IfthePause migration toreview imported sharedpolicies option waschecked during themigration setup,
themigration process willpause after theshared access policies were staged inthecloud-delivered Firewall
Management Center .After you've reviewed thestaged configurations, youmust manually instruct CDO to
resume themigration, which willthen import device-specific configurations such asrouting andinterfaces,
aswell asregister thethreat defense with thecloud-delivered Firewall Management Center .Completion of
themigration triggers a14-day evaluation period.
Toproceed, gotothemigration jobpage andclick Proceed with migration fortherelevant job.
Remember thatdeployment from thecloud-delivered Firewall Management Center must bedone after a
successful migration.
Commit Migration Changes Manually toCloud-delivered Firewall Management
Center
Werecommend thatyoucommit migration changes manually ifyouareconvinced with your changes and
notwaiting forCisco Defense Orchestrator toauto commit changes. TheCommit Migration Changes window
shows theremaining days tocommit themigration tocloud-delivered Firewall Management Center orrevert
thedevice toon-prem management center .During theevaluation period, youcanmodify theactions for
selected threat defense devices before committing thechanges. Once thechanges arecommitted, youcan't
revoke theactions.
Thecommit manager changes actions aredisabled inthefollowing conditions: Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
63Onboard Devices toCloud-delivered Firewall Management Center
Proceed Migration Process

•The14-day evaluation period haspassed.
•Thethreat defense devices have either been reverted totheon-prem management center ordeleted from
on-prem management center ,inwhich case, nofurther actions canbetaken.
Procedure
Step 1 Inthemigration jobs page, click the
 under theActions column ofacompleted job.
Step 2 Click Commit Migration Changes .(This linkisavailable only after ajobiscompleted successfully .)
Step 3 Select adevice andintheCommit Actions list,choose oneofthefollowing actions:
•Retain onOnPr emFMC forAnalytics :After committing thechanges, analytics management for
selected threat defense devices isretained onthemanagement center .
•Delete Threat Defense fromOnPr emFMC :After committing thechanges, theselected devices are
removed from theon-prem management center andareavailable forCisco Defense Orchestrator tohandle
theanalytics. Youmust configure thethreat defense tosend events toCisco Defense Orchestrator for
managing analytics. After thethreat defense devices aredeleted from theon-prem management center ,
they cannot berevoked.
Ifyouwant torevert thedevice management toon-prem management center ,refer toRevert theThreat
Defense Management toOn-Prem Firewall Management Center ,onpage 64.Note
Step 4 Click Commit executes your specified actions immediately without further confirmation.
Onthemigration jobs screen, youcanexpand thejobtocheck theprogress oftheactions specified.
Themigrated devices appear onCDO 'sInventory page. These devices canbemanaged using the
cloud-delivered Firewall Management Center portal thatislinked toCDO .Ensure youdeploy thechanges to
thedevices from cloud-delivered Firewall Management Center .
Revert theThreat Defense Management toOn-Prem Firewall Management
Center
Youcanrevert thedevice management totheon-prem management center during theevaluation period. This
means thatthedevices willnolonger bemanaged through theCisco Defense Orchestrator (CDO )platform.
However ,itisimportant tonote thatanychanges made during themigration process intheCDO willnotbe
reflected intheon-prem management center after reverting threat defense management.
When thethreat defense management hasbeen returned totheon-prem management center ,youcanbegin
themigration jobagain toswitch thethreat defense management toCisco Defense Orchestrator .Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
64Onboard Devices toCloud-delivered Firewall Management Center
Revert theThreat Defense Management toOn-Prem Firewall Management Center

Procedure
Step 1 Inthemigration jobs page, click the
 under theActions column ofacompleted job.
Step 2 Click Commit Migration Changes .(This linkisavailable only after ajobiscompleted successfully .)
Step 3 Select adevice andintheCommit Actions list,choose RevertManager toOnPr emFMC .
Step 4 Click Commit executes your specified actions immediately without further confirmation.
Step 5 Deploy thechanges tothedevice from theon-prem management center .
View Migrated Devices
Themigrated devices appear ontheInventory page inCDO. Youcancross-launch andconfigure therequired
feature onthecloud-delivered Firewall Management Center .
Thedevices onthecloud-delivered Firewall Management Center device listing page may showNo-IP instead
ofthedevice's management IPaddress. Because thedevice registration uses theNATID,thedevice initiates
theprocess, andtherefore, themanagement IPsaren't discovered orused fortheconnection. Note thatthis
applies tonewly onboarded devices anddevices migrated from theon-prem management center .Note
Analytics Only Threat Defense Device Example
CDO creates twoinstances ofthesame device thatisconfigured toretain onthemanagement center for
analytics.
Thedevice instance with FMC FTD andAnalytics Only labels shows thatthemanagement center handles
theanalytics. Thedevice instance with theFTD label indicates thatCDO manages itsconfiguration.
Youcanmanage theconfiguration ofthedevice using CDO. Toseethedevice inthecloud-delivered Firewall
Management Center ,dothefollowing:
Select thedevice having FTD label andintheManagement pane ontheright, click Device Summary .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
65Onboard Devices toCloud-delivered Firewall Management Center
View Migrated Devices

Youcanview theevents from thedevice inthemanagement center .Toseetheevents, dothefollowing:
1.Select thedevice having FMC FTD andAnalytics Only labels andontheright, click theManage Devices
link.
2.Logontotheonpremise management center .
3.Click Device >Device Management .
Youcan't select thisdevice asCDO manages theconfiguration. Themanagement center shows theCDO
Managed label forthisdevice.
Toseetheliveevents inthemanagement center ,click Analysis >Events.
Generate aThreat Defense Migration Report
When amigration jobissuccessful, youcangenerate anddownload areport inPDF format toanalyze every
parameter imported from theon-prem management center tocloud-delivered Firewall Management Center .
Thereport provides details ofeach device associated with thejob.Details include information about devices,
values ofshared policies, objects, routing details, interfaces, network settings, andmore.
Onthemigration jobs page, click the
 under theActions column ofacompleted jobandthen click
Download Report. .Youmust download areport within ayear ofthejobbeing triggered.
Delete aMigration Job
Ifyouhave completed amigration jobandnolonger need ittobedisplayed onthemigration page, youcan
easily remove itbydeleting it.This cleans upthemigration page andmake iteasier tonavigate.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
66Onboard Devices toCloud-delivered Firewall Management Center
Generate aThreat Defense Migration Report

Ifyouwant todelete amigration jobduring theevaluation period, youmust firstcommit themigration changes
orrevert themanager totheon-prem management center .Failing todosomay result inaninconsistent state
oftheon-prem management center ,which could beunrecoverable. SeeCommit Migration Changes Manually
toCloud-delivered Firewall Management Center .
Ifyoudon't have access toyour on-prem management center orifitisnolonger available andyouareblocked
from performing acommit orrevert, youcandelete thejob.Attention
Procedure
Step 1 Choose Tools &Services >Migrate FTD tocdFMC .
Step 2 Click the
 under theActions column andthen click Remo veMigration Job.
Step 3 Click Delete toconfirm your action.
Enable Notification Settings
Youcansubscribe togetemail notifications from CDO whenever adevice associated with your tenant
experiences aspecific action when migrating athreat defense device toCDO .
CDO sends anemail ifyouenable toreceive anotification forthefollowing states during migration:
•Failed :When amigration jobfails.
•Started :When amigration jobisinitiated.
•Succeeded :When amigration jobiscompleted successfully .
•Commit Pending :When themanager changes have tobecommitted.
Toenable notification settings, seeNotification Settings .
Troubleshoot Threat Defense Migration toCloud
This section provides information totroubleshoot specific errors thatmay occur when migrating threat defense
tothecloud.
HTTP Status Code 201(Created) Found inFMC Response
CDO shows thiserror atthedevice level.
Issue :
TheSecure Device Connector (SDC) version isnotcompatible.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
67Onboard Devices toCloud-delivered Firewall Management Center
Enable Notification Settings

Resolution :
Ensure thattheSDC isupgraded toversion "202205191350" orlater.
1.Navigate toAdmin >Secur eConnectors .
2.Click theSDC toseetheexisting SDC version intheDetails pane ontheright.
3.Update your Secure Device Connector .
Device Connectivity toCDO Failed
Thedevice isunable toreach CDO foroneofthefollowing reasons:
•Thedevice iscabled incorrectly .
•Yournetwork may require astatic IPaddress forthedevice.
•Yournetwork uses custom DNS, orthere isexternal DNS blocking onthecustomer network.
•PPPoE authentication isneeded.
•Thedevice isbehind aproxy .
Resolution :
•Check thecabling andnetwork connectivity .
•Ensure thatyour firewall isnotblocking anytraffic.
•Verify Threat Defense Connectivity with Cloud-delivered Firewall Management Center .
Failed toConfigure CDO asConfiguration Manager
When CDO cannot communicate with thedevice duetonetwork loss, itfails toexecute theconfigure manager
command with thecloud-delivered Firewall Management Center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
68Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Threat Defense Migration toCloud

Resolution :
1.Check thecabling andnetwork connectivity .
2.Ensure thatyour firewall isnotblocking anytraffic.
3.Ensure thatthreat defense hasinternet connectivity andtheDNS address isresolved toanIPaddress. See
Verify Threat Defense Connectivity with Cloud-delivered Firewall Management Center ,onpage 70.
4.Retry migration forthisthreat defense from CDO inanew change manager job.
Change Manager Already Exists orinProgress forSource Manager
Youcancreate athreat defense migration jobforaon-prem management center only when theprevious job
iscompleted.
This error occurs when youcreate anew jobwhen theprevious jobisinprogress.
Resolution :
1.Navigate tothemigration table toseeifanother jobisinprogress foraparticular source onpremise
management center .
2.Waitforthecurrent migration jobtocomplete.
3.Initiate thenext migration job.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
69Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Threat Defense Migration toCloud

Verify Threat Defense Connectivity with Cloud-delivered Firewall Management
Center
This section provides thecommands todetermine thethreat defense connectivity with thecloud-delivered
Firewall Management Center .
Check internet connectivity onthedevice
Execute theping system <any OpenDNS server address> command tocheck whether thedevice canreach
theinternet.
1.Connect totheCLIofthedevice, either from theconsole portorusing SSH.
2.Loginwith theAdmin username andpassword.
3.Enter ping system <OpenDNS IPAddr ess> .
pingsystem208.67.222.222
PING208.67.222.222 (208.67.222.222) 56(84)bytesofdata.
64bytesfrom208.67.222.222: icmp_seq=1 ttl=48time=22.10 ms
64bytesfrom208.67.222.222: icmp_seq=2 ttl=48time=22.10 ms
64bytesfrom208.67.222.222: icmp_seq=3 ttl=48time=22.8 ms
64bytesfrom208.67.222.222: icmp_seq=4 ttl=48time=22.6 ms
^C
---208.67.222.222 pingstatistics ---
4packets transmitted, 4received, 0%packetloss,time7ms
rttmin/avg/max/mdev =22.588/22.841/22.995/0.223 ms
Theabove example shows thatthedevice canconnect totheinternet using theOpenDNS Server IPaddress.
Also, thenumber ofpackets transmitted isthesame asreceived, indicating thatinternet connectivity isavailable
onthedevice. This shows thatthedevice canreach theinternet.
Ifyour results don't match, check theinternet connection manually . Note
Check device connectivity with Cloud-delivered Firewall Management Center
1.Obtain thehost name ofthecloud-delivered Firewall Management Center .
a.IntheCDO navigation pane, click Tools &Services >Firewall Management Center .
b.Choose Cloud-Deli veredFMC toseethecloud-delivered Firewall Management Center details on
theright pane.
c.IntheHostname field, copy only thehostname shown inthefollowing example image.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
70Onboard Devices toCloud-delivered Firewall Management Center
Verify Threat Defense Connectivity with Cloud-delivered Firewall Management Center

Intheabove figure, thehighlighted textisthehostname (cdo-acc10.app.us.cdo.cisco.com )ofthe
FMC tobecopied.
2.Connect totheCLIofthedevice, either from theconsole portorusing SSH.
3.Enter ping system <hostname oftheFMC >.
pingsystemcdo-acc10.app.us.cdo.cisco.com
PINGcdo-acc10.app.us.cdo.cisco.com (54.187.125.161) 56(84)bytesofdata.
^C
---cdo-acc10.app.us.cdo.cisco.com pingstatistics ---
2packets transmitted, 0received, 100%packetloss,time64ms
Intheabove example, thehostname isresolved with theIPaddress, indicating your connection is
successful. Ignore the"100% packet loss" message shown intheresponse.
Ifyoucan't connect tothehost, youcanrectify theDNS configuration intheCLIusing configure
netw orkdns<addr ess> .Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
71Onboard Devices toCloud-delivered Firewall Management Center
Verify Threat Defense Connectivity with Cloud-delivered Firewall Management Center

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
72Onboard Devices toCloud-delivered Firewall Management Center
Verify Threat Defense Connectivity with Cloud-delivered Firewall Management Center

CHAPTER 5
Device Management
This guide applies toanon-pr emises Secure Firewall Management Center ,either asyour primary manager
orasananalytics-only manager .When using theCisco Defense Orchestrator (CDO )cloud-delivered Firewall
Management Center asyour primary manager ,youcanuseanon-prem management center foranalytics. Do
notusethisguide forCDO management; seeManaging Firewall Threat Defense with Cloud-Delivered Firewall
Management Center inCisco Defense Orchestrator .
This chapter describes how tomanage devices intheSecure Firewall Management Center .
•LogIntotheCommand Line Interface ontheDevice ,onpage 73
•Add aDevice Group ,onpage 75
•Shut Down orRestart theDevice ,onpage 75
•Download theManaged Device List,onpage 76
•Configure Device Settings ,onpage 77
•HotSwap anSSD ontheSecure Firewall 3100 ,onpage 140
•Migrate theConfiguration toaNew Model ,onpage 143
Log Into theCommand Line Interface ontheDevice
Youcanlogdirectly intothecommand lineinterface onthreat defense devices. Ifthisisyour firsttime logging
in,complete theinitial setup process using thedefault admin user; seeComplete theInitial Configuration of
aSecure Firewall Threat Defense Device Using theCLI,onpage 2690 .
Ifauser makes three consecutive failed attempts tologintotheCLIviaSSH, thesystem terminates theSSH
connection.Note
Before you begin
Create additional user accounts thatcanlogintotheCLIusing theconfigureuser addcommand.
Procedure
Step 1 Connect tothethreat defense CLI, either from theconsole portorusing SSH.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
73

YoucanSSH tothemanagement interface ofthethreat defense device. Youcanalsoconnect totheaddress
onadata interface ifyouopen theinterface forSSH connections. SSH access todata interfaces isdisabled
bydefault. SeeSSH Access ,onpage 946toallow SSH connections tospecific data interfaces.
Forphysical devices, youcandirectly connect totheconsole portonthedevice. Seethehardware guide for
your device formore information about theconsole cable. Usethefollowing serial settings:
•9600 baud
•8data bits
•Noparity
•1stop bit
TheCLIontheconsole portisFXOS (with theexception oftheISA3000, where itistheregular threat defense
CLI) .Usethethreat defense CLIforbasic configuration, monitoring, andnormal system troubleshooting.
SeetheFXOS documentation forinformation onFXOS commands.
Step 2 Loginwith theadmin username andpassword.
Example:
firepower login:admin
Password:
Lastlogin:ThuMay1614:01:03 UTC2019onttyS0
Successful loginattempts foruser'admin' :1
firepower#
Step 3 Ifyouused theconsole port, access thethreat defense CLI.
connect ftd
This stepdoes notapply totheISA3000. Note
Example:
firepower# connect ftd
>
Step 4 AttheCLIprompt (>),useanyofthecommands allowed byyour level ofcommand lineaccess.
Toreturn toFXOS ontheconsole port, enter exit.
Step 5 (Optional) Ifyouused SSH, youcanconnect toFXOS.
connect fxos
Toreturn tothethreat defense CLI, enter exit.
Step 6 (Optional) Access thediagnostic CLI:
system support diagnostic-cli
UsethisCLIforadvanced troubleshooting. This CLIincludes additional showandother commands.
This CLIhastwosub-modes: user EXEC andprivileged EXEC mode. More commands areavailable in
privileged EXEC mode. Toenter privileged EXEC mode, enter theenable command; press enter without
entering apassword when prompted.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
74Onboard Devices toCloud-delivered Firewall Management Center
Log Into theCommand Line Interface ontheDevice

Example:
>systemsupport diagnostic-cli
firepower> enable
Password:
firepower#
Toreturn totheregular CLI, type Ctrl-a ,d.
Add aDevice Group
Themanagement center allows youtogroup devices soyoucaneasily deploy policies andinstall updates on
multiple devices. Youcanexpand andcollapse thelistofdevices inthegroup.
Ifyouaddtheprimary device inahigh-availability pairtoagroup, both devices areadded tothegroup. If
youbreak thehigh-availability pair,both devices remain inthatgroup.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 From theAdd drop-down menu, choose Add Group.
Toeditanexisting group, click Edit (
)forthegroup youwant toedit.
Step 3 Enter aName .
Step 4 Under Available Devices ,choose oneormore devices toaddtothedevice group. UseCtrlorShift while
clicking tochoose multiple devices.
Step 5 Click Add toinclude thedevices youchose inthedevice group.
Step 6 Optionally ,toremove adevice from thedevice group, click Delete (
)next tothedevice youwant toremove.
Step 7 Click OKtoaddthedevice group.
Shut Down orRestart theDevice
It'simportant thatyoushut down your system properly .Simply unplugging thepower orpressing thepower
switch cancause serious filesystem damage. Remember thatthere aremany processes running inthe
background allthetime, andunplugging orshutting offthepower does notallow thegraceful shutdown of
your firewall.
Seethefollowing tasktoshut down orrestart your system properly .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
75Onboard Devices toCloud-delivered Firewall Management Center
Add aDevice Group

After restarting your device, youmay seeanerror thatthemanagement connection could notbereestablished.
Insome cases, theconnection isattempted before theManagement interface onthedevice isready .The
connection willberetried automatically andshould come upwithin 15minutes.Note
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice thatyouwant torestart, click Edit (
).
Step 3 Click Device.
Step 4 Torestart thedevice:
a)Click Restart Device (
).
b)When prompted, confirm thatyouwant torestart thedevice.
Step 5 Toshut down thedevice:
a)Click Shut DownDevice (
)intheSystem section.
b)When prompted, confirm thatyouwant toshut down thedevice.
c)Ifyouhave aconsole connection tothefirewall, monitor thesystem prompts asthefirewall shuts down.
Youwillseethefollowing prompt:
Systemisstopped.
Itissafetopoweroffnow.
Doyouwanttorebootinstead? [y/N]
Ifyoudonothave aconsole connection, wait approximately 3minutes toensure thesystem hasshut
down.
FortheISA3000, when shutdown iscomplete, theSystem LED willturnoff.Waitatleast 10seconds
before youremove thepower .
Download theManaged Device List
Youcandownload areport ofallthemanaged devices.
Before you begin
Toperform thefollowing task, youmust beanAdmin user.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Click theDownload Device List Report link.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
76Onboard Devices toCloud-delivered Firewall Management Center
Download theManaged Device List

Step 3 Youcandownload thedevice listinCSV orPDF format. Choose Download CSV orDownload PDF to
download thereport.
Configure Device Settings
TheDevices >Device Management page provides youwith range ofinformation andoptions:
•ViewBy—Use thisoption toview thedevices based ongroup, licenses, model, version, oraccess control
policy .
•Device State—Y oucanalsoview thedevices based onitsstate. Youcanclick onastate icon toview
thedevices belonging toit.Thenumber ofdevices belonging tothestates areprovided within brackets.
•Search—Y oucansearch foraconfigured device byproviding thedevice name, host name, ortheIP
address.
•Add options—Y oucanadddevices, high availability pairs, clusters andgroups.
•Edit andother actions—Against each configured device, usetheEdit (
)icon toeditthedevice
parameters andattributes. Click theMore(
)icon andexecute other actions:
•Access Control Policy—Click onthelinkintheAccess Control Policy column toview thepolicy
thatisdeployed tothedevice.
•Delete —Tounregister thedevice.
•Packet Tracer—T onavigate tothepacket tracer page forexamining policy configuration onthe
device byinjecting amodel packet intothesystem.
•Packet Capture—T onavigate tothepacket capture page, where, youcanview theverdicts and
actions thesystem takes while processing apacket.
•Revert Upgrade—T orevert theupgrade andconfiguration changes thatwere made after thelast
upgrade. This action results inrestoring thedevice totheversion thatwasbefore theupgrade.
•Health Monitor—T onavigate tothedevice's health monitoring page.
•Troubleshooting Files—Generate troubleshooting files, where youcanchoose thetype ofdata to
beincluded inthereport.
•ForFirepower 4100/9300 series devices, alinktothechassis manager web interface.
When youclick onthedevice, thedevice properties page appears with several tabs. Youcanusethetabsto
view thedevice information, andconfigure routing, interfaces, inline sets, andDHCP .
Edit General Settings
TheGeneral section oftheDevice page displays thesettings described inthetable below .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
77Onboard Devices toCloud-delivered Firewall Management Center
Configure Device Settings

Figure 2:General
Table 2:General Section Table Fields
Description Field
Thedisplay name ofthedevice onthemanagement center . Name
This displays whether ornotthemanaged device sends packet data with the
events tothemanagement center .Transfer Packets
Thedisplays themode ofthemanagement interface forthedevice: routed or
transpar ent.Mode
This displays thesecurity certifications compliance foradevice. Validvalues
areCC,UCAPL andNone.Compliance Mode
This displays thecore allocation performance profile forthedevice, as
configured intheplatform settings policy .Performance Profile
Shows whether TLS crypto acceleration isenabled ordisabled. TLS Crypto Acceleration:
Lets youcopy ,export, orimport aconfiguration. SeeCopy aConfiguration
toAnother Device ,onpage 79andExport andImport theDevice
Configuration ,onpage 80.Device Configuration
Shows whether thedevice wasregistered using aregistration keyorusing the
serial number (zero-touch provisioning ).OnBoarding Method
Youcaneditsome ofthese settings from thissection.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice youwant tomodify ,click Edit (
).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
78Onboard Devices toCloud-delivered Firewall Management Center
Edit General Settings

Step 3 Click Device.
Step 4 IntheGeneral section, click Edit (
).
a)Enter aName forthemanaged device.
b)Check Transfer Packetstoallow packet data tobestored with events onthemanagement center .
c)Click ForceDeploy toforce deployment ofcurrent policies anddevice configuration tothedevice.
Force-deploy consumes more time than theregular deployment since itinvolves thecomplete
generation ofthepolicy rules tobedeployed onthethreat defense .Note
Step 5 ForDevice Conf iguration actions, seeCopy aConfiguration toAnother Device ,onpage 79andExport and
Import theDevice Configuration ,onpage 80.
Step 6 Click Deploy .
What todonext
•Deploy configuration changes.
Copy aConfiguration toAnother Device
When anew device isdeployed inthenetwork youcaneasily copy configurations andpolicies from a
pre-configured device, instead ofmanually reconfiguring thenew device.
Before you begin
Confirm that:
•Thesource anddestination threat defense devices arethesame model andarerunning thesame version
ofthesoftware.
•Thesource iseither astandalone Secure Firewall Threat Defense device oraSecure Firewall Threat
Defense high availability pair.
•Thedestination device isastandalone threat defense device.
•Thesource anddestination threat defense devices have thesame number ofphysical interfaces.
•Thesource anddestination threat defense devices areinthesame firewall mode -routed ortransparent.
•Thesource anddestination threat defense devices areinthesame security certifications compliance
mode.
•Thesource anddestination threat defense devices areinthesame domain.
•Configuration deployment isnotinprogress oneither thesource orthedestination threat defense devices.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice youwant tomodify ,click Edit (
).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
79Onboard Devices toCloud-delivered Firewall Management Center
Copy aConfiguration toAnother Device

Step 3 Click Device.
Step 4 IntheGeneral section, dooneofthefollowing:
•Click GetDevice Conf iguration (
)tocopy device configuration from another device tothenew
device. OntheGetDeviceConf iguration page, select thesource device intheSelect Devicedrop-down
list.
•Click Push Device Conf iguration (
)tocopy device configuration from thecurrent device tothenew
device. OnthePush Device Conf iguration page, select thedestination towhich configuration istobe
copied intheTargetDevice drop-down list.
Step 5 (Optional) Check Include sharedpolicies configuration check boxtocopy policies.
Shared policies likeACpolicy ,NAT,Platform Settings andFlexConfig policies canbeshared across multiple
devices.
Step 6 Click OK.
Youcanmonitor thestatus ofthecopy device configuration taskonTasks intheMessage Center .
When thecopy device configuration taskisinitiated, iterases theconfiguration onthetargetdevice andcopies
theconfiguration ofthesource device tothedestination device.
When youhave completed thecopy device configuration task, youcannot revert thetargetdevice toitsoriginal
configuration.Warning
Export and Import theDevice Configuration
Youcanexport allofthethedevice-specific configuration configurable ontheDevice pages, including:
•Interfaces
•Inline Sets
•Routing
•DHCP
•VTEP
•Associated objects
Youcanthen import thesaved configuration forthesame device inthefollowing usecases:
•Moving thedevice toadifferent management center —First delete thedevice from theoriginal management
center ,then addthedevice tothenewmanagement center .Then youcanimport thesaved configuration.
•Restore anoldconfiguration—If youdeployed changes thatnegatively impacted theoperation ofthe
device, youcanimport abackup copy ofaknown working configuration torestore aprevious operational
state.
•Reregistering adevice—If youdelete adevice from themanagement center ,butthen want toadditback,
youcanimport thesaved configuration.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
80Onboard Devices toCloud-delivered Firewall Management Center
Export and Import theDevice Configuration

Seethefollowing guidelines:
•Youcanonly import theconfiguration tothesame device (theUUID must match). Youcannot import
aconfiguration toadifferent device, even ifitisthesame model.
•Donotchange theversion running onthedevice between exporting andimporting; theversion must
match.
•Ifanobject doesn't exist, itwillbecreated. Ifanobject exists, butthevalue isdifferent, seebelow:
Table 3:Object Import Action
Import Action Scenario
Reuse existing objects. Object exists with the
same name andvalue.
Network andPortobjects: Create object overrides forthisdevice. SeeObject
Overrides ,onpage 1312 .
Interface objects: Create new objects. Forexample, ifboth thetype (security
zone orinterface group) andtheinterface type (routed orswitched, for
example) donotmatch, then anew object iscreated.
Allother objects: Reuse existing objects even though thevalues aredifferent.Object exists with the
same name butdifferent
value.
Create new object.s Object doesn't exist.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice youwant toedit, click Edit (
).
Step 3 Click Device.
Step 4 Export theconfiguration.
a)IntheGeneral area, click Export .
Figure 3:Export Device Configuration
Youareprompted toacknowledge theexport; click OK.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
81Onboard Devices toCloud-delivered Firewall Management Center
Export and Import theDevice Configuration

Figure 4:Acknowledge Export
Youcanview theexport progress intheTasks page.
b)OntheNotif ications >Tasks page, ensure thattheexport hascompleted; click Download Export
Package .Alternatively ,youcanclick theDownload button intheGeneral area.
Figure 5:Export Task
Youareprompted todownload thepackage; click Click heretodownload thepackage tosave thefile
locally ,andthen click OKtoexitthedialog box.
Figure 6:Download Package
Step 5 Import theconfiguration.
a)IntheGeneral area, click Import .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
82Onboard Devices toCloud-delivered Firewall Management Center
Export and Import theDevice Configuration

Figure 7:Import Device Configuration
Youareprompted toacknowledge thatthecurrent configuration willbereplace. Click Yes,andthen
navigate totheconfiguration package (with thesuffix.sfo; note thatthisfileisdifferent from the
Backup/Restore files).
Figure 8:Import Package
Figure 9:Navigate toPackage
Youareprompted toacknowledge theimport; click OK.
Figure 10:Acknowledge Import
Youcanview theimport progress intheTasks page.
b)Viewtheimport reports soyoucanseewhat wasimported. OntheNotif ications >Tasks page forthe
import task, click ViewImport Report .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
83Onboard Devices toCloud-delivered Firewall Management Center
Export and Import theDevice Configuration

Figure 11:View Import Report
TheDevice Conf iguration Import Reports page provides links toavailable reports.
Edit License Settings
TheLicense section oftheDevice page displays thelicenses enabled forthedevice.
Youcanenable licenses onyour device ifyouhave available licenses onyour management center .
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice where youwant toenable ordisable licenses, click Edit (
).
Step 3 Click Device.
Step 4 IntheLicense section, click Edit (
).
Step 5 Check orclear thecheck boxnext tothelicense youwant toenable ordisable forthemanaged device.
Step 6 Click Save.
What todonext
•Deploy configuration changes.
View System Information
TheSystem section oftheDevice page displays aread-only table ofsystem information, asdescribed inthe
following table.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
84Onboard Devices toCloud-delivered Firewall Management Center
Edit License Settings

Youcanalsoshut down orrestart thedevice.
Table 4:System Section Table Fields
Description Field
Themodel name andnumber forthemanaged device. Model
Theserial number ofthechassis ofthemanaged device. Serial
Thecurrent system time ofthedevice. Time
Shows thetime zone. TimeZone
Theversion ofthesoftware currently installed onthemanaged device. Version
Thecurrent system time ofthedevice, inthetime zone specified indevice
platform settings.TimeZone setting for
time-based rules
View theInspection Engine
TheInspection Engine section oftheDevicepage shows whether your device uses Snort2 orSnort3. Toswitch
theinspection engine, seeEnable Snort 3onanIndividual DeviceintheCisco Secure Firewall Management
Center Snort 3Configuration Guide .
View Health Information
TheHealth section oftheDevice page displays theinformation described inthetable below .
Table 5:Health Section Table Fields
Description Field
Anicon thatrepresents thecurrent health status ofthedevice. Clicking the
icon displays theHealth Monitor fortheappliance.Status
Alinktoaread-only version ofthehealth policy currently deployed atthe
device.Policy
AlinktotheHealth Exclude page, where youcanenable anddisable health
exclusion modules.Excluded
Edit Management Settings
Youcaneditmanagement settings intheManagement area.
Update theHostname orIPAddress intheManagement Center
Ifyoueditthehostname orIPaddress ofadevice after youadded ittothemanagement center (using the
device’ sCLI, forexample), youneed tousetheprocedure below tomanually update thehostname orIP
address onthemanaging management center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
85Onboard Devices toCloud-delivered Firewall Management Center
View theInspection Engine

Tochange thedevice management IPaddress onthedevice, seeModify Threat Defense Management Interfaces
attheCLI,onpage 108.
Ifyouused only theNATIDwhen registering thedevice, then theIPshows asNO-IP onthispage, andyou
donotneed toupdate theIPaddress/hostname.
Ifyouused zero-touch provisioning toregister thedevice ontheoutside interface, thehostname isautomatically
generated along with amatching DDNS configuration; youcannot editthehostname inthiscase.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice where youwant tomodify management options, click Edit (
).
Step 3 Click Device,andview theManagement area.
Step 4 Disable management temporarily byclicking theslider soitisdisabled (
 ).
Figure 12:Disable Management
Youareprompted toproceed with disabling management; click Yes.
Disabling management blocks theconnection between themanagement center andthedevice, butdoes not
delete thedevice from themanagement center .
Step 5 Edit theRemote Host Addr essIPaddress andoptional Secondary Addr ess(when using aredundant data
interface) orhostname byclicking Edit (
).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
86Onboard Devices toCloud-delivered Firewall Management Center
Update theHostname orIPAddress intheManagement Center

Figure 13:Edit Management Address
Step 6 IntheManagement dialog box, modify thename orIPaddress intheRemote Host Addr essfield andthe
optional Secondary Addr essfield,andclick Save.
Forinformation about using asecondary manager access data interface, seeConfigure aRedundant Manager
Access Data Interface ,onpage 103.
Figure 14:Management IPAddress
Step 7 Reenable management byclicking theslider soitisenabled (
 ).
Figure 15:Enable Management Connection
Change Both Management Center and Threat Defense IPAddresses
Youmight want tochange both management center andthreat defense IPaddresses ifyouneed tomove them
toanew network.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
87Onboard Devices toCloud-delivered Firewall Management Center
Change Both Management Center and Threat Defense IPAddresses

Procedure
Step 1 Disable themanagement connection.
Forahigh-availability pairorcluster ,perform these steps onallunits.
a)Choose Devices >Device Management .
b)Next tothedevice, click Edit (
).
c)Click Device,andview theManagement area.
d)Disable management temporarily byclicking theslider soitisdisabled (
 ).
Figure 16:Disable Management
Youareprompted toproceed with disabling management; click Yes.
Step 2 Change thedevice IPaddress inthemanagement center tothenew device IPaddress.
Youwillchange theIPaddress onthedevice later.
Forahigh-availability pairorcluster ,perform these steps onallunits.
a)Edit theRemote Host Addr essIPaddress andoptional Secondary Addr ess(when using aredundant
data interface) orhostname byclicking Edit (
).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
88Onboard Devices toCloud-delivered Firewall Management Center
Change Both Management Center and Threat Defense IPAddresses

Figure 17:Edit Management Address
b)IntheManagement dialog box, modify thename orIPaddress intheRemote Host Addr essfield and
theoptional Secondary Addr essfield,andclick Save.
Figure 18:Management IPAddress
Step 3 Change themanagement center IPaddress.
Becareful when making changes tothemanagement center interface towhich youareconnected; if
youcannot re-connect because ofaconfiguration error ,youneed toaccess themanagement center
console porttore-configure thenetwork settings intheLinux shell. Youmust contact Cisco TACto
guide youinthisoperation.Caution
a)Choose System (
)>Conf iguration ,andthen choose Management Interfaces .
b)IntheInterfaces area, click Edit next totheinterface thatyouwant toconfigure.
c)Change theIPaddress, andclick Save.
Step 4 Change themanager IPaddress onthedevice.
Forahigh-availability pairorcluster ,perform these steps onallunits.
a)Atthethreat defense CLI, view themanagement center identifier .
showmanagers
Example:
>showmanagers
Type :Manager
Host :10.10.1.4
Display name :10.10.1.4
Identifier :f7ffad78-bf16-11ec-a737-baa2f76ef602
Registration :Completed
Management type :Configuration
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
89Onboard Devices toCloud-delivered Firewall Management Center
Change Both Management Center and Threat Defense IPAddresses

b)Edit themanagement center IPaddress orhostname.
configuremanager editidentif ier{hostname {ip_addr ess|hostname }|displayname display_name }
Ifthemanagement center wasoriginally identified byDONTRESOL VEandaNATID,youcanchange
thevalue toahostname orIPaddress using thiscommand. Youcannot change anIPaddress orhostname
toDONTRESOL VE.
Example:
>configure manager editf7ffad78-bf16-11ec-a737-baa2f76ef602 hostname 10.10.5.1
Step 5 Change theIPaddress ofthemanager access interface attheconsole port.
Forahigh-availability pairorcluster ,perform these steps onallunits.
Ifyouusethededicated Management interface:
configurenetw orkipv4
configurenetw orkipv6
Ifyouusethededicated Management interface:
configurenetw orkmanagement-data-interface disable
configurenetw orkmanagement-data-interface
Step 6 Reenable management byclicking theslider soitisenabled (
 ).
Forahigh-availability pairorcluster ,perform these steps onallunits.
Figure 19:Enable Management Connection
Step 7 (Ifusing adata interface formanager access) Refresh thedata interface settings inthemanagement center .
Forahigh-availability pair,perform thissteponboth units.
a)Choose Devices >Device Management >Device >Management >Manager Access -Conf iguration
Details ,andclick Refr esh.
b)Choose Devices >Device Management >Interfaces ,andsettheIPaddress tomatch thenew address.
c)Return totheManager Access -Conf iguration Details dialog box, andclick Ackno wledge toremove
thedeployment block.
Step 8 Ensure themanagement connection isreestablished.
Inthemanagement center ,check themanagement connection status ontheDevices >DeviceManagement >
Device >Management >Manager Access -Conf iguration Details >Connection Status page.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
90Onboard Devices toCloud-delivered Firewall Management Center
Change Both Management Center and Threat Defense IPAddresses

Atthethreat defense CLI, enter thesftunnel-status-brief command toview themanagement connection
status.
Thefollowing status shows asuccessful connection foradata interface, showing theinternal "tap_nlp"
interface.
Figure 20:Connection Status
Step 9 (For ahigh-availability management center pair) Repeat configuration changes onthesecondary management
center .
a)Change thesecondary management center IPaddress.
b)Specify thenew peer addresses onboth units.
c)Make thesecondary unittheactive unit.
d)Disable thedevice management connection.
e)Change thedevice IPaddress inthemanagement center .
f)Reenable themanagement connection.
Change theManager Access Interface from Management toData
Youcanmanage thethreat defense from either thededicated Management interface, orfrom adata interface.
Ifyouwant tochange themanager access interface after youadded thedevice tothemanagement center ,
follow these steps tomigrate from theManagement interface toadatainterface. Tomigrate theother direction,
seeChange theManager Access Interface from Data toManagement ,onpage 95.
Initiating themanager access migration from Management todata causes themanagement center toapply a
block ondeployment tothethreat defense .Toremove theblock, enable manager access onthedata interface.
Seethefollowing steps toenable manager access onadatainterface, andalsoconfigure other required settings.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
91Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData

Before you begin
Forhigh-availability pairs, unless stated otherwise, perform allsteps only ontheactive unit. Once the
configuration changes aredeployed, thestandby unitsynchronizes configuration andother state information
from theactive unit.
Procedure
Step 1 Initiate theinterface migration.
a)OntheDevices >Device Management page, click Edit (
)forthedevice.
b)GototheDevice >Management section, andclick thelinkforManager Access Interface .
TheManager Access Interface field shows thecurrent Management interface. When youclick thelink,
choose thenew interface type, Data Interface ,intheManage device bydrop-down list.
Figure 21:Manager Access Interface
c)Click Save.
Youmust now complete theremaining steps inthisprocedure toenable manager access onthedata
interface. TheManagement areanow shows Manager Access Interface: Data Interface ,andManager
Access Details: Conf iguration .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
92Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData

Figure 22:Manager Access
Ifyouclick Conf iguration ,theManager Access -Conf iguration Details dialog boxopens. TheManager
Access Mode shows aDeploy pending state.
Step 2 Enable manager access onadatainterface ontheDevices >DeviceManagement >Interfaces >Edit Physical
Interface >Manager Access page.
SeeConfigure Routed Mode Interfaces ,onpage 849.Youcanenable manager access ononerouted data
interface ,plus anoptional secondary interface .Make sure these interfaces arefully configured with aname
andIPaddress andthatthey areenabled.
Ifyouuseasecondary interface forredundancy ,seeConfigure aRedundant Manager Access Data Interface ,
onpage 103foradditional required configuration.
Step 3 (Optional) IfyouuseDHCP fortheinterface, enable theweb type DDNS method ontheDevices >Device
Management >DHCP >DDNS page.
SeeConfigure Dynamic DNS ,onpage 905.DDNS ensures themanagement center canreach thethreat defense
atitsFully-Qualified Domain Name (FQDN) iftheFTD's IPaddress changes.
Step 4 Make sure thethreat defense canroute tothemanagement center through thedata interface; addastatic route
ifnecessary onDevices >Device Management >Routing >Static Route .
SeeAdd aStatic Route ,onpage 1122 .
Step 5 (Optional) Configure DNS inaPlatform Settings policy ,andapply ittothisdevice atDevices >Platf orm
Settings >DNS .
SeeDNS ,onpage 933.DNS isrequired ifyouuseDDNS. Youmay alsouseDNS forFQDNs inyour security
policies.
Step 6 (Optional) Enable SSH forthedata interface inaPlatform Settings policy ,andapply ittothisdevice at
Devices >Platf orm Settings >Secur eShell .
SeeSSH Access ,onpage 946.SSH isnotenabled bydefault onthedata interfaces, soifyouwant tomanage
thethreat defense using SSH, youneed toexplicitly allow it.
Step 7 Deploy configuration changes.
Themanagement center willdeploy theconfiguration changes over thecurrent Management interface. After
thedeployment, thedatainterface isnow ready foruse,buttheoriginal management connection toManagement
isstillactive.
Step 8 Atthethreat defense CLI(preferably from theconsole port), settheManagement interface touseastatic IP
address andsetthegateway tousethedata interfaces. Forhigh availability ,perform thissteponboth units.
configurenetw ork{ipv4 |ipv6}manual ip_addr essnetmask data-interfaces
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
93Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData

•ip_addr essnetmask —Although youdonotplan tousetheManagement interface, youmust setastatic
IPaddress, forexample, aprivate address sothatyoucansetthegateway todata-interfaces (seethe
next bullet). Youcannot useDHCP because thedefault route, which must bedata-interfaces ,might be
overwritten with onereceived from theDHCP server .
•data-interfaces —This setting forwards management trafficover thebackplane soitcanberouted through
themanager access data interface.
Werecommend thatyouusetheconsole portinstead ofanSSH connection because when youchange the
Management interface network settings, your SSH session willbedisconnected.
Step 9 Ifnecessary ,re-cable thethreat defense soitcanreach themanagement center onthedata interface. Forhigh
availability ,perform thissteponboth units.
Step 10 Inthemanagement center ,disable themanagement connection, update theRemote Host Addr essIPaddress
andoptional Secondary Addr essforthethreat defense intheDevices >Device Management >Device >
Management section, andreenable theconnection.
SeeUpdate theHostname orIPAddress intheManagement Center ,onpage 85.Ifyouused thethreat defense
hostname orjusttheNATIDwhen youadded thethreat defense tothemanagement center ,youdonotneed
toupdate thevalue; however ,youneed todisable andreenable themanagement connection torestart the
connection.
Step 11 Ensure themanagement connection isreestablished.
Inthemanagement center ,check themanagement connection status ontheDevices >DeviceManagement >
Device >Management >Manager Access -Conf iguration Details >Connection Status page.
Atthethreat defense CLI, enter thesftunnel-status-brief command toview themanagement connection
status.
Thefollowing status shows asuccessful connection foradata interface, showing theinternal "tap_nlp"
interface.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
94Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData

Figure 23:Connection Status
Ifittakes more than 10minutes toreestablish theconnection, youshould troubleshoot theconnection. See
Troubleshoot Management Connectivity onaData Interface ,onpage 118.
Change theManager Access Interface from Data toManagement
Youcanmanage thethreat defense from either thededicated Management interface, orfrom adata interface.
Ifyouwant tochange themanager access interface after youadded thedevice tothemanagement center ,
follow these steps tomigrate from adatainterface totheManagement interface. Tomigrate theother direction,
seeChange theManager Access Interface from Management toData ,onpage 91.
Initiating themanager access migration from data toManagement causes themanagement center toapply a
block ondeployment tothethreat defense .Youmust disable manager access onthedata interface toremove
theblock.
Seethefollowing steps todisable manager access onadatainterface, andalsoconfigure other required settings.
Before you begin
Forhigh-availability pairs, unless stated otherwise, perform allsteps only ontheactive unit. Once the
configuration changes aredeployed, thestandby unitsynchronizes configuration andother state information
from theactive unit.
Procedure
Step 1 Initiate theinterface migration.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
95Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Data toManagement

a)OntheDevices >Device Management page, click Edit (
)forthedevice.
b)GototheDevice >Management section, andclick thelinkforManager Access Interface .
TheManager Access Interface field shows thecurrent management interface asdata. When youclick
thelink, choose thenew interface type, Management Interface ,intheManage device bydrop-down
list.
Figure 24:Manager Access Interface
c)Click Save.
Youmust now complete theremaining steps inthisprocedure toenable manager access ontheManagement
interface. TheManagement area now shows theManager Access Interface: Management Interface ,
andManager Access Details: Conf iguration .
Figure 25:Manager Access
Ifyouclick Conf iguration ,theManager Access -Conf iguration Details dialog boxopens. TheManager
Access Mode shows aDeploy pending state.
Step 2 Disable manager access onthedata interface (s)ontheDevices >Device Management >Interfaces >Edit
Physical Interface >Manager Access page.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
96Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Data toManagement

SeeConfigure Routed Mode Interfaces ,onpage 849.This stepremoves theblock ondeployment.
Step 3 Ifyouhave notalready done so,configure DNS settings forthedata interface inaPlatform Setting policy ,
andapply ittothisdevice atDevices >Platf orm Settings >DNS .
SeeDNS ,onpage 933.Themanagement center deployment thatdisables manager access onthedatainterface
willremove anylocal DNS configuration. IfthatDNS server isused inanysecurity policy ,such asanFQDN
inanAccess Rule, then youmust re-apply theDNS configuration using themanagement center .
Step 4 Deploy configuration changes.
Themanagement center willdeploy theconfiguration changes over thecurrent data interface.
Step 5 Ifnecessary ,re-cable thethreat defense soitcanreach themanagement center ontheManagement interface.
ForHigh Availability ,perform thissteponboth units.
Step 6 Atthethreat defense CLI, configure theManagement interface IPaddress andgateway using astatic IPaddress
orDHCP .Forhigh availability ,perform thissteponboth units.
When youoriginally configured thedata interface formanager access, theManagement gateway wassetto
data-interfaces, which forwarded management trafficover thebackplane soitcould berouted through the
manager access datainterface. Younow need tosetanIPaddress forthegateway onthemanagement network.
Static IPaddr ess:
configurenetw ork{ipv4 |ipv6}manual ip_addr essnetmask gateway_ip
DHCP:
configurenetw ork{ipv4 |ipv6}dhcp
Step 7 Inthemanagement center ,disable themanagement connection, update theRemote Host Addr essIPaddress
andremove theoptional Secondary Addr essforthethreat defense intheDevices >Device Management >
Device >Management section, andreenable theconnection.
SeeUpdate theHostname orIPAddress intheManagement Center ,onpage 85.Ifyouused thethreat defense
hostname orjusttheNATIDwhen youadded thethreat defense tothemanagement center ,youdonotneed
toupdate thevalue; however ,youneed todisable andre-enable themanagement connection torestart the
connection.
Step 8 Ensure themanagement connection isreestablished.
Inthemanagement center ,check themanagement connection status ontheDevices >DeviceManagement >
Device >Management >Status field orview notifications inthemanagement center .
Atthethreat defense CLI, enter thesftunnel-status-brief command toview themanagement connection
status.
Ifittakes more than 10minutes toreestablish theconnection, youshould troubleshoot theconnection. See
Troubleshoot Management Connectivity onaData Interface ,onpage 118.
Change theManager Access Interface from Management toData inaHigh Availability Pair
Youcanmanage theFTD from either thededicated Management interface, orfrom adata interface. Ifyou
want tochange theCisco Defense Orchestrator access interface after youadded thedevice toCDO ,follow
these steps tomigrate from theManagement interface toadata interface. Tomigrate theother direction, see
Change theManager Access Interface from Data toManagement inaHigh Availability Pair,onpage 101.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
97Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData inaHigh Availability Pair

Initiating theCDO access migration from Management todatacauses theCDO toapply ablock ondeployment
totheFTD. Toremove theblock, enable CDO access onthedata interface.
Unless stated otherwise, perform allsteps mentioned inthissection only ontheactive unit. Once the
configuration changes aredeployed, thestandby unitsynchronizes configuration andother state information
from theactive unit.Note
Seethefollowing steps toenable CDO access onadata interface, andalsoconfigure other required settings.
Before you begin
Model Support —Threat Defense
Procedure
Step 1 Initiate theinterface migration.
a)Inthenavigation bar,click Inventory .
b)Click theFTD tab.
c)Select theactive device andintheManagement pane ontheright, click Device Summary .
d)Under theManagement area, click thelinkforManager Access Interface .
TheManager Access Interface field shows thecurrent management interface. When youclick thelink,
choose thenew interface type, Data Interface ,intheManage device bydrop-down list.
Thelinkisunavailable forthestandby unitastheaccess interface canbechanged ontheactive
unit.Note
e)Click Save.
Youmust now complete theremaining steps inthisprocedure toenable CDO access onthedatainterface.
TheManagement area now shows Manager Access Interface: Data Interface ,andManager Access
Details: Conf iguration .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
98Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData inaHigh Availability Pair

Figure 26:Manager Access
Ifyouclick Conf iguration ,theManager Access -Conf iguration Details dialog boxopens. TheManager
Access Mode shows aDeploy pending state.
Step 2 Enable CDO access onadata interface ontheDevices >Device Management >Interfaces >Edit Physical
Interface >Manager Access page.
SeeConfigure Routed Mode Interfaces .Youcanenable CDO access ononerouted data interface. Make sure
thisinterface isfully configured with aname andIPaddress andthatitisenabled.
Step 3 Make suretheFTD canroute totheCDO through thedatainterface; addastatic route ifnecessary onDevices >
Device Management >Routing >Static Route .
SeeAdd aStatic Route ,onpage 1122 .
Step 4 (Optional) Configure DNS inaPlatform Settings policy ,andapply ittothisdevice atDevices >Platf orm
Settings >DNS .
DNS ,onpage 933.DNS isrequired ifyouuseDDNS. Youmay alsouseDNS forFQDNs inyour security
policies.
Step 5 (Optional) Enable SSH forthedata interface inaPlatform Settings policy ,andapply ittothisdevice at
Devices >Platf orm Settings >Secur eShell .
SeeSSH Access ,onpage 946.SSH isnotenabled bydefault onthedata interfaces, soifyouwant tomanage
theFTD using SSH, youneed toexplicitly allow it.
Step 6 Deploy configuration changes.
TheCDO willdeploy theconfiguration changes over thecurrent Management interface. After thedeployment,
thedatainterface isnow ready foruse,buttheoriginal management connection toManagement isstillactive.
Step 7 AttheFTD CLI(preferably from theconsole port), settheManagement interface touseastatic IPaddress
andsetthegateway tousethedata interfaces.
configurenetw ork{ipv4 |ipv6}manual ip_addr essnetmask data-interfaces
•ip_addr essnetmask —Although youdonotplan tousetheManagement interface, youmust setastatic
IPaddress, forexample, aprivate address sothatyoucansetthegateway todata-interfaces (seethe
next bullet).
•data-interfaces —This setting forwards management trafficover thebackplane soitcanberouted through
theCDO access data interface.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
99Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData inaHigh Availability Pair

Werecommend thatyouusetheconsole portinstead ofanSSH connection because when youchange the
Management interface network settings, your SSH session willbedisconnected.
Repeat thissteponthestandby unit. Note
Step 8 When thedeployment completes around 90percent, thenewmanagement interface takes effect. Atthisstage,
youmust re-cable theFTD sothattheCDO reaches FTD onthedata interface andcompletes thedeployment
successfully .
After youre-cable, thedeployment may failifittimed outbefore re-establishing themanagement connection
tothenew interface. Inthatcase, youmust reinitiate thedeployment after re-cabling forasuccessful
deployment.
Repeat thissteponthestandby unit. Note
Step 9 Ensure themanagement connection isreestablished.
InCDO ,check themanagement connection status ontheDevices >Device Management >Device >
Management >Manager Access -Conf iguration Details >Connection Status page.
AttheFTD CLI, enter thesftunnel-status-brief command toview themanagement connection status.
Thefollowing status shows asuccessful connection foradata interface, showing theinternal "tap_nlp"
interface.
Figure 27:Connection Status
Ifittakes more than 10minutes toreestablish theconnection, youshould troubleshoot theconnection. See
Troubleshoot Management Connectivity onaData Interface ,onpage 118.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
100Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Management toData inaHigh Availability Pair

Change theManager Access Interface from Data toManagement inaHigh Availability Pair
Youcanmanage theFTD from either thededicated Management interface, orfrom adata interface. Ifyou
want tochange theCisco Defense Orchestrator access interface after youadded thedevice toCDO ,follow
these steps tomigrate from aData interface totheManagement interface. Tomigrate theother direction, see
Change theManager Access Interface from Management toData inaHigh Availability Pair,onpage 97.
Initiating theCDO access migration from datatoManagement causes theCDO toapply ablock ondeployment
totheFTD. Youmust disable CDO access onthedata interface toremove theblock.
Unless stated otherwise, perform allsteps mentioned inthissection only ontheactive unit. Once the
configuration changes aredeployed, thestandby unitsynchronizes configuration andother state information
from theactive unit.Note
Seethefollowing steps todisable CDO access onadata interface, andalsoconfigure other required settings.
Procedure
Step 1 Initiate theinterface migration.
a)Inthenavigation bar,click Inventory .
b)Click theFTD tab.
c)Select theactive device andintheManagement pane ontheright, click Device Summary .
d)Under theManagement area, click thelinkforManager Access Interface .
TheManager Access Interface field shows thecurrent management interface asdata. When youclick
thelink, choose thenew interface type, Management Interface ,intheManage device bydrop-down
list.
Thelinkisunavailable forthestandby unitastheaccess interface canbechanged ontheactive
unit.Note
e)Click Save.
Youmust now complete theremaining steps inthisprocedure toenable CDO access onthedatainterface.
TheManagement areanowshows theManager Access Interface: Management Interface ,andManager
Access Details: Conf iguration .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
101Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Data toManagement inaHigh Availability Pair

Figure 28:Manager Access
Ifyouclick Conf iguration ,theManager Access -Conf iguration Details dialog boxopens. TheManager
Access Mode shows aDeploy pending state.
Step 2 Disable CDO access onadata interface ontheDevices >Device Management >Interfaces >Edit Physical
Interface >FMC Access page.
SeeConfigure Routed Mode Interfaces .This stepremoves theblock ondeployment.
Step 3 Ifyouhave notalready done so,configure DNS settings forthedata interface inaPlatform Setting policy ,
andapply ittothisdevice atDevices >Platf orm Settings >DNS .
SeeDNS ,onpage 933.TheCDO deployment thatdisables CDO access onthedatainterface willremove any
local DNS configuration. IfthatDNS server isused inanysecurity policy ,such asanFQDN inanAccess
Rule, then youmust re-apply theDNS configuration using CDO .
Step 4 Deploy configuration changes.
TheCDO willdeploy theconfiguration changes over thecurrent data interface.
Step 5 When thedeployment completes around 90percent, thenewmanagement interface takes effect. Atthisstage,
youmust re-cable theFTD sothattheCDO reaches FTD ontheManagement interface andcompletes the
deployment successfully .
After youre-cable, thedeployment may failifittimed outbefore re-establishing themanagement connection
tothenew interface. Inthatcase, youmust reinitiate thedeployment after re-cabling forasuccessful
deployment.
Repeat thissteponthestandby unit. Note
Step 6 AttheFTD CLI, configure theManagement interface IPaddress andgateway using astatic IPaddress or
DHCP .
When youoriginally configured thedata interface forCDO access, theManagement gateway wassetto
data-interfaces, which forwarded management trafficover thebackplane soitcould berouted through the
CDO access data interface. Younow need tosetanIPaddress forthegateway onthemanagement network.
Static IPaddr ess:
configurenetw ork{ipv4 |ipv6}manual ip_addr essnetmask gateway_ip
DHCP:
configurenetw ork{ipv4 |ipv6}dhcp
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
102Onboard Devices toCloud-delivered Firewall Management Center
Change theManager Access Interface from Data toManagement inaHigh Availability Pair

Repeat thissteponthestandby unit. Note
Step 7 Ensure themanagement connection isreestablished.
InCDO ,check themanagement connection status ontheDevices >Device Management >Device >
Management >Status field orview notifications inCDO .
AttheFTD CLI, enter thesftunnel-status-brief command toview themanagement connection status.
Ifittakes more than 10minutes toreestablish theconnection, youshould troubleshoot theconnection. See
Troubleshoot Management Connectivity onaData Interface ,onpage 118.
Configure aRedundant Manager Access Data Interface
When youuseadata interface formanager access, youcanconfigure asecondary data interface totake over
management functions iftheprimary interface goes down. Youcanconfigure only onesecondary interface.
Thedevice uses SLA monitoring totrack theviability ofthestatic routes andanECMP zone thatcontains
both interfaces somanagement trafficcanuseboth interfaces.
High availability isnotsupported.
Before you begin
•Thesecondary interface needs tobeinaseparate security zone from theprimary interface.
•Allofthesame requirements apply tothesecondary interface asapply totheprimary interface. SeeUsing
theThreat Defense Data Interface forManagement .
Procedure
Step 1 OntheDevices >Device Management page, click Edit (
)forthedevice.
Step 2 Enable manager access forthesecondary interface.
This setting isinaddition tostandard interface settings such asenabling theinterface, setting thename, setting
thesecurity zone, andsetting astatic IPv4 address.
a)Choose Interfaces >Edit Physical Interface >Manager Access .
b)Check Enable management onthisinterface fortheManager .
c)Click OK.
Both inetrfaces show (Manager Access) intheinterface listing.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
103Onboard Devices toCloud-delivered Firewall Management Center
Configure aRedundant Manager Access Data Interface

Figure 29:Interface Listing
Step 3 Add thesecondary address totheManagement settings.
a)Click Device,andview theManagement area.
b)Click Edit (
).
Figure 30:Edit Management Address
c)IntheManagement dialog box, modify thename orIPaddress intheSecondary Addr essfield
Figure 31:Management IPAddress
d)Click Save.
Step 4 Create anECMP zone with both interfaces.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
104Onboard Devices toCloud-delivered Firewall Management Center
Configure aRedundant Manager Access Data Interface

a)Click Routing .
b)From thevirtual router drop-down, choose thevirtual router inwhich theprimary andsecondary interfaces
reside.
c)Click ECMP ,andthen click Add.
d)Enter aName fortheECMP zone.
e)Select theprimary andsecondary interfaces under theAvailable Interfaces box, andthen click Add.
Figure 32:Add anECMP Zone
f)Click OK,andthen Save.
Step 5 Add equal-cost default static routes forboth interfaces andenable SLA tracking onboth.
Theroutes should beidentical except forthegateway andshould both have metric 1.Theprimary interface
should already have adefault route thatyoucanedit.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
105Onboard Devices toCloud-delivered Firewall Management Center
Configure aRedundant Manager Access Data Interface

Figure 33:Add/Edit Static Route
a)Click Static Route .
b)Either click Add Route toaddanew route, orclick Edit (
)foranexisting route.
c)From theInterface drop-down, choose theinterface.
d)Forthedestination network, select any-ipv4 from theAvailable Netw orks boxandclick Add.
e)Enter thedefault Gateway .
f)ForRoute Tracking ,click Add (
)toaddanew SLA monitor object.
g)Enter therequired parameters including thefollowing:
•TheMonitor Addr essasthemanagement center IPaddress.
•Thezone fortheprimary orsecondary management interface inAvailable Zones ;forexample,
choose theoutside zone fortheprimary interface object, andthemgmt zone forthesecondary interface
object.
SeeSLA Monitor ,onpage 1386 formore information.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
106Onboard Devices toCloud-delivered Firewall Management Center
Configure aRedundant Manager Access Data Interface

Figure 34:Add SLA Monitor
h)Click Save,then choose theSLA object youjustcreated intheRoute Tracking drop-down list.
i)Click OK,andthen Save.
j)Repeat forthedefault route fortheother management interface.
Step 6 Deploy configuration changes.
Aspartofthedeployment forthisfeature, themanagement center enables thesecondary interface for
management traffic,including auto-generated policy-based routing configuration formanagement trafficto
gettotheright datainterface. Themanagement center alsodeploys asecond instance oftheconfigurenetw ork
management-data-interface command. Note thatifyoueditthesecondary interface attheCLI, youcannot
configure thegateway orotherwise alter thedefault route, because thestatic route forthisinterface canonly
beedited inthemanagement center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
107Onboard Devices toCloud-delivered Firewall Management Center
Configure aRedundant Manager Access Data Interface

Modify Threat Defense Management Interfaces attheCLI
Modify themanagement interface settings onthemanaged device using theCLI. Many ofthese settings are
ones thatyousetwhen youperformed theinitial setup; thisprocedure letsyouchange those settings, andset
additional settings such asenabling anevent interface ifyour model supports it,oradding static routes.
This topic applies tothededicated Management interface. Youcanalternatively configure adata interface
formanagement. Ifyouwant tochange network settings forthatinterface, youshould dosowithin management
center andnotattheCLI. Ifyouneed totroubleshoot adisrupted management connection, andneed tomake
changes directly onthethreat defense ,seeModify theThreat Defense Data Interface Used forManagement
attheCLI,onpage 114.Note
Forinformation about thethreat defense CLI, seetheCisco Secure Firewall Threat Defense Command
Reference .
When using SSH, becareful when making changes tothemanagement interface; ifyoucannot re-connect
because ofaconfiguration error ,youwillneed toaccess thedevice console port.Note
Ifyouchange thedevice management IPaddress, then seethefollowing tasks formanagement center
connectivity depending onhow youidentified themanagement center during initial device setup using the
configuremanager addcommand:
•IPaddr ess—Noaction. Ifyouidentified themanagement center using areachable IPaddress, then the
management connection willbereestablished automatically after several minutes. Werecommend that
youalsochange thedevice IPaddress shown inmanagement center tokeep theinformation insync; see
Update theHostname orIPAddress intheManagement Center ,onpage 85.This action canhelp the
connection reestablish faster .Note :Ifyouspecified anunreachable management center IPaddress, then
seetheprocedure forNATIDbelow .
•NATIDonly—Manually reestablish theconnection. Ifyouidentified themanagement center using
only theNATID,then theconnection cannot beautomatically reestablished. Inthiscase, change the
device management IPaddress inmanagement center according toUpdate theHostname orIPAddress
intheManagement Center ,onpage 85.Note
InaHigh Availability management center configuration, when youmodify themanagement IPaddress from
thedevice CLIorfrom themanagement center ,thesecondary management center does notreflect thechanges
even after anHAsynchronization. Toensure thatthesecondary management center isalsoupdated, switch
roles between thetwomanagement center s,making thesecondary management center theactive unit. Modify
themanagement IPaddress oftheregistered device onthedevice management page ofthenow active
management center .Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
108Onboard Devices toCloud-delivered Firewall Management Center
Modify Threat Defense Management Interfaces attheCLI

Before you begin
•Youcancreate user accounts thatcanlogintotheCLIusing theconfigureuser addcommand ;seeAdd
anInternal User attheCLI,onpage 163.Youcanalsoconfigure AAA users according toExternal
Authentication ,onpage 936.
Procedure
Step 1 Connect tothedevice CLI, either from theconsole portorusing SSH.
Step 2 Loginwith theAdmin username andpassword.
Step 3 (Firepower 4100/9300 only) Enable thesecond management interface asanevent-only interface.
configurenetw orkmanagement-interface enable management1
configurenetw orkmanagement-interface disable-management-channel management1
Youalways need amanagement interface formanagement traffic.Ifyour device hasasecond management
interface, youcanenable itforevent-only traffic.
Youcanoptionally disable events forthemain management interface using theconfigurenetw ork
management-interface disable-e vents-channel command. Ineither case, thedevice willtrytosend events
ontheevent-only interface, andifthatinterface isdown, itwillsend events onthemanagement interface even
ifyoudisable theevent channel.
Youcannot disable both event andmanagement channels onaninterface.
Touseaseparate event interface, youalsoneed toenable anevent interface onthemanagement center .See
theCisco Secure Firewall Management Center Administration Guide .
Example:
>configure network management-interface enablemanagement1
Configuration updated successfully
>configure network management-interface disable-management-channel management1
Configuration updated successfully
>
Step 4 Configure theIPaddress ofthemanagement interface and/or event interface:
Ifyoudonotspecify themana gement_interface argument, then youchange thenetwork settings forthedefault
management interface. When configuring anevent interface, besure tospecify themana gement_interface
argument. Theevent interface canbeonaseparate network from themanagement interface, oronthesame
network. Ifyouareconnected totheinterface youareconfiguring, youwillbedisconnected. Youcanre-connect
tothenew IPaddress.
a)Configure theIPv4 address:
•Manual configuration:
configurenetw orkipv4 manual ip_addr essnetmask gateway_ip [mana gement_interface ]
Note thatthegateway_ip inthiscommand isused tocreate thedefault route forthedevice. Ifyou
configure anevent-only interface, then youmust enter thegateway_ip aspartofthecommand;
however ,thisentry justconfigures thedefault route tothevalue youspecify anddoes notcreate a
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
109Onboard Devices toCloud-delivered Firewall Management Center
Modify Threat Defense Management Interfaces attheCLI

separate static route fortheeventing interface. Ifyouareusing anevent-only interface onadifferent
network from themanagement interface, werecommend thatyousetthegateway_ip forusewith
themanagement interface, andthen create astatic route separately fortheevent-only interface using
theconfigurenetw orkstatic-r outes command.
Example:
>configure network ipv4manual10.10.10.45 255.255.255.0 10.10.10.1 management1
Setting IPv4network configuration.
Network settings changed.
>
•DHCP (supported onthedefault management interface only):
configurenetw orkipv4 dhcp
b)Configure theIPv6 address:
•Stateless autoconfiguration:
configurenetw orkipv6 router [mana gement_interface ]
Example:
>configure network ipv6routermanagement0
Setting IPv6network configuration.
Network settings changed.
>
•Manual configuration:
configurenetw orkipv6 manual ip6_addr essip6_pr efix_length [ip6_gate way_ip ]
[mana gement_interface ]
Note thattheipv6_gate way_ip inthiscommand isused tocreate thedefault route forthedevice. If
youconfigure anevent-only interface, then youmust enter theipv6_gate way_ip aspartofthe
command; however ,thisentry justconfigures thedefault route tothevalue youspecify anddoes not
create aseparate static route fortheeventing interface. Ifyouareusing anevent-only interface ona
different network from themanagement interface, werecommend thatyousettheipv6_gate way_ip
forusewith themanagement interface, andthen create astatic route separately fortheevent-only
interface using theconfigurenetw orkstatic-r outes command.
Example:
>configure network ipv6manual2001:0DB8:BA98::3210 64management1
Setting IPv6network configuration.
Network settings changed.
>
•DHCPv6 (supported onthedefault management interface only):
configurenetw orkipv6 dhcp
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
110Onboard Devices toCloud-delivered Firewall Management Center
Modify Threat Defense Management Interfaces attheCLI

Step 5 ForIPv6, enable ordisable ICMPv6 Echo Replies andDestination Unreachable messages. These messages
areenabled bydefault.
configurenetw orkipv6 destination-unr eachable {enable |disable }
configurenetw orkipv6 echo-r eply {enable |disable }
Youmight want todisable these packets toguard against potential denial ofservice attacks. Disabling Echo
Reply packets means youcannot useIPv6 ping tothedevice management interfaces fortesting purposes.
Example:
>configure network ipv6destination-unreachable disable
>configure network ipv6echo-reply disable
Step 6 Enable aDHCP server onthedefault management interface toprovide IPaddresses toconnected hosts:
configurenetw orkipv4 dhcp-ser ver-enable start_ip_addr essend_ip_addr ess
Example:
>configure network ipv4dhcp-server-enable 10.10.10.200 10.10.10.254
DHCPServerEnabled
>
Youcanonly configure aDHCP server when yousetthemanagement interface IPaddress manually .This
command isnotsupported onthemanagement center virtual .Todisplay thestatus oftheDHCP server ,enter
shownetw ork-dhcp-ser ver:
>shownetwork-dhcp-server
DHCPServerEnabled
10.10.10.200-10.10.10.254
Step 7 Add astatic route fortheevent-only interface ifthemanagement center isonaremote network; otherwise,
alltrafficwillmatch thedefault route through themanagement interface.
configurenetw orkstatic-r outes {ipv4 |ipv6}addmana gement_interface destination_ip netmask_or_pr efix
gateway_ip
Forthedefault route, donotusethiscommand; youcanonly change thedefault route gateway IPaddress
when youusetheconfigurenetw orkipv4 oripv6 commands (seeStep 4,onpage 109).
Example:
>configure network static-routes ipv4addmanagement1 192.168.6.0 255.255.255.0 10.10.10.1
Configuration updated successfully
>configure network static-routes ipv6addmanagement1 2001:0DB8:AA89::5110 64
2001:0DB8:BA98::3211
Configuration updated successfully
>
Todisplay static routes, enter shownetw ork-static-r outes (thedefault route isnotshown):
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
111Onboard Devices toCloud-delivered Firewall Management Center
Modify Threat Defense Management Interfaces attheCLI

>shownetwork-static-routes
---------------[ IPv4StaticRoutes]---------------
Interface :management1
Destination :192.168.6.0
Gateway :10.10.10.1
Netmask :255.255.255.0
[…]
Step 8 Setthehostname:
configurenetw orkhostname name
Example:
>configure network hostname farscape1.cisco.com
Syslog messages donotreflect anew hostname until after areboot.
Step 9 Setthesearch domains:
configurenetw orkdnssearchdomains domain_list
Example:
>configure network dnssearchdomains example.com,cisco.com
Setthesearch domain(s) forthedevice, separated bycommas. These domains areadded tohostnames when
youdonotspecify afully-qualified domain name inacommand, forexample, ping system .Thedomains are
used only onthemanagement interface, orforcommands thatgothrough themanagement interface.
Step 10 Setupto3DNS servers, separated bycommas:
configurenetw orkdnsserversdns_ip_list
Example:
>configure network dnsservers 10.10.6.5,10.20.89.2,10.80.54.3
Step 11 Settheremote management portforcommunication with themanagement center :
configurenetw orkmanagement-interface tcpport number
Example:
>configure network management-interface tcpport 8555
Themanagement center andmanaged devices communicate using atwo-way ,TLS-1.3-encrypted
communication channel, which bydefault isonport8305.
Cisco strongly recommends thatyoukeep thedefault settings fortheremote management port, but
ifthemanagement portconflicts with other communications onyour network, youcanchoose a
different port. Ifyouchange themanagement port, youmust change itforalldevices inyour deployment
thatneed tocommunicate with each other .Note
Step 12 (Threat Defense only) Setthemanagement oreventing interface MTU. TheMTU is1500 bytes bydefault.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
112Onboard Devices toCloud-delivered Firewall Management Center
Modify Threat Defense Management Interfaces attheCLI

configurenetw orkmtu [bytes ][interface_id ]
•bytes —Sets theMTU inbytes. Forthemanagement interface, thevalue canbebetween 64and1500 if
youenable IPv4, and1280 to1500 ifyouenable IPv6. Fortheeventing interface, thevalue canbe
between 64and9000 ifyouenable IPv4, and1280 to9000 ifyouenable IPv6. Ifyouenable both IPv4
andIPv6, then theminimum is1280. Ifyoudonotenter thebytes ,youareprompted foravalue.
•interface_id —Specifies theinterface IDonwhich tosettheMTU. Usetheshownetw orkcommand to
seeavailable interface IDs, forexample management0, management1, br1,andeth0, depending onthe
platform. Ifyoudonotspecify aninterface, then themanagement interface isused.
Example:
>configure network mtu8192management1
MTUsetsuccessfully to1500from8192formanagement1
Refreshing Network Config...
NetworkSettings::refreshNetworkConfig MTUvalueatstart8192
Interface management1 speedissetto'10000baseT/Full'
NetworkSettings::refreshNetworkConfig MTUvalueatend8192
>
Step 13 Configure anHTTP proxy .Thedevice isconfigured todirectly-connect totheinternet onports TCP/443
(HTTPS) andTCP/80 (HTTP). Youcanuseaproxy server ,towhich youcanauthenticate viaHTTP Digest.
After issuing thecommand, youareprompted fortheHTTP proxy address andport, whether proxy
authentication isrequired, andifitisrequired, theproxy username, proxy password, andconfirmation ofthe
proxy password.
Forproxy password onthreat defense ,youcanuseA-Z, a-z,and0-9characters only. Note
configurenetw orkhttp-pr oxy
Example:
>configure network http-proxy
Manualproxyconfiguration
EnterHTTPProxyaddress: 10.100.10.10
EnterHTTPProxyPort:80
UseProxyAuthentication? (y/n)[n]:Y
EnterProxyUsername: proxyuser
EnterProxyPassword: proxypassword
Confirm ProxyPassword: proxypassword
Step 14 Ifyouchange thedevice management IPaddress, then seethefollowing tasks formanagement center
connectivity depending onhow youidentified themanagement center during initial device setup using the
configuremanager addcommand:
•IPaddr ess—Noaction. Ifyouidentified themanagement center using areachable IPaddress, then the
management connection willbereestablished automatically after several minutes. Werecommend that
youalsochange thedevice IPaddress shown inmanagement center tokeep theinformation insync; see
Update theHostname orIPAddress intheManagement Center ,onpage 85.This action canhelp the
connection reestablish faster .Note :Ifyouspecified anunreachable management center IPaddress, then
youmust manually reestablish theconnection using Update theHostname orIPAddress inthe
Management Center ,onpage 85.
•NATIDonly—Manually reestablish theconnection. Ifyouidentified themanagement center using
only theNATID,then theconnection cannot beautomatically reestablished. Inthiscase, change the
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
113Onboard Devices toCloud-delivered Firewall Management Center
Modify Threat Defense Management Interfaces attheCLI

device management IPaddress inmanagement center according toUpdate theHostname orIPAddress
intheManagement Center ,onpage 85.
Modify theThreat Defense Data Interface Used forManagement attheCLI
Ifthemanagement connection between thethreat defense andthemanagement center wasdisrupted, andyou
want tospecify anew data interface toreplace theoldinterface, usethethreat defense CLItoconfigure the
new interface. This procedure assumes youwant toreplace theoldinterface with anew interface onthesame
network. Ifthemanagement connection isactive, then youshould make anychanges toanexisting data
interface using themanagement center .Forinitial setup ofthedata management interface, seetheconfigure
netw orkmanagement-data-interface command.
Forhigh-availability pairs, perform allCLIsteps onboth units. Within themanagement center ,perform steps
only ontheactive unit. Once theconfiguration changes aredeployed, thestandby unitsynchronizes
configuration andother state information from theactive unit.
This topic applies tothedata interface thatyouconfigured forManagement, notthededicated Management
interface. Ifyouwant tochange network settings fortheManagement interface, seeModify Threat Defense
Management Interfaces attheCLI,onpage 108.Note
Forinformation about thethreat defense CLI, seetheCisco Secure Firewall Threat Defense Command
Reference .
Before you begin
Youcancreate user accounts thatcanlogintotheCLIusing theconfigureuser addcommand. Youcanalso
configure AAA users according toExternal Authentication ,onpage 936.
Procedure
Step 1 Ifyouarechanging thedata management interface toanew interface, move thecurrent interface cable tothe
new interface.
Step 2 Connect tothedevice CLI.
Youshould usetheconsole portwhen using these commands. Ifyouareperforming initial setup, then you
may bedisconnected from theManagement interface. Ifyouareediting theconfiguration duetoadisrupted
management connection, andyouhave SSH access tothededicated Management interface, then youcanuse
thatSSH connection.
Step 3 Loginwith theAdmin username andpassword.
Step 4 Disable theinterface soyoucanreconfigure itssettings.
configurenetw orkmanagement-data-interface disable
Example:
>configure network management-data-interface disable
Configuration updated successfully..!!
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
114Onboard Devices toCloud-delivered Firewall Management Center
Modify theThreat Defense Data Interface Used forManagement attheCLI

Configuration disable wassuccessful, pleaseupdatethedefault routetopointtoagateway
onmanagement interface usingthecommand 'configure network'
Step 5 Configure thenew data interface formanager access.
configurenetw orkmanagement-data-interface
Youarethen prompted toconfigure basic network settings forthedata interface.
When youchange thedatamanagement interface toanewinterface onthesame network, usethesame settings
asfortheprevious interface except theinterface ID.Inaddition, fortheDoyouwish toclear allthedevice
configuration beforeapplying ?(y/n) [n]:option, choose y.This choice willclear theolddata management
interface configuration, sothatyoucansuccessfully reuse theIPaddress andinterface name onthenew
interface.
>configure network management-data-interface
Datainterface touseformanagement: ethernet1/4
Specify anamefortheinterface [outside]: internet
IPaddress (manual /dhcp)[dhcp]: manual
IPv4/IPv6 address: 10.10.6.7
Netmask/IPv6 Prefix: 255.255.255.0
Default Gateway: 10.10.6.1
Comma-separated listofDNSservers [none]: 208.67.222.222,208.67.220.220
DDNSserverupdateURL[none]:
Doyouwishtoclearallthedeviceconfiguration beforeapplying ?(y/n)[n]:y
Configuration donewithoptiontoallowmanager accessfromanynetwork, ifyouwishto
changethemanager accessnetwork
usethe'client' optioninthecommand 'configure network management-data-interface'.
Setting IPv4network configuration.
Network settings changed.
>
Step 6 (Optional) Limit data interface access tothemanagement center onaspecific network.
configurenetw orkmanagement-data-interface client ip_addr essnetmask
Bydefault, allnetworks areallowed.
Step 7 Theconnection willbereestablished automatically ,butdisabling andreenabling theconnection inthe
management center willhelp theconnection reestablish faster .SeeUpdate theHostname orIPAddress inthe
Management Center ,onpage 85.
Step 8 Check thatthemanagement connection wasreestablished.
sftunnel-status-brief
Seethefollowing sample output foraconnection thatisup,with peer channel andheartbeat information
shown:
>sftunnel-status-brief
PEER:10.10.17.202
Peerchannel Channel-A isvalidtype(CONTROL), using'eth0', connected to'10.10.17.202'
via'10.10.17.222'
Peerchannel Channel-B isvalidtype(EVENT), using'eth0', connected to'10.10.17.202' via
'10.10.17.222'
Registration: Completed.
IPv4Connection topeer'10.10.17.202' StartTime:WedJun1014:27:12 2020UTC
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
115Onboard Devices toCloud-delivered Firewall Management Center
Modify theThreat Defense Data Interface Used forManagement attheCLI

Heartbeat SendTime:MonJun1509:02:08 2020UTC
Heartbeat Received Time:MonJun1509:02:16 2020UTC
Step 9 Inthemanagement center ,choose Devices >Device Management >Device >Management >Manager
Access -Conf iguration Details ,andclick Refr esh.
Themanagement center detects theinterface anddefault route configuration changes, andblocks deployment
tothethreat defense .When youchange thedata interface settings locally onthedevice, youmust reconcile
those changes inthemanagement center manually .Youcanview thediscrepancies between themanagement
center andthethreat defense ontheConf iguration tab.
Step 10 Choose Devices >Device Management >Interfaces ,andmake thefollowing changes.
a)Remove theIPaddress andname from theolddata management interface, anddisable manager access
forthisinterface.
b)Configure thenew data management interface with thesettings oftheoldinterface (theones youused at
theCLI), andenable manager access forit.
Step 11 Choose Devices >Device Management >Routing >Static Route andchange thedefault route from theold
data management interface tothenew one.
Step 12 Return totheManager Access -Conf iguration Details dialog box, andclick Ackno wledge toremove the
deployment block.
Thenext time youdeploy ,themanagement center configuration willoverwrite anyremaining conflicting
settings onthethreat defense .Itisyour responsibility tomanually fixtheconfiguration inthemanagement
center before youre-deploy .
Youwillseeexpected messages of"Config wascleared” and“Manager access changed andacknowledged.”
Manually Roll Back theConfiguration iftheManagement Center Loses Connectivity
Ifyouuseadata interface onthethreat defense formanager access, andyoudeploy aconfiguration change
from themanagement center thataffects thenetwork connectivity ,youcanrollback theconfiguration onthe
threat defense tothelast-deployed configuration soyoucanrestore management connectivity .Youcanthen
adjust theconfiguration settings inmanagement center sothatthenetwork connectivity ismaintained, and
re-deploy .Youcanusetherollback feature even ifyoudonotloseconnectivity; itisnotlimited tothis
troubleshooting situation.
Alternatively ,youcanenable auto rollback oftheconfiguration ifyouloseconnectivity after adeployment;
seeEdit Deployment Settings ,onpage 133.
Seethefollowing guidelines:
•Only theprevious deployment isavailable locally onthethreat defense ;youcannot rollback toany
earlier deployments.
•Rollback issupported forhigh availability butnotsupported forclustering deployments.
•Rollback isnotsupported immediately after high availability creation.
•Therollback only affects configurations thatyoucansetinthemanagement center .Forexample, the
rollback does notaffectanylocal configuration related tothededicated Management interface, which
youcanonly configure atthethreat defense CLI. Note thatifyouchanged data interface settings after
thelastmanagement center deployment using theconfigurenetw orkmanagement-data-interface
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
116Onboard Devices toCloud-delivered Firewall Management Center
Manually Roll Back theConfiguration iftheManagement Center Loses Connectivity

command, andthen youusetherollback command, those settings willnotbepreserved; they willroll
back tothelast-deployed management center settings.
•UCAPL/CC mode cannot berolled back.
•Out-of-band SCEP certificate data thatwasupdated during theprevious deployment cannot berolled
back.
•During therollback, connections willdrop because thecurrent configuration willbecleared.
Procedure
Step 1 Atthethreat defense CLI, rollback totheprevious configuration.
configurepolicy rollback
Forahigh availability pair,thiscommand isallowed only ontheactive unit. Note
After therollback, thethreat defense notifies themanagement center thattherollback wascompleted
successfully .Inthemanagement center ,thedeployment screen willshow abanner stating thattheconfiguration
wasrolled back.
Iftherollback failed andthemanagement center management isrestored, refer to
https://www .cisco.com/c/en/us/support/docs/security/firepower-ngfw-virtual/
215258-troubleshooting-firepower-threat-defense.html forcommon deployment problems. Insome
cases, therollback canfailafter themanagement center management access isrestored; inthiscase,
youcanresolve themanagement center configuration issues, andredeploy from themanagement
center .Note
Example:
Forthethreat defense thatuses adata interface formanager access:
>configure policyrollback
Thelastdeployment tothisFTDwasonJune1,2020anditsstatuswasSuccessful.
Doyouwanttocontinue [Y/N]?
Y
Rolling backcomplete configuration ontheFTD.Thiswilltaketime.
.....................
Policyrollback wassuccessful ontheFTD.
Configuration hasbeenreverted backtotransaction id:
Following istherollback summary:
...................
....................
>
Example:
Forthreat defense sinahigh availability pairthatuseadata interface formanagement center access:
>configure policyrollback
Checking Eligibility ....
============= DEVICEDETAILS =============
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
117Onboard Devices toCloud-delivered Firewall Management Center
Manually Roll Back theConfiguration iftheManagement Center Loses Connectivity

DeviceVersion: 7.2.0
DeviceType:FTD
DeviceMode:Offbox
DeviceinHA:true
IsHAdisabled: false
HAstate:active-standby ready
==========================================
Deviceiseligible forpolicyrollback
Doyouwanttocontinue [YES/NO]?
YES
Starting rollback...
Preparing policyconfiguration onthedevice. Status: success
Applying updated policyconfiguration onthedevice. Status: success
Applying LinaFileConfiguration onthedevice. Status: success
Applying LinaConfiguration onthedevice. Status: success
CommitLinaConfiguration. Status: success
CommitLinaFileConfiguration. Status: success
CommitLinaFileConfiguration. Status: success
=================================================================
POLICYROLLBACK STATUS: SUCCESS
=================================================================
>
Step 2 Check thatthemanagement connection wasreestablished.
Inmanagement center ,check themanagement connection status ontheDevices >Device Management >
Device >Management >Manager Access -Conf iguration Details >Connection Status page.
Atthethreat defense CLI, enter thesftunnel-status-brief command toview themanagement connection
status.
Ifittakes more than 10minutes toreestablish theconnection, youshould troubleshoot theconnection. See
Troubleshoot Management Connectivity onaData Interface ,onpage 118.
Troubleshoot Management Connectivity onaData Interface
When youuseadata interface formanager access instead ofusing thededicated Management interface, you
must becareful about changing theinterface andnetwork settings forthethreat defense inthemanagement
center soyoudonotdisrupt theconnection. Ifyouchange themanagement interface type after youaddthe
threat defense tothemanagement center (from data toManagement, orfrom Management todata), ifthe
interfaces andnetwork settings arenotconfigured correctly ,youcanlosemanagement connectivity .
This topic helps youtroubleshoot thelossofmanagement connectivity .
Viewmanagement connection status
Inthemanagement center ,check themanagement connection status ontheDevices >Device
Management >Device >Management >Manager Access -Conf iguration Details >Connection
Status page.
Atthethreat defense CLI, enter thesftunnel-status-brief command toview themanagement connection
status. Youcanalsousesftunnel-status toview more complete information.
Seethefollowing sample output foraconnection thatisdown; there isnopeer channel "connected to"
information, norheartbeat information shown:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
118Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface

>sftunnel-status-brief
PEER:10.10.17.202
Registration: Completed.
Connection topeer'10.10.17.202' Attempted atMonJun1509:21:57 2020UTC
Lastdisconnect time:MonJun1509:19:09 2020UTC
Lastdisconnect reason:Bothcontrol andeventchannel connections withpeerwentdown
Seethefollowing sample output foraconnection thatisup,with peer channel andheartbeat information
shown:
>sftunnel-status-brief
PEER:10.10.17.202
Peerchannel Channel-A isvalidtype(CONTROL), using'eth0', connected to'10.10.17.202'
via'10.10.17.222'
Peerchannel Channel-B isvalidtype(EVENT), using'eth0', connected to'10.10.17.202'
via'10.10.17.222'
Registration: Completed.
IPv4Connection topeer'10.10.17.202' StartTime:WedJun1014:27:12 2020UTC
Heartbeat SendTime:MonJun1509:02:08 2020UTC
Heartbeat Received Time:MonJun1509:02:16 2020UTC
Viewthethreatdefense netw orkinformation
Atthethreat defense CLI, view theManagement andmanager access data interface network settings:
shownetw ork
>shownetwork
===============[ SystemInformation ]===============
Hostname :FTD-4
Domains :cisco.com
DNSServers :72.163.47.11
DNSfromrouter :enabled
Management port :8305
IPv4Default route
Gateway :data-interfaces
==================[ management0 ]===================
AdminState :enabled
AdminSpeed :1gbps
Operation Speed :1gbps
Link :up
Channels :Management &Events
Mode :Non-Autonegotiation
MDI/MDIX :Auto/MDIX
MTU :1500
MACAddress :68:87:C6:A6:54:80
----------------------[ IPv4]----------------------
Configuration :Manual
Address :10.89.5.4
Netmask :255.255.255.192
Gateway :169.254.1.1
----------------------[ IPv6]----------------------
Configuration :Disabled
===============[ ProxyInformation ]================
State :Disabled
Authentication :Disabled
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
119Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface

======[ SystemInformation -DataInterfaces ]======
DNSServers :72.163.47.11
Interfaces :Ethernet1/1
==================[ Ethernet1/1 ]===================
State :Enabled
Link :Up
Name :outside
MTU :1500
MACAddress :68:87:C6:A6:54:A4
----------------------[ IPv4]----------------------
Configuration :Manual
Address :10.89.5.6
Netmask :255.255.255.192
Gateway :10.89.5.1
----------------------[ IPv6]----------------------
Configuration :Disabled
Check that thethreatdefense register edwith themanagement center
Atthethreat defense CLI, check thatthemanagement center registration wascompleted. Note thatthis
command willnotshow thecurrentstatus ofthemanagement connection.
showmanagers
>showmanagers
Type :Manager
Host :10.10.1.4
Display name :10.10.1.4
Identifier :f7ffad78-bf16-11ec-a737-baa2f76ef602
Registration :Completed
Management type :Configuration
Ping themanagement center
Atthethreat defense CLI, usethefollowing command toping themanagement center from thedata
interfaces:
ping fmc_ip
Atthethreat defense CLI, usethefollowing command toping themanagement center from the
Management interface, which should route over thebackplane tothedata interfaces:
ping system fmc_ip
Captur epack etsonthethreatdefense inter nalinterface
Atthethreat defense CLI, capture packets ontheinternal backplane interface (nlp_int_tap) toseeif
management packets arebeing sent:
captur ename interface nlp_int_tap trace detail match ipanyany
showcaptur ename trace detail
Check theinter nalinterface status, statistics, andpack etcount
Atthethreat defense CLI, seeinformation about theinternal backplane interface, nlp_int_tap:
showinterface detail
>showinterface detail
[...]
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
120Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface

Interface Internal-Data0/1 "nlp_int_tap", isup,lineprotocol isup
Hardware isen_vtun rev00,BWUnknown Speed-Capability, DLY1000usec
(Full-duplex), (1000Mbps)
Inputflowcontrol isunsupported, outputflowcontrol isunsupported
MACaddress 0000.0100.0001, MTU1500
IPaddress 169.254.1.1, subnetmask255.255.255.248
37packets input,2822bytes,0nobuffer
Received 0broadcasts, 0runts,0giants
0inputerrors, 0CRC,0frame,0overrun, 0ignored, 0abort
0pauseinput,0resumeinput
0L2decodedrops
5packets output, 370bytes,0underruns
0pauseoutput, 0resumeoutput
0outputerrors, 0collisions, 0interface resets
0latecollisions, 0deferred
0inputresetdrops,0outputresetdrops
inputqueue(blocks freecurr/low): hardware (0/0)
outputqueue(blocks freecurr/low): hardware (0/0)
Traffic Statistics for"nlp_int_tap":
37packets input,2304bytes
5packets output, 300bytes
37packets dropped
1minuteinputrate0pkts/sec, 0bytes/sec
1minuteoutputrate0pkts/sec, 0bytes/sec
1minutedroprate,0pkts/sec
5minuteinputrate0pkts/sec, 0bytes/sec
5minuteoutputrate0pkts/sec, 0bytes/sec
5minutedroprate,0pkts/sec
Control PointInterface States:
Interface numberis14
Interface configstatusisactive
Interface stateisactive
Check routing andNAT
Atthethreat defense CLI, check thatthedefault route (S*) wasadded andthatinternal NATrules exist
fortheManagement interface (nlp_int_tap).
showroute
>showroute
Codes:L-local,C-connected, S-static, R-RIP,M-mobile, B-BGP
D-EIGRP,EX-EIGRPexternal, O-OSPF,IA-OSPFinterarea
N1-OSPFNSSAexternal type1,N2-OSPFNSSAexternal type2
E1-OSPFexternal type1,E2-OSPFexternal type2,V-VPN
i-IS-IS,su-IS-ISsummary, L1-IS-ISlevel-1, L2-IS-ISlevel-2
ia-IS-ISinterarea,*-candidate default, U-per-user staticroute
o-ODR,P-periodic downloaded staticroute,+-replicated route
SI-StaticInterVRF
Gateway oflastresortis10.89.5.1 tonetwork 0.0.0.0
S* 0.0.0.0 0.0.0.0 [1/0]via10.89.5.1, outside
C 10.89.5.0 255.255.255.192 isdirectly connected, outside
L 10.89.5.29 255.255.255.255 isdirectly connected, outside
>
shownat
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
121Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface

>shownat
AutoNATPolicies (Section 2)
1(nlp_int_tap) to(outside) sourcestaticnlp_server_0_sftunnel_intf3 interface service
tcp83058305
translate_hits =0,untranslate_hits =6
2(nlp_int_tap) to(outside) sourcestaticnlp_server_0_ssh_intf3 interface service
tcpsshssh
translate_hits =0,untranslate_hits =73
3(nlp_int_tap) to(outside) sourcestaticnlp_server_0_sftunnel_ipv6_intf3 interface
ipv6service tcp83058305
translate_hits =0,untranslate_hits =0
4(nlp_int_tap) to(outside) sourcedynamic nlp_client_0_intf3 interface
translate_hits =174,untranslate_hits =0
5(nlp_int_tap) to(outside) sourcedynamic nlp_client_0_ipv6_intf3 interface ipv6
translate_hits =0,untranslate_hits =0
>
Check other settings
Seethefollowing commands tocheck thatallother settings arepresent. Youcanalsoseemany ofthese
commands onthemanagement center 'sDevices >Device Management >Device >Management >
Manager Access -Conf iguration Details >CLI Output page.
showrunning-conf igsftunnel
>showrunning-config sftunnel
sftunnel interface outside
sftunnel port8305
showrunning-conf igip-client
>showrunning-config ip-client
ip-client outside
showconn addr essfmc_ip
>showconnaddress 10.89.5.35
5inuse,16mostused
Inspect Snort:
preserve-connection: 0enabled, 0ineffect, 0mostenabled, 0mostineffect
TCPnlp_int_tap 10.89.5.29(169.254.1.2):51231 outside 10.89.5.35:8305, idle0:00:04,
bytes86684,flagsUxIO
TCPnlp_int_tap 10.89.5.29(169.254.1.2):8305 outside 10.89.5.35:52019, idle0:00:02,
bytes1630834, flagsUIO
>
Check forasuccessful DDNS update
Atthethreat defense CLI, check forasuccessful DDNS update:
debugddns
>debugddns
DDNSupdaterequest =/v3/update?hostname=domain.example.org&myip=209.165.200.225
Successfully updated theDDNSseverwithcurrent IPaddresses
DDNS:Another updatecompleted, outstanding =0
DDNS:IDBSBtotal=0
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
122Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface

Iftheupdate failed, usethedebughttp anddebugsslcommands. Forcertificate validation failures,
check thattherootcertificates areinstalled onthedevice:
showcrypto cacertif icates trustpoint_name
Tocheck theDDNS operation:
showddns update interface fmc_access_ifc_name
>showddnsupdateinterface outside
Dynamic DNSUpdateonoutside:
UpdateMethodNameUpdateDestination
RBD_DDNS notavailable
LastUpdateattempted on04:11:58.083 UTCThuJun112020
Status:Success
FQDN:domain.example.org
IPaddresses :209.165.200.225
Check management center logfiles
Seehttps://cisco.com/go/fmc-reg-error .
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair
This topic helps youtroubleshoot thelossofmanagement connectivity onadatainterface inHigh Availability .
Model Support —Threat Defense
Themanagement connection between theactive peer andtheCDO canbedisrupted duetothefollowing
reasons:
•Data interface used formanagement ontheActive unithasconnectivity issues.
Youshould manually failover tothestandby unitandthen configure anew data interface forCDO
access.
•Internet Service Provider haschanged.
Youshould manually update thenew network details ontheactive unitusing theCLIcommands to
restore thedevice connectivity with CDO .
Data Management Interface onActive unit has Connectivity Issues
1. InCDO, manually switch theactive unittostandby .SeeSwitch theActive Peer intheThreat Defense
High Availability Pair,onpage 503.
Alternatively ,youcanrunthenofailo veractivecommand ontheactive unit.
Thestandby device becomes thenew active device inthehigh availability pairandestablishes
communication with CDO .
2. Next tothedevice high-availability pairyouwant toedit, click Edit (
).
3. Choose Routing >Static Route anddelete thestatic route defined fortheolddatamanagement interface.
4. Click theInterfaces tab,andmake thefollowing changes.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
123Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair

a.Remove theIPaddress andname from theolddatamanagement interface, anddisable CDO Access
forthisinterface.
Before removing theolddata management interface information, remember thedetails ifyouwant tousethe
same information.Note
1.Click theEdit (
)next totheinterface youwant toremove.
2.Clear thecontent intheName field.
3.Uncheck theEnabled checkbox.
4.IntheIPv4 orIPv6 tab,remove theactive address.
5.IntheFirewall Management Center Access tab,uncheck Enable management onthis
interface fortheFirepowerManagement Center .
6.Click OK.
7.Click Yestoconfirm thechanges.
b.Configure thenew data management interface with thesettings oftheoldinterface (theones you
used attheCLI), andenable CDO Access forit.
1.Click Edit (
)next tothedata interface youwant forhandling management traffic.
2.IntheName field, specify aname fortheinterface.
3.Check theEnabled checkbox.
4.IntheIPv4 orIPv6 tab,specify theactive address.
5.IntheFirewall Management Center Access tab,check Enable management onthisinterface
fortheFirepowerManagement Center .
6.Click OK.
7.Click Yestoconfirm thechanges.
5. Click theHigh Availability tab,andmake thefollowing changes.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
124Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair

a.IntheMonitor edInterfaces area, click theEdit (
)next tothenew data management interface.
TheActiveIPAddr essshows theactive device's IPaddress.
b.OntheIPv4 tab,enter theStandby IPAddr essandGateway address.
c.Ifyouconfigured theIPv6 address manually ,ontheIPv6 tab,click Edit (
)next totheactive IP
address, enter theStandby IPAddr ess,andclick OK.
d.Click OK.
6. Click Saveatthetop-right corner tosave thechanges.
7. Choose Routing >Static Route andaddthestatic route defined forthenewdatamanagement interface.
Thenew data interface appears intheInterface list.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
125Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair

8. Click Saveatthetop-right corner tosave thechanges.
9. Deploy configuration changes. .
10. When thedeployment completes around 90percent, thenew management interface takes effect. Atthis
stage, youmust re-cable theFTD sothattheCDO reaches FTD onthenew interface andcompletes the
deployment successfully .
After youre-cable, thedeployment may failifittimed outbefore re-establishing themanagement connection
tothenew interface. Inthatcase, youmust reinitiate thedeployment after re-cabling forasuccessful
deployment.Note
11. Ensure themanagement connection isreestablished.
InManagement Center ,check themanagement connection status ontheDevices >DeviceManagement >
Device >Management >FMC Access Details >Connection Status page.
Alternatively ,attheFTD CLI, enter thesftunnel-status-brief command toview themanagement
connection status.
Internet Service Provider has Changed
Ifyouhave changed your ISP,youcanlosemanagement connectivity ,even though High Availability health
isnormal. Configure thenew network details ofthemanagement interface using theCLIcommands.
These commands areavailable only ontheactive unitandnotonstandby . Note
Forinformation about thethreat defense CLI, seetheFTD command reference .
1.Connect tothedevice CLI.
Youshould usetheconsole portwhen using these commands. Ifyouareediting theconfiguration dueto
adisrupted management connection, andyouhave SSH access tothededicated Management interface,
then youcanusethatSSH connection.
SeeLogIntotheCommand Line Interface ontheDevice ,onpage 39.
2.Loginwith theAdmin username andpassword.
3.Useoneofthefollowing commands depending onthenetwork value youwant toupdate:
•configurenetw orkmanagement-data-interface ipv4 manual ip_addr essip_netmask interface
interface_id
•configurenetw orkmanagement-data-interface ipv4 gateway_ip interface interface_id
•configurenetw orkmanagement-data-interface ipv4 manual ip_addr essipv4_netmask gateway_ip
interface interface_id
Example:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
126Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair

Configure network management-data-interface ipv4manual10.10.6.7 255.255.255.0 interface
gig0/0
Configuration updated successfully..!!
Allother CLIcommands ofconfigurenetw orkmanagement-data-interface arenotsupported ondevices
inaHigh Availability pair.Note
Theconfiguration isautomatically pushed tothestandby device.
4.Optional: Limit data interface access toCDO onaspecific network.
configurenetw orkmanagement-data-interface client ip_addr essnetmask
Bydefault, allnetworks areallowed.
5.Check thatthemanagement connection wasreestablished.
sftunnel-status-brief
Seethefollowing sample output foraconnection thatisup,with peer channel andheartbeat information
shown:
>sftunnel-status-brief
PEER:10.10.17.202
Peerchannel Channel-A isvalidtype(CONTROL), using'eth0', connected to'10.10.17.202'
via'10.10.17.222'
Peerchannel Channel-B isvalidtype(EVENT), using'eth0', connected to'10.10.17.202'
via'10.10.17.222'
Registration: Completed.
IPv4Connection topeer'10.10.17.202' StartTime:WedJun1014:27:12 2020UTC
Heartbeat SendTime:MonJun1509:02:08 2020UTC
Heartbeat Received Time:MonJun1509:02:16 2020UTC
6.InCDO ,click Inventory >FTD .
7.Select your threat defense andintheManagement pane ontheright, click Device Summary .
8.InManagement >FMC Access Details ,click Refr esh.
TheCDO detects theinterface anddefault route configuration changes, andblocks deployment tothe
FTD. When youchange thedatainterface settings locally onthedevice, youmust reconcile those changes
inCDO manually .Youcanview thediscrepancies between CDO andthethreat defense onthe
Conf iguration tab.
9.Return totheFMC Access Details dialog box, andclick Ackno wledge toremove thedeployment block.
Thenext time youdeploy ,theCDO configuration willoverwrite anyremaining conflicting settings on
theFTD. Itisyour responsibility tomanually fixtheconfiguration intheCDO before youre-deploy .
Youwillseeexpected messages of"Config wascleared” and“FMC Access changed andacknowledged.”
Theconfiguration change made ontheactive unitisautomatically pushed tostandby .Once theCDO
restores itsconnectivity with theactive unit, CDO updates thestandby IPaddress.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
127Onboard Devices toCloud-delivered Firewall Management Center
Troubleshoot Management Connectivity onaData Interface inaHigh Availability Pair

View Inventory Details
TheInventory Details section oftheDevice page shows chassis details such astheCPU andmemory .
Figure 35:Inventory Details
Toupdate information, click Refr esh(
).
Edit Applied Policies
TheApplied Policies section oftheDevice page displays thefollowing policies applied toyour firewall:
Figure 36:Applied Policies
Forpolicies with links, youcanclick thelinktoview thepolicy .
FortheAccess Control Policy ,view theAccess Policy Information forTroubleshooting dialog boxby
clicking theExclamation (
)icon. This dialog boxshows how access rules areexpanded intoaccess control
entries (ACEs).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
128Onboard Devices toCloud-delivered Firewall Management Center
View Inventory Details

Figure 37:Access Policy Information forTroubleshooting
Youcanassign policies toanindividual device from theDevice Management page.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice where youwant toassign policies, click Edit (
).
Step 3 Click Device.
Step 4 IntheApplied Policies section, click Edit (
).
Figure 38:Policy Assignments
Step 5 Foreach policy type, choose apolicy from thedrop-down menu. Only existing policies arelisted.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
129Onboard Devices toCloud-delivered Firewall Management Center
Edit Applied Policies

Step 6 Click Save.
What todonext
•Deploy configuration changes.
Edit Advanced Settings
TheAdvanced Settings section oftheDevice page displays atable ofadvanced configuration settings, as
described below .Youcaneditanyofthese settings.
Table 6:Advanced Section Table Fields
Description Field
Thestate ofAutomatic Application Bypass onthedevice. Application Bypass
TheAutomatic Application Bypass threshold, inmilliseconds. Bypass Threshold
Thestate ofobject group search onthedevice. While operating, theFTD
device expands access control rules intomultiple access control listentries
based onthecontents ofanynetwork orinterface objects used intheaccess
rule. Youcanreduce thememory required tosearch access control rules
byenabling object group search. Withobject group search enabled, the
system does notexpand network orinterface objects, butinstead searches
access rules formatches based onthose group definitions. Object group
search does notimpact how your access rules aredefined orhow they appear
inFirepower Management Center .Itimpacts only how thedevice interprets
andprocesses them while matching connections toaccess control rules.
Bydefault, theObject GroupSear chisenabled when youadd
threat defense forthefirsttime inthemanagement center .NoteObject Group Search
Thestate ofinterface object optimization onthedevice. During deployment,
interface groups andsecurity zones used intheaccess control andprefilter
policies generate separate rules foreach source/destination interface pair.
Ifyouenable interface object optimization, thesystem willinstead deploy
asingle ruleperaccess control/prefilter rule, which cansimplify thedevice
configuration andimprove deployment performance. Ifyouselect this
option, alsoselect theObject GroupSear choption toreduce memory
usage onthedevice.Interface Object Optimization
Thefollowing topics explain how toedittheadvanced device settings.
Forinformation about theTransfer Packets setting, seeEdit General Settings ,onpage 77. Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
130Onboard Devices toCloud-delivered Firewall Management Center
Edit Advanced Settings

Configure Automatic Application Bypass
Automatic Application Bypass (AAB) allows packets tobypass detection ifSnort isdown or,foraClassic
device, ifapacket takes toolong toprocess. AAB causes Snort torestart within tenminutes ofthefailure,
andgenerates troubleshooting data thatcanbeanalyzed toinvestigate thecause oftheSnort failure.
AAB activation partially restarts theSnort process, which temporarily interrupts theinspection ofafew
packets. Whether trafficdrops during thisinterruption orpasses without further inspection depends onhow
thetargetdevice handles traffic.SeeSnort Restart TrafficBehavior ,onpage 176formore information.Caution
Seethefollowing behavior:
ThreatDefense Beha vior:IfSnort isdown, then AAB istriggered after thespecified timer duration. IfSnort
isup,then AAB isnever triggered, even ifpacket processing exceeds theconfigured timer .
Classic Device Beha vior:AAB limits thetime allowed toprocess packets through aninterface. Youbalance
packet processing delays with your network’ stolerance forpacket latency .
Thefeature functions with anydeployment; however ,itismost valuable ininline deployments.
Typically ,youuseRule Latency Thresholding intheintrusion policy tofast-path packets after thelatency
threshold value isexceeded. Rule Latency Thresholding does notshut down theengine orgenerate
troubleshooting data.
Ifdetection isbypassed, thedevice generates ahealth monitoring alert.
Bydefault theAAB isdisabled; toenable AAB follow thesteps described.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice where youwant toeditadvanced device settings, click Edit (
).
Step 3 Click Device,then click Edit (
)intheAdvanced Settings section.
Step 4 Check Automatic Application Bypass .
Step 5 Enter aBypass Threshold from 250msto60,000 ms.Thedefault setting is3000 milliseconds (ms).
Step 6 Click Save.
What todonext
•Deploy configuration changes.
Configure Object Group Search
While operating, thethreat defense device expands access control rules intomultiple access control listentries
based onthecontents ofanynetwork orinterface objects used intheaccess rule. Youcanreduce thememory
required tosearch access control rules byenabling object group search. Withobject group search enabled,
thesystem does notexpand network orinterface objects, butinstead searches access rules formatches based
onthose group definitions. Object group search does notimpact how your access rules aredefined orhow
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
131Onboard Devices toCloud-delivered Firewall Management Center
Configure Automatic Application Bypass

they appear inmanagement center .Itimpacts only how thedevice interprets andprocesses them while matching
connections toaccess control rules.
Enabling object group search reduces memory requirements foraccess control policies thatinclude network
orinterface objects. However ,itisimportant tonote thatobject group search might alsodecrease rulelookup
performance andthus increase CPU utilization. Youshould balance theCPU impact against thereduced
memory requirements foryour specific access control policy .Inmost cases, enabling object group search
provides anetoperational improvement.
Bydefault, theobject group search isenabled forthethreat defense devices thatareadded forthefirsttime
inthemanagement center .Inthecase ofupgraded devices, ifthedevice isconfigured with disabled object
group search, then youneed tomanually enable it.Youcanenable itononedevice atatime; youcannot
enable itglobally .Werecommend thatyouenable itonanydevice towhich youdeploy access rules thatuse
network orinterface objects.
Ifyouenable object group search andthen configure andoperate thedevice forawhile, beaware that
subsequently disabling thefeature might lead toundesirable results. When youdisable object group search,
your existing access control rules willbeexpanded inthedevice’ srunning configuration. Iftheexpansion
requires more memory than isavailable onthedevice, your device canbeleftinaninconsistent state andyou
might seeaperformance impact. Ifyour device isoperating normally ,youshould notdisable object group
search once youhave enabled it.Note
Before you begin
•Model Support —Threat Defense
•Werecommend thatyoualsoenable transactional commit oneach device. From thedevice CLI, enter
theasprule-engine transactional-commit access-gr oupcommand.
•Changing thissetting canbedisruptive tosystem operation while thedevice recompiles theACLs. We
recommend thatyouchange thissetting during amaintenance window .
•YoucanuseFlexConfig toconfigure theobject-gr oup-sear chthreshold command toenable athreshold
tohelp prevent performance degradation. When operating with athreshold, foreach connection, both
thesource anddestination IPaddresses arematched against network objects. Ifthenumber ofobjects
matched bythesource address times thenumber matched bythedestination address exceeds 10,000, the
connection isdropped. Configure your rules toprevent anexcessive number ofmatches.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothethreat defense device where youwant toconfigure therule, click theEdit (
).
Step 3 Click theDevice tab,then click theEdit (
)intheAdvanced Settings section.
Step 4 Check Object GroupSear ch.
Step 5 Tohave object group search work oninterface objects inaddition tonetwork objects, check Interface Object
Optimization .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
132Onboard Devices toCloud-delivered Firewall Management Center
Configure Object Group Search

Ifyoudonotselect Interface Object Optimization ,thesystem deploys separate rules foreach source/interface
pair,rather thatusethesecurity zones andinterface groups used intherules. This means theinterface groups
arenotavailable forobject group search processing.
Step 6 Click Save.
Configure Interface Object Optimization
During deployment, interface groups andsecurity zones used intheaccess control andprefilter policies
generate separate rules foreach source/destination interface pair.Ifyouenable interface object optimization,
thesystem willinstead deploy asingle ruleperaccess control/prefilter rule, which cansimplify thedevice
configuration andimprove deployment performance. Ifyouselect thisoption, alsoselect theObject Group
Sear choption toreduce memory usage onthedevice.
Interface object optimization isdisabled bydefault. Youcanenable itononedevice atatime; youcannot
enable itglobally .
Ifyoudisable interface object optimization, your existing access control rules willbedeployed without using
interface objects, which might make deployment take longer .Inaddition, ifobject group search isenabled,
itsbenefits willnotapply tointerface objects, andyoumight seeexpansion intheaccess control rules inthe
device’ srunning configuration. Iftheexpansion requires more memory than isavailable onthedevice, your
device canbeleftinaninconsistent state andyoumight seeaperformance impact.Note
Before you begin
Model Support —Threat Defense
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothethreat defense device where youwant toconfigure therule, click theEdit (
).
Step 3 Click theDevice tab,then click Edit (
)intheAdvanced Settings section.
Step 4 Check Interface Object Optimization .
Step 5 Click Save.
Edit Deployment Settings
TheDeployment Settings section oftheDevice page displays theinformation described inthetable below .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
133Onboard Devices toCloud-delivered Firewall Management Center
Configure Interface Object Optimization

Figure 39:Deployment Settings
Table 7:Deployment Settings
Description Field
Enabled orDisabled.
Youcanenable auto rollback ifthemanagement connection fails asa
result ofthedeployment; specifically ifyouusedata formanagement
center access, andthen youmisconfigure thedata interface.Auto Rollback Deployment if
Connectivity Fails
Shows theamount oftime towait before rolling back theconfiguration. Connectivity Monitor Interval (in
Minutes)
Youcansetdeployment settings from theDevice Management page. Deployment settings include enabling
auto rollback ofthedeployment ifthemanagement connection fails asaresult ofthedeployment; specifically
ifyouusedata formanagement center access, andthen youmisconfigure thedata interface. Youcan
alternatively manually rollback theconfiguration using theconfigurepolicy rollback command (seeManually
Roll Back theConfiguration iftheManagement Center Loses Connectivity ,onpage 116).
Seethefollowing guidelines:
•Only theprevious deployment isavailable locally onthethreat defense ;youcannot rollback toany
earlier deployments.
•Rollback issupported forhigh availability butnotsupported forclustering deployments.
•Rollback isnotsupported immediately after high availability creation.
•Therollback only affects configurations thatyoucansetinthemanagement center .Forexample, the
rollback does notaffectanylocal configuration related tothededicated Management interface, which
youcanonly configure atthethreat defense CLI. Note thatifyouchanged data interface settings after
thelastmanagement center deployment using theconfigurenetw orkmanagement-data-interface
command, andthen youusetherollback command, those settings willnotbepreserved; they willroll
back tothelast-deployed management center settings.
•UCAPL/CC mode cannot berolled back.
•Out-of-band SCEP certificate data thatwasupdated during theprevious deployment cannot berolled
back.
•During therollback, connections willdrop because thecurrent configuration willbecleared.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothedevice where youwant toassign policies, click Edit (
).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
134Onboard Devices toCloud-delivered Firewall Management Center
Edit Deployment Settings

Step 3 Click Device.
Step 4 IntheDeployment Settings section, click Edit (
).
Figure 40:Deployment Settings
Step 5 Check AutoRollback Deployment ifConnecti vityFailstoenable auto rollback.
Step 6 SettheConnecti vityMonitor Inter val(inMinutes) tosettheamount oftime towait before rolling back
theconfiguration. Thedefault is20minutes.
Step 7 Ifarollback occurs, seethefollowing fornext steps.
•Iftheauto rollback wassuccessful, youseeasuccess message instructing youtodoafulldeployment.
•YoucanalsogototheDeploy >Advanced Deploy screen andclick thePreview (
)icon toview the
parts oftheconfiguration thatwere rolled back (seeDeploy Configuration Changes ,onpage 182).Click
ShowRollback Changes toview thechanges, andHide Rollback Changes tohide thechanges.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
135Onboard Devices toCloud-delivered Firewall Management Center
Edit Deployment Settings

Figure 41:Rollback Changes
•IntheDeployment History Preview ,youcanview therollback changes. SeeViewDeployment History ,
onpage 189.
Step 8 Check thatthemanagement connection wasreestablished.
Inmanagement center ,check themanagement connection status ontheDevices >Device Management >
Device >Management >FMC Access Details >Connection Status page.
Atthethreat defense CLI, enter thesftunnel-status-brief command toview themanagement connection
status.
Ifittakes more than 10minutes toreestablish theconnection, youshould troubleshoot theconnection. See
Troubleshoot Management Connectivity onaData Interface ,onpage 118.
Edit Cluster Health Monitor Settings
TheCluster Health Monitor Settings section oftheCluster page displays thesettings described inthetable
below .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
136Onboard Devices toCloud-delivered Firewall Management Center
Edit Cluster Health Monitor Settings

Figure 42:Cluster Health Monitor Settings
Table 8:Cluster Health Monitor Settings Section Table Fields
Description Field
Timeouts
Todetermine node system health, thecluster nodes send heartbeat messages
onthecluster control linktoother nodes. Ifanode does notreceive any
heartbeat messages from apeer node within thehold time period, thepeer node
isconsidered unresponsive ordead.Hold Time
Theinterface debounce time istheamount oftime before thenode considers
aninterface tobefailed, andthenode isremoved from thecluster .Interface Debounce Time
Theinterface health check monitors forlinkfailures. Ifallphysical ports for
agiven logical interface failonaparticular node, butthere areactive ports
under thesame logical interface onother nodes, then thenode isremoved from
thecluster .Theamount oftime before thenode removes amember from the
cluster depends onthetype ofinterface andwhether thenode isanestablished
node orisjoining thecluster .Monitor edInterfaces
Shows whether theSnort anddisk-full processes aremonitored. Service Application
Shows unmonitored interfaces. Unmonitored Interfaces
Auto-Rejoin Settings
Shows theauto-rejoin settings foracluster control linkfailure. Cluster Interface
Shows theauto-rejoin settings foradata interface failure. Data Interfaces
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
137Onboard Devices toCloud-delivered Firewall Management Center
Edit Cluster Health Monitor Settings

Description Field
Shows theauto-rejoin settings forinternal errors. Internal failures include:
application sync timeout; inconsistent application statuses; andsoon.System
Ifyoudisable thesystem health check, fields thatdonotapply when thesystem health check isdisabled will
notshow .Note
Youcanthese settings from thissection.
Youcanmonitor anyport-channel ID,single physical interface ID,aswell astheSnort anddisk-full processes.
Health monitoring isnotperformed onVLAN subinterfaces orvirtual interfaces such asVNIs orBVIs. You
cannot configure monitoring forthecluster control link; itisalways monitored.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Next tothecluster youwant tomodify ,click Edit (
).
Step 3 Click Cluster .
Step 4 IntheCluster Health Monitor Settings section, click Edit (
).
Step 5 Disable thesystem health check byclicking theHealth Check slider .
Figure 43:Disable theSystem Health Check
When anytopology changes occur (such asadding orremoving adata interface, enabling ordisabling an
interface onthenode ortheswitch, oradding anadditional switch toform aVSS orvPC) youshould disable
thesystem health check feature andalsodisable interface monitoring forthedisabled interfaces. When the
topology change iscomplete, andtheconfiguration change issynced toallnodes, youcanre-enable thesystem
health check feature andmonitored interfaces.
Step 6 Configure thehold time andinterface debounce time.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
138Onboard Devices toCloud-delivered Firewall Management Center
Edit Cluster Health Monitor Settings

•Hold Time—Set thehold time todetermine theamount oftime between node heartbeat status messages,
between .3and45seconds; Thedefault is3seconds.
•Interface Debounce Time—Set thedebounce time between 300and9000 ms.Thedefault is500ms.
Lower values allow forfaster detection ofinterface failures. Note thatconfiguring alower debounce
time increases thechances offalse-positives. When aninterface status update occurs, thenode waits the
number ofmilliseconds specified before marking theinterface asfailed, andthenode isremoved from
thecluster .Inthecase ofanEtherChannel thattransitions from adown state toanupstate (forexample,
theswitch reloaded, ortheswitch enabled anEtherChannel), alonger debounce time canprevent the
interface from appearing tobefailed onacluster node justbecause another cluster node wasfaster at
bundling theports.
Step 7 Customize theauto-rejoin cluster settings after ahealth check failure.
Figure 44:Configure Auto-Rejoin Settings
Setthefollowing values fortheCluster Interface ,Data Interface ,andSystem (internal failures include:
application sync timeout; inconsistent application statuses; andsoon):
•Attempts —Sets thenumber ofrejoin attempts, between -1and65535. 0disables auto-rejoining. The
default fortheCluster Interface is-1(unlimited). Thedefault fortheData Interface andSystem is3.
•Inter valBetween Attempts —Defines theinterval duration inminutes between rejoin attempts, between
2and60.Thedefault value is5minutes. Themaximum total time thatthenode attempts torejoin the
cluster islimited to14400 minutes (10days) from thetime oflastfailure.
•Inter valVariation —Defines iftheinterval duration increases. Setthevalue between 1and3:1(no
change); 2(2xtheprevious duration), or3(3xtheprevious duration). Forexample, ifyousettheinterval
duration to5minutes, andsetthevariation to2,then thefirstattempt isafter 5minutes; the2ndattempt
is10minutes (2x5);the3rdattempt 20minutes (2x10),andsoon.Thedefault value is1fortheCluster
Interface and2fortheData Interface andSystem .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
139Onboard Devices toCloud-delivered Firewall Management Center
Edit Cluster Health Monitor Settings

Step 8 Configure monitored interfaces bymoving interfaces intheMonitor edInterfaces orUnmonitor edInterfaces
window .Youcanalsocheck oruncheck Enable Service Application Monitoring toenable ordisable
monitoring oftheSnort anddisk-full processes.
Figure 45:Configure Monitored Interfaces
Theinterface health check monitors forlinkfailures. Ifallphysical ports foragiven logical interface failon
aparticular node, butthere areactive ports under thesame logical interface onother nodes, then thenode is
removed from thecluster .Theamount oftime before thenode removes amember from thecluster depends
onthetype ofinterface andwhether thenode isanestablished node orisjoining thecluster .Health check is
enabled bydefault forallinterfaces andfortheSnort anddisk-full processes.
Youmight want todisable health monitoring ofnon-essential interfaces.
When anytopology changes occur (such asadding orremoving adata interface, enabling ordisabling an
interface onthenode ortheswitch, oradding anadditional switch toform aVSS orvPC) youshould disable
thesystem health check feature andalsodisable interface monitoring forthedisabled interfaces. When the
topology change iscomplete, andtheconfiguration change issynced toallnodes, youcanre-enable thesystem
health check feature andmonitored interfaces.
Step 9 Click Save.
Step 10 Deploy configuration changes.
HotSwap anSSD ontheSecure Firewall 3100
Ifyouhave twoSSDs, they form aRAID when youboot up.Youcanperform thefollowing tasks atthethreat
defense CLIwhile thefirewall ispowered up:
•Hotswap oneoftheSSDs—If anSSD isfaulty ,youcanreplace it.Note thatifyouonly have oneSSD,
youcannot remove itwhile thefirewall ispowered on.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
140Onboard Devices toCloud-delivered Firewall Management Center
HotSwap anSSD ontheSecure Firewall 3100

•Remove oneoftheSSDs—If youhave twoSSDs, youcanremove one.
•Add asecond SSD—If youhave oneSSD, youcanaddasecond SSD andform aRAID.
Donotremove anSSD without firstremoving itfrom theRAID using thisprocedure. Youcancause data
loss.Caution
Procedure
Step 1 Remove oneoftheSSDs.
a)Remove theSSD from theRAID.
configureraid remove-secur elocal-disk {1|2}
Theremove-secur ekeyword removes theSSD from theRAID, disables theself-encrypting disk feature,
andperforms asecure erase oftheSSD. Ifyouonly want toremove theSSD from theRAID andwant to
keep thedata intact, youcanusetheremovekeyword.
Example:
>configure raidremove-secure local-disk 2
b)Monitor theRAID status until theSSD nolonger shows intheinventory .
showraid
After theSSD isremoved from theRAID, theOperability andDriveState willshow asdegraded .The
second drive willnolonger belisted asamember disk.
Example:
>showraid
Virtual Drive
ID: 1
Size(MB): 858306
Operability: operable
Presence: equipped
Lifecycle: available
DriveState: optimal
Type: raid
Level: raid1
MaxDisks: 2
MetaVersion: 1.0
ArrayState: active
SyncAction: idle
SyncCompleted: unknown
Degraded: 0
SyncSpeed: none
RAIDmemberDisk:
DeviceName: nvme0n1
DiskState: in-sync
DiskSlot: 1
ReadErrors: 0
Recovery Start: none
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
141Onboard Devices toCloud-delivered Firewall Management Center
HotSwap anSSD ontheSecure Firewall 3100

BadBlocks:
Unacknowledged BadBlocks:
DeviceName: nvme1n1
DiskState: in-sync
DiskSlot: 2
ReadErrors: 0
Recovery Start: none
BadBlocks:
Unacknowledged BadBlocks:
>showraid
Virtual Drive
ID: 1
Size(MB): 858306
Operability: degraded
Presence: equipped
Lifecycle: available
DriveState: degraded
Type: raid
Level: raid1
MaxDisks: 2
MetaVersion: 1.0
ArrayState: active
SyncAction: idle
SyncCompleted: unknown
Degraded: 1
SyncSpeed: none
RAIDmemberDisk:
DeviceName: nvme0n1
DiskState: in-sync
DiskSlot: 1
ReadErrors: 0
Recovery Start: none
BadBlocks:
Unacknowledged BadBlocks:
c)Physically remove theSSD from thechassis.
Step 2 Add anSSD.
a)Physically addtheSSD totheempty slot.
b)Add theSSD totheRAID.
configureraid addlocal-disk {1|2}
Itcantake several hours tocomplete syncing thenew SSD totheRAID, during which thefirewall is
completely operational. Youcaneven reboot, andthesync willcontinue after itpowers up.Usetheshow
raid command toshow thestatus.
Ifyouinstall anSSD thatwaspreviously used onanother system, andisstilllocked, enter thefollowing
command:
configureraid addlocal-disk {1|2}psid
Thepsid isprinted onthelabel attached totheback oftheSSD. Alternatively ,youcanreboot thesystem,
andtheSSD willbereformatted andadded totheRAID.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
142Onboard Devices toCloud-delivered Firewall Management Center
HotSwap anSSD ontheSecure Firewall 3100

Migrate theConfiguration toaNew Model
TheFirewall Threat Defense model migration wizard enables youtomigrate configurations from anoldthreat
defense model toanew model. Youcanmap source device interfaces totargetdevice interfaces. Before the
migration, thesource andtargetdevices arelocked.
Supported Devices forMigration
Supported Source Devices
•Cisco Firepower 1120
•Cisco Firepower 1140
•Cisco Firepower 1150
•Cisco Firepower 2110
•Cisco Firepower 2120
•Cisco Firepower 2130
•Cisco Firepower 2140
Thesource devices must beversion 7.0orlater. Note
Supported Target Devices
•Cisco Secure Firewall 3105
•Cisco Secure Firewall 3110
•Cisco Secure Firewall 3120
•Cisco Secure Firewall 3130
•Cisco Secure Firewall 3140
TheCisco Secure Firewall 3110,3120, 3130, and3140 devices must beversion 7.1orlater.Cisco Secure
Firewall 3105 must beversion 7.3orlater.Note
License forMigration
Youmust register andenroll thedevice with thesmart licensing account. Themigration copies thesource
device licenses tothetargetdevice.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
143Onboard Devices toCloud-delivered Firewall Management Center
Migrate theConfiguration toaNew Model

Prerequisites forMigration
•Youmust register thesource andthetargetdevices tothemanagement center .
•YourSmart Licensing account must have thelicense entitlements forthetargetdevice.
•Werecommend thatthetargetdevice isafreshly registered device without anyconfigurations.
•Source andtargetdevices must beinthesame:
•Domain
•Firewall mode: Routed orTransparent
•Compliance mode
•Thetargetdevice must notbe:
•Inamulti-instance mode
•Partofacluster
•Theuser must have modify permissions onthedevice.
•Theconfigurations onthesource device must bevalid andhave noerrors.
•Thesource device canhave pending deployments. However ,deployment, import, orexport tasks must
notrunoneither ofthedevices during themigration.
•Ifthesource device ispartofanHApair,thetargetdevice need notbepartofanHApairandvice versa.
Themigration does notform orbreak theHApair.
What Configurations Does theWizard Migrate?
Themigration wizard copies thefollowing configurations from thesource device tothetargetdevice:
•Licenses
•Interface configurations
•Inline setsconfigurations
•Routing configurations
•DHCP andDDNS configurations
•Virtual router configurations
•Policies
•Associated objects andobject overrides
•Platform settings
•Remote branch deployment configurations
Themigration wizard copies thefollowing policy configurations from thesource device tothetargetdevice:
•Health policies
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
144Onboard Devices toCloud-delivered Firewall Management Center
Prerequisites forMigration

•NATpolicies
•QoS policies
•Remote access VPN policies
•FlexConfig policies
•Access control policies
•Prefilter policies
•IPSpolicies
•DNS policies
•SSL policies
•Malware andFilepolicies
•Identity policies
Themigration wizard copies thefollowing routing configurations from thesource device tothetargetdevice:
•ECMP
•BFD
•OSPFv2/v3
•EIGRP
•RIP
•BGP
•Policy Based Routing
•Static Route
•Multicast Routing
•Virtual Router
Themigration wizard copies thefollowing interfaces from thesource device tothetargetdevice:
•Physical interfaces
•Sub-interfaces
•Etherchannel interfaces
•Bridge group interfaces
•VTI interfaces
•VNI interfaces
•Loopback interfaces
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
145Onboard Devices toCloud-delivered Firewall Management Center
What Configurations Does theWizard Migrate?

Limitations forMigration
•Thewizard does notmigrate:
•Site-to-site VPN policies
•SNMP configurations
After themigration, youcanconfigure SNMP using theplatform settings forthedevice.
•Youcanperform only onemigration atatime.
•Ifthespeed, auto-negotiation, andduplex settings ofthesource interface arevalid forthemapped interface
ofthetargetdevice, thevalues arecopied. Ifnot,these parameters aresettothedefault values.
•Remote access VPN trustpoint certificates arenotenrolled. Youmust manually enroll these certificates
before thedeployment.
•After migration, bydefault, thetargetdevice uses Snort 3andnotSnort 2,even ifthesource device uses
Snort 2.
•ForHAdevices:
•TargetDevice: Youcannot map theinterfaces thatarepartofthefailover configuration. These
interfaces aredisabled inthewizard.
•Source andTargetDevices: Thewizard does notmigrate HAconfigurations such asmonitored
interfaces, failover trigger criteria, andinterface MAC addresses. Youmust manually configure
these parameters after themigration ifrequired.
Migrate theSecure Firewall Threat Defense
Before you begin
Review theprerequisites andlimitations forthemigration.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Click Migrate onthetop-right ofthepage.
Step 3 Click Start onthewelcome screen.
Step 4 From theSour ceDevice drop-down list,choose adevice.
Ifthedevice ispartofanHApair,only thecontainer name oftheHApairappears.
Step 5 Click Next .
Step 6 From theTargetDevice drop-down list,choose adevice.
Ifthedevice ispartofanHApair,only thecontainer name oftheHApairappears.
Step 7 Click Next .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
146Onboard Devices toCloud-delivered Firewall Management Center
Limitations forMigration

Step 8 IntheConf igureInterfaces step, map thephysical interfaces ofthesource device with those ofthetarget
device.
Mapping ofallinterfaces isnotmandatory .Youmust map allnamed interfaces andinterfaces thatarepart
ofother interfaces. Youcannot map interfaces thatarepartofanHAfailover configuration. These interfaces
aredisabled inthewizard. Thewizard creates thelogical interfaces according totheinterface mapping provided
bytheuser.
•Click Map Default toconfigure default interface mappings.
Forexample, Ethernet1/1 inthesource device willbemapped toEthernet1/1 inthetargetdevice.
•Click Clear Alltoclear allthemappings.
Step 9 Click Next .
Step 10 Click ViewMappings toverify theinterface mappings.
Step 11 Click Submit tostart themigration.
Step 12 Viewthemigration status intheNotif ications >Tasks page.
What todonext
After asuccessful migration, youcandeploy thedevice.
Deployment isnotmandatory ,youcanvalidate theconfigurations anddeploy asrequired. However ,before
thedeployment ensure thatyouperform theactions mentioned inBest Practices forMigration ,onpage 147.
Best Practices forMigration
After asuccessful migration, werecommend thatyouperform thefollowing actions before thedeployment:
•Change theIPaddresses oftheinterfaces ifthesource device islive, asthey arecopied tothetarget
device from thesource device.
•Ensure thatyouupdate your NATpolicies with themodified IPaddresses.
•Configure theinterface speeds ifthey aresettodefault values after migration.
•Re-enroll thedevice certificates, ifany,onthetargetdevice.
•Ifyouhave aHAsetup, configure HAparameters such asmonitored interfaces, failover trigger criteria,
andinterface MAC addresses.
•Configure thediagnostic interface asitgetsreset after migration.
•(Optional) Configure SNMP using theplatform settings forthedevice.
•(Optional) Configure remote branch deployment configurations.
Ifthesource ortargetdevice hadmanager access through adatainterface, after themigration, themanager
access willbelost. Update themanager access configuration onthetargetdevice. Formore information,
seetheChang etheMana gerAccess Interface fromMana gement toData topic intheCisco Secure
Firewall Management Center Device Configuration Guide ortheOnline Help.
•(Optional) Configure site-to-site VPN ifrequired. These configurations arenotmigrated from thesource
device.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
147Onboard Devices toCloud-delivered Firewall Management Center
Best Practices forMigration

•Viewthedeployment preview before thedeployment. Choose Deploy >Advanced Deploy andclick
thePreview (
)icon forthedevice.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
148Onboard Devices toCloud-delivered Firewall Management Center
Best Practices forMigration

CHAPTER 6
Change Management
Youcanenable Change Management ifyour organization needs toimplement more formal processes for
configuration changes, including audit tracking andofficial approval before changes aredeployed.
•About Change Management ,onpage 149
•Requirements andPrerequisites forChange Management ,onpage 152
•Guidelines andLimitations forChange Management ,onpage 153
•Enabling orDisabling Change Management ,onpage 153
•Managing Tickets ,onpage 154
•History forChange Management ,onpage 159
About Change Management
Some organizations need toimplement aformal approach todeploying configuration changes. This might
include more auditing, andanofficial approval process thatmust happen before configuration changes can
bemade toadevice.
Ifyour organization uses amore formal configuration change process, youcanenable Change Management
toenforce theprocess. WithChange Management, administrators must open tickets before they canmake
configuration changes. Then, once thechange iscomplete, they must submit theticket forapproval before
they candeploy theproposed changes. This allows youtoenforce your official approval process andensure
thattheright employees make thefinal decisions.
When using Change Management, administrators canseetheir own changes within aticket, butthey cannot
seechanges anyone elsehasmade within aticket. Because apolicy islocked once auser makes achange
within aticket, users should notbeable tomake interfering changes. However ,users willnotbeable tomake
changes while another user hasmade achange thatispending approval.
Administrators cancreate multiple tickets sothatasingle ticket contains only logically-related policy changes.
Tickets with amore limited scope arealsoeasier toevaluate andapprove quickly .
Thefollowing topics explain theChange Management Workflow andwhich policies andobjects aresubject
totheticketing andapproval process.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
149

How toConfigure Devices intheChange Management Workflow
When youenable Change Management, users who configure devices need tochange their approach slightly .
Configuration specialists need totakethefollowing approach when making configuration changes tosupported
policies andobjects.
Procedure
Step 1 Create aticket.
Step 2 Open theticket.
Step 3 Make theconfiguration changes.
Note thattheprocedures explained intheonline help anduser guides assume thatChange Management isnot
active, andomit anysteps forcreating, opening, orsubmitting tickets.
Step 4 Optionally ,preview andvalidate theticket toensure thechanges arecomplete andcorrect.
Step 5 Submit theticket. Atthispoint, theapprover caneither approve orreject theticket.
•Iftheticket isapproved, deploy thechanges.
•Iftheticket isrejected, address theissues, andresubmit theticket.
Creating Separate Approver and Configuration Roles
Some system-defined roles have permissions tomodify (create/open/discard) andreview (approve/reject)
tickets:
•Toboth modify andreview tickets:
•Admin
•Tomodify tickets only:
•Edit Only
•Toreview tickets only:
•Deploy Only
ARead Only user cannot usetheChange Management feature. Note
Ifyouneed more granular roles toseparate these activities duetoyour organizational requirements, youcan
create separate roles toensure thatticket approval isassigned only tothose users who have theorganizational
authority toapprove changes. Tocreate anew user,navigate back toCDO andfrom theCDO navigation bar,
choose Settings >User Management .
Theapproach youtake depends onyour precise requirements. Forexample:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
150Onboard Devices toCloud-delivered Firewall Management Center
How toConfigure Devices intheChange Management Workflow

•Ifyour approvers should alsobeallowed tomake configuration changes, youcansimply assign them
thesystem-defined roles, such asAdministrator .Then, create custom configuration-only roles thatinclude
thesame permissions butnottheReview Tickets permission.
•Ifyouneed complete separation between approvers andthose who make configuration changes, create
custom roles forboth, limiting theroles toeither theModify Tickets ortheReview Tickets permission
plus allother needed permissions forviewing orchanging thesupported policies andobjects.
Policies and Objects that Support Change Management
Ifapolicy orobject supports thechange management workflow ,then creating, editing, ordeleting thepolicy
orobject, including assigning apolicy toadevice, must bedone inanopen ticket.
Any action, policy ,orobject thatdoes notsupport thechange management workflow canbecreated, edited,
ordeleted, andsoforth, without anopen ticket. Even ifaticket isopen, thechanges made tounsupported
policies arenotincluded intheticketed changes andareavailable fordeployment immediately .
Thefollowing listsinclude thepolicies andobjects thataresupported. Anything notlisted isunsupported.
Supported Policies
•Access Control, including rules, references toother policies, andinheritance settings.
•Device Configuration policies:
•Interfaces
•Inline Sets
•DHCP
•VTEP
•AllRouting
•FlexConfig
•Intrusion policy andNetwork Analysis Policy (NAP), Snort 3only.
•Network Address Translation (NAT)
•Platform Settings
•Prefilter
•QoS
•Umbrella SASE Topology
•VPN policies, both site-to-site andremote access
•Zero TrustAccess
Supported Objects
•AAA Server
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
151Onboard Devices toCloud-delivered Firewall Management Center
Policies and Objects that Support Change Management

•Access List
•Address Pools
•ASPath
•Community List
•DHCP IPv6 Pools
•DNS Server Group
•FlexConfig objects
•Group policy
•Interface
•Key Chain
•Network
•Policy List
•Port
•Prefix List
•Route Map
•SLA Monitor
•TimeRange
•TimeZone
•Tunnel Zone
•URL
•Variable Set
•VLAN Tag
•VPN objects (IKEv1, IKEv2 IPSec andpolicy ,PKIenrollment, certificate map)
Requirements and Prerequisites forChange Management
Model Support
Management Center
User Roles
•Toenable ordisable Change Management: Admin.
•Toboth modify andreview tickets:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
152Onboard Devices toCloud-delivered Firewall Management Center
Requirements and Prerequisites forChange Management

•Admin
•Tomodify tickets only:
•Edit Only
•Toreview tickets only:
•Deploy Only
Guidelines and Limitations forChange Management
•When operating inchange management mode, users canmake changes tosupported policies, butthey
cannot save thechanges. Forexample, youcould gothrough thedialog boxtocreate anew Platform
Settings policy without anopen ticket, butwhen youclick OKtoactually create thepolicy ,youwillget
anerror andthepolicy willnotbecreated.
•Thefollowing activities require thatalltickets beinaterminal state, thatis,approved ordiscarded:
backup/restore.
•Deleting adevice from theinventory requires thatalltickets involving thatdevice beapproved or
discarded.
•Some processes, such asdeployment andbackup/restore, prevent youfrom changing theChange
Management mode. Waituntil theprocess completes tochange themode.
•Yourability tocreate objects while configuring afeature isconstrained based onwhether thefeature and
objects areallsupported bychange management. Forexample, importing aconfiguration isnotsupported
bychange management. Therefore, youcannot create security zone objects, which aresupported, during
theimport. Ontheother hand, youcancreate newobjects while configuring access control rules, because
both aresupported.
When youcreate anobject from CDO, thesystem automatically creates aticket internally andallows
theobject tobeassociated with thecloud-delivered Firewall Management Center .Youdonothave to
create orhave anopen ticket todothis. However ,when youwant tocreate anobject from the
cloud-delivered Firewall Management Center ,youneed anexisting ticket orcreate one. Theobject is
synchronized toCDO only after theticket isapproved.
•When using cloud-delivered Firewall Management Center ,auserdefined inCisco Defense Orchestrator
isavailable tobeassigned tickets only after theuser cross-launches cdFMC atleast once. Until thefirst
cross-launch, theuser does notexist incdFMC .
Enabling orDisabling Change Management
Thedefault isthattheChange Management workflow isdisabled. Users donotneed toopen tickets andget
approval when making configuration changes. Ifyouwant toenforce theChange Management workflow ,
youmust enable itglobally forthesystem.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
153Onboard Devices toCloud-delivered Firewall Management Center
Guidelines and Limitations forChange Management

Before you begin
There areseveral system processes thatprevent youfrom enabling/disabling change management. Ifanyof
thefollowing areinprocess, youneed towait forthem tocomplete before changing these settings:
backup/restore; import/export; domain movement; upgrade; Flexconfig migration; device registration;
high-availability registration, creation, break, orswitch; cluster create, registration, break, edit, addorremove
nodes; EPM break outorjoin.
Anaccess control policy cannot belocked when youchange these settings. Ifapolicy islocked, youmust
wait forthelock tobereleased before enabling/disabling thisfeature.
Procedure
Step 1 Choose System (
)>Conf iguration .
Step 2 Click Change Management .
Step 3 Select Enable Change Management .
Todisable thefeature, deselect theoption. Alltickets must beapproved ordiscarded todisable Change
Management. Youcannot disable Change Management ifanyticket isintheInProgress, OnHold, Rejected,
orPending Approval state.
Step 4 Select theNumber ofappr ovalsrequir ed,which ishow many administrators must approve thechange for
theticket tobeapproved anddeployable. Thedefault is1,butyoucanrequire upto5approvers perticket.
Users canoverride thisnumber when creating tickets.
Step 5 Select theTicketPurgeDuration ,which isthenumber ofdays tokeep approved tickets, from 1-100 days.
Thedefault is5days.
Step 6 (Optional.) Enter theReply toAddr essandtheemail addresses fortheList ofApproverAddr esses .You
must alsoconfigure theEmail Notification system settings foremail towork.
Step 7 Click Save.
Thesystem adds theTicket(
)shortcut tothemenu bar,andtheSystem (
)>Change Management
Workflo wcommand. Users canmanage tickets using these methods.
Managing Tickets
When youenable Change Management, configuration changes forsupported policies must bedone within
thecontext ofaticket. Youopen aticket, make your changes, then submit theticket forapproval.
Youcanseealistoftickets, andcreate new ones, either ontheChange Management page orthrough the
Ticket quick-access menu. Allticket changes aresynchronized ineach menu, soyoucanswitch back and
forth atyour convenience andusewhichever method youprefer .
When youopen aticket andmake achange toasupported policy ,thatpolicy islocked from changes byother
users orthrough other tickets. Thepolicy remains locked until theticket isapproved ordiscarded.Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
154Onboard Devices toCloud-delivered Firewall Management Center
Managing Tickets

Procedure
Step 1 Doanyofthefollowing:
•Choose System (
)>Change Management Workflo wtoopen apage showing existing tickets.
•Click theTicket(
)quick-access menu. Theicon caneither benamed Select aTicket (ifnoticket is
opened), theticket name ifaticket isopened, orunnamed ifnotickets exist.
Both pages areorganized thesame. TheTickettablistsalltickets, whereas theReview tabliststickets that
have been submitted forapproval. Thedefault view shows your tickets only.
Step 2 OntheTickettab,take anyofthese actions:
•Tocreate anew ticket, click Add Ticket.
•Toview thedetails ofaticket, click the>next totheticket name. TheDetails page includes UUID,
name, description, user,lastmodified date, andcomments. TheHistory page includes thestatus changes
fortheticket. Theimage atthetopshows where theticket stands intheoverall workflow .
•Topreview theconfiguration changes foranopen ticket, click Preview (
).
•Tovalidate theconfiguration changes inanopen ticket, click Validate (
)orMore(
)>Validate .A
dialog boxopens showing error ,warning, andinformational messages, ifthere areanyvalidation errors.
•Toopen aticket, click Open (
)orMore(
)>Open .
•Toclose anopen ticket, click PutTicketonHold (X)orMore(
)>PutTicketonHold .Closing a
ticket does notsubmit itforreview ,nordoes itrelease anylocks placed onedited policies.
•Tosubmit anopen ticket forreview andapproval, click Submit forApproval(
)orMore(
)>Submit
forApproval.Theticket must beopen tobesubmitted.
•Todiscard aticket, click Discard (
)orMore(
)>Discard .
•Tosearch foraticket, type astring inthesearch box. Thesearch looks atticket name, description, and
responsible user.
•Tofilter thelistbyticket status (ontheChange Management Workflow page), click thestatus above the
list:New ,Open ,OnHold (ticket wasclosed), Rejected ,Pending Approval,Approved.Each status
hasacount ofthenumber oftickets inthatstate. Click Allunder MyTicketstoreturn tothedefault of
showing allofyour tickets, orAllunder TicketsinSystem toseeeveryone’ stickets.
Step 3 OntheReviews tab,take anyofthese actions onsubmitted tickets. Thelistisempty ifthere arenosubmitted
tickets. Inaddition, only users with Review Ticket permissions canseethistab.
•Topreview theconfiguration changes foraticket, click Preview (
).
•Tovalidate theconfiguration changes inanopen ticket, click Validate (
)orMore(
)>Validate .
•Toapprove theticket, click Approve(
)orMore(
)>Approve.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
155Onboard Devices toCloud-delivered Firewall Management Center
Managing Tickets

•Todisapprove theticket, click Reject (
)orMore(
)>Reject .
Creating Change Management Tickets
When using theChange Management workflow ,youmust doallconfiguration changes within thecontext of
anopen ticket. Ifyoudonotalready have aticket, youmust create anew one.
Procedure
Step 1 Choose System (
)>Change Management Workflo w,orclick theTicket(
)shortcut menu.
Step 2 Click Add Ticket.
Step 3 Configure theticket options:
•Name —The name oftheticket. Thename caninclude letters, numbers, spaces, andthefollowing special
characters: #-_!
•Description —An optional description ofwhat youintend toconfigure using thisticket. Forexample, if
youhave acase number related towhat youintend tofixusing thisticket, thatwould beuseful information
inadescription.
•Number ofApprovers—How many administrators must approve thechange fortheticket tobeapproved
anddeployable. Youcanspecify 1-5.
•Assign to—Select theuser who willown theticket andberesponsible forimplementing thechanges.
Choose selftoassign ittoyourself.
Step 4 Click oneofthefollowing: .
•Create—The ticket isadded tothelistoftickets, butitisnotopened. Youneed toopen itbefore you
canwork within thecontext oftheticket.
•Create andOpen —The ticket isadded tothelistoftickets andalsoopened.
Opening aTicket forConfiguration Changes
Before youcanmake changes within aticket, youmust open theticket.
Ifyouhave another ticket open, thesystem puts itonhold (closes it)foryoubefore opening thenew one.
Procedure
Step 1 Choose System (
)>Change Management Workflo w,orclick theTicket(
)shortcut menu.
Step 2 OntheTicketstab,click Open (
)orMore(
)>Open fortheticket.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
156Onboard Devices toCloud-delivered Firewall Management Center
Creating Change Management Tickets

Step 3 Optionally ,enter acomment fortheaction.
Step 4 Click Open .
Youcannow start your configuration changes. Thename oftheTicket icon changes tothename oftheopen
ticket.
Previewing aTicket
Youcanpreview aticket while making your configuration changes, orbefore approving it.Thepreview shows
allconfiguration changes made within thecontext oftheticket.
Procedure
Step 1 Choose System (
)>Change Management Workflo w,orclick theTicket(
)shortcut menu.
Step 2 Click Preview (
)fortheticket.
ThePreview dialog boxopens. Changes arecolor coded according tothelegend atthetopofthedialog box.
Step 3 Select thepolicy whose changes youwant toview intheChanged Policies list.
Youareshown both thecurrent version ofthepolicy asitisdefined inSecure Firewall Management Center
(ontheleft) andtheproposed changes defined within theticket.
Forpolicies thatcontain pages, such asPlatform Settings, youcanselect theoverall policy toseeallchanges,
orspecific pages within thepolicy ,intheChanged Policies list.
Youcannot alter thechanges from within thepreview .Ifyouneed tochange something, youmust close the
preview andreturn tothepolicy youwant tochange.
Step 4 Optionally ,click Download asPDF tosave thepreview toaPDF fileforoffline viewing orarchival purposes.
Step 5 Click OK.
Submitting aTicket
After youhave completed thechanges needed foraticket, youcanpreview andvalidate thechanges. Then,
when youaresatisfied with thechanges, submit theticket forreview andapproval.
Changes made within theticket arenotapplied until yousubmit theticket andtheticket isapproved. Until
approval happens, allpolicies modified within aticket arelocked tothatticket andcannot bechanged by
anyone else.
Procedure
Step 1 Choose System (
)>Change Management Workflo w,orclick theTicket(
)shortcut menu.
Step 2 Click Submit forApproval(
)orMore(
)>Submit forApprovalfortheopen ticket.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
157Onboard Devices toCloud-delivered Firewall Management Center
Previewing aTicket

Step 3 Optionally ,enter acomment foryour action.
Step 4 Click Submit .
Discarding aTicket
Ifyounolonger need tomake thechanges forwhich youcreated aticket, youcandiscard theticket. When
youdiscard aticket, anychanges thatyoumade within theticket areremoved.
Youcannot undo thisaction andretrieve aticket with itschanges. Ifyouneed them, youmust create anew
ticket andstart over.
Youcannot discard aticket after yousubmit it.However ,iftheapprover rejects theticket, youcanthen discard
it.
Ifyouhave permission tomodify tickets, youcandiscard tickets thatbelong toanother user.This makes it
possible todealwith situations where anadmin isonvacation orotherwise unavailable tomanage anin-process
ticket.Note
Procedure
Step 1 Choose System (
)>Change Management Workflo w,orclick theTicket(
)shortcut menu.
Step 2 Click Discard (
)orMore(
)>Discard fortheticket.
Step 3 Optionally ,enter acomment foryour action.
Step 4 Click Discard .
Approving orRejecting aTicket
When auser submits aticket, itmust beapproved forthechanges made within theticket tobecome active
andavailable fordeployment.
Whether youcanapprove your own tickets, orthere isaseparate approver ,depends onyour workplace policies
andhow user roles areassigned, notonthemanagement software.
TheDetails view includes asummary ofhow many approvers arerequired fortheticket, andwho hasapproved
theticket.
Ifthechanges areinadequate orundesirable, youcanreject theticket. Rejected tickets goback tothesubmitter ,
who canthen make additional changes andresubmit theticket, orsimply discard theticket andtheconfiguration
changes itcontains.
Procedure
Step 1 Choose System (
)>Change Management Workflo w,orclick theTicket(
)shortcut menu.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
158Onboard Devices toCloud-delivered Firewall Management Center
Discarding aTicket

Step 2 OntheReview tab,click Preview (
)fortheticket andevaluate theproposed changes.
Youcanalsoclick Validate (
)orMore(
)>Validate tocheck forerrors.
Step 3 After completing your evaluation, dooneofthefollowing:
•Toapprove theticket, click Approve(
)orMore(
)>Approve.
•Todisapprove theticket, click Reject (
)orMore(
)>Reject .
Step 4 Optionally ,enter acomment foryour action.
Step 5 Click ApproveorReject ,asappropriate.
History forChange Management
Details Minimum
Threat
DefenseMinimum
Management
CenterFeature
Youcanenable change management ifyour organization needs toimplement
more formal processes forconfiguration changes, including audit tracking and
official approval before changes aredeployed.
Weadded theSystem (
)>Conf iguration >Change Management page to
enable thefeature. When enabled, there isaSystem (
)>Change
Management Workflo wpage, andanew Ticket(
)quick access icon inthe
menu.
See: Change ManagementAny 20240514 Change management.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
159Onboard Devices toCloud-delivered Firewall Management Center
History forChange Management

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
160Onboard Devices toCloud-delivered Firewall Management Center
History forChange Management

CHAPTER 7
Users
Managed devices include adefault admin account forCLIaccess. This chapter discusses how tocreate custom
user accounts.
•About Users ,onpage 161
•Requirements andPrerequisites forUser Accounts forDevices ,onpage 162
•Guidelines andLimitations forUser Accounts forDevices ,onpage 163
•Add anInternal User attheCLI,onpage 163
•Troubleshooting LDAP Authentication Connections ,onpage 165
About Users
Youcanaddcustom useraccounts onmanaged devices, either asinternal users orasexternal users onaLDAP
orRADIUS server .Each managed device maintains separate user accounts. Forexample, when youadda
user tothemanagement center ,thatuser only hasaccess tothemanagement center ;youcannot then usethat
username tologdirectly intoamanaged device. Youmust separately addauser onthemanaged device.
Internal and External Users
Managed devices support twotypes ofusers:
•Internal user—The device checks alocal database foruser authentication.
•External user—If theuser isnotpresent inthelocal database, thesystem queries anexternal LDAP or
RADIUS authentication server .
CLIAccess
Firepower devices include aFirepower CLIthatruns ontopofLinux. Youcancreate internal users ondevices
using theCLI. Youcanestablish external users onthreat defense devices using themanagement center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
161

Users with CLIConfig level access canaccess theLinux shell using theexpert command, andobtainsudoers
privileges intheLinux shell, which canpresent asecurity risk. Forsystem security reasons, westrongly
recommend:
•Only usetheLinux shell under TACsupervision orwhen explicitly instructed byFirepower user
documentation.
•Make sure thatyourestrict thelistofusers with CLIaccess appropriately .
•When granting CLIaccess privileges, restrict thelistofusers with Config level access.
•Donotaddusers directly intheLinux shell; only usetheprocedures inthischapter .
•Donotaccess Firepower devices using CLIexpert mode unless directed byCisco TACorbyexplicit
instructions intheFirepower user documentation.Caution
CLIUser Roles
Onmanaged devices, user access tocommands intheCLIdepends ontheroleyouassign.
None
Theuser cannot logintothedevice onthecommand line.
Conf ig
Theuser canaccess allcommands, including configuration commands. Exercise caution inassigning
thislevel ofaccess tousers.
Basic
Theuser canaccess non-configuration commands only.Only internal users andthreat defense external
RADIUS users support theBasic role.
Requirements and Prerequisites forUser Accounts forDevices
Model Support
•Threat Defense —Internal andexternal users
Supported Domains
Any
User Roles
Configure external users— Super Admin orAdmin user
Configure internal users— Super Admin orAdmin user
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
162Onboard Devices toCloud-delivered Firewall Management Center
CLIUser Roles

Guidelines and Limitations forUser Accounts forDevices
Usernames
•Youcannot addthesame username forboth internal andexternal users. Iftheexternal server uses a
duplicate username, thedeployment tothedevice fails.
•Theusername must beLinux-valid:
•Maximum 32alphanumeric characters, plus hyphen (-)andunderscore (_)
•Alllowercase
•Cannot start with hyphen (-);cannot beallnumbers; cannot include aperiod (.),atsign (@), or
slash (/)
Defaults
Alldevices include anadmin user asalocal user account; youcannot delete theadmin user.Thedefault
initial password isAdmin123 ;thesystem forces youtochange thisduring theinitialization process. Seethe
getting started guide foryour model formore information about system initialization.
Number ofUser Accounts
Youcancreate amaximum of43user accounts fortheFirepower 1000 and2100 .
Add anInternal User attheCLI
UsetheCLItocreate internal users onthethreat defense .
Procedure
Step 1 Logintothedevice CLIusing anaccount with Config privileges.
Theadmin user account hastherequired privileges, butanyaccount with Config privileges willwork. You
canuseanSSH session ortheConsole port.
Forcertain threat defense models, theConsole portputsyouintotheFXOS CLI. Usetheconnect ftdcommand
togettothethreat defense CLI.
Step 2 Create theuser account.
configureuser addusername {basic |config}
•username —Sets theusername. Theusername must beLinux-valid:
•Maximum 32alphanumeric characters, plus hyphen (-)andunderscore (_)
•Alllowercase
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
163Onboard Devices toCloud-delivered Firewall Management Center
Guidelines and Limitations forUser Accounts forDevices

•Cannot start with hyphen (-);cannot beallnumbers; cannot include aperiod (.),atsign (@), or
slash (/)
•basic —Gives theuser basic access. This roledoes notallow theuser toenter configuration commands.
•config—Gives theuser configuration access. This rolegives theuser fulladministrator rights toall
commands.
Example:
Thefollowing example adds auser account named johncrichton with Config access rights. Thepassword is
notshown asyoutype it.
>configure useraddjohncrichton config
Enternewpassword foruserjohncrichton: newpassword
Confirm newpassword foruserjohncrichton: newpassword
>showuser
Login UIDAuthAccess Enabled Reset ExpWarnStrLockMax
admin 1000LocalConfig Enabled NoNeverN/ADisNoN/A
johncrichton 1001LocalConfig Enabled NoNeverN/ADisNo5
Tellusers they canchange their own passwords using theconfigurepassw ordcommand. Note
Step 3 (Optional) Adjust thecharacteristics oftheaccount tomeet your security requirements.
Youcanusethefollowing commands tochange thedefault account behavior .
•configureuser aging username max_days warn_days
Sets anexpiration date fortheuser's password. Specify themaximum number ofdays forthepassword
tobevalid followed bythenumber ofdays before expiration theuserwillbewarned about theupcoming
expiration. Both values are1to9999, butthewarning days must belessthan themaximum days. When
youcreate theaccount, there isnoexpiration date forthepassword.
•configureuser forcereset username
Forces theuser tochange thepassword onthenext login.
•configureuser maxfailedlogins username number
Sets themaximum number ofconsecutive failed logins youwillallow before locking theaccount, from
1to9999. Usetheconfigureuser unlock command tounlock accounts. Thedefault fornew accounts
is5consecutive failed logins.
•configureuser minpasswdlen username number
Sets aminimum password length, which canbefrom 1to127.
•configureuser strengthcheck username{enable|disable}
Enables ordisables password strength checking, which requires auser tomeet specific password criteria
when changing their password. When auser’spassword expires oriftheconfigureuser forcereset
command isused, thisrequirement isautomatically enabled thenext time theuser logs in.
Step 4 Manage user accounts asnecessary .
Users cangetlocked outoftheir accounts, oryoumight need toremove accounts orfixother issues. Usethe
following commands tomanage theuser accounts onthesystem.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
164Onboard Devices toCloud-delivered Firewall Management Center
Add anInternal User attheCLI

•configureuser access username{basic|config}
Changes theprivileges forauser account.
•configureuser delete username
Deletes thespecified account.
•configureuser disable username
Disables thespecified account without deleting it.Theuser cannot loginuntil youenable theaccount.
•configureuser enable username
Enables thespecified account.
•configureuser passw ord username
Changes thepassword forthespecified user.Users should normally change their own password using
theconfigurepassw ordcommand.
•configureuser unlock username
Unlocks auser account thatwaslocked duetoexceeding themaximum number ofconsecutive failed
login attempts.
Troubleshooting LDAP Authentication Connections
Ifyoucreate anLDAP authentication object anditeither does notsucceed inconnecting totheserver you
select ordoes notretrieve thelistofusers youwant, youcantune thesettings intheobject.
Iftheconnection fails when youtestit,trythefollowing suggestions totroubleshoot your configuration:
•Usethemessages displayed atthetopoftheweb interface screen andinthetestoutput todetermine
which areas oftheobject arecausing theissue.
•Check thattheuser name andpassword youused fortheobject arevalid:
•Check thatyouhave therights tobrowse tothedirectory indicated inyour base-distinguished name
byconnecting totheLDAP server using athird-party LDAP browser .
•Check thattheuser name isunique tothedirectory information treefortheLDAP server .
•IfyouseeanLDAP bind error 49inthetestoutput, theuser binding fortheuser failed. Try
authenticating totheserver through athird-party application toseeifthebinding fails through that
connection aswell.
•Check thatyouhave correctly identified theserver:
•Check thattheserver IPaddress orhost name iscorrect.
•Check thatyouhave TCP/IP access from your local appliance totheauthentication server where
youwant toconnect.
•Check thataccess totheserver isnotblocked byafirewall andthattheportyouhave configured
intheobject isopen.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
165Onboard Devices toCloud-delivered Firewall Management Center
Troubleshooting LDAP Authentication Connections

•Ifyouareusing acertificate toconnect viaTLS orSSL, thehost name inthecertificate must match
thehost name used fortheserver .
•Check thatyouhave notused anIPv6 address fortheserver connection ifyouareauthenticating
CLIaccess.
•Ifyouused server type defaults, check thatyouhave thecorrect server type andclick SetDefaults
again toreset thedefault values.
•Ifyoutyped inyour base-distinguished name, click Fetch DNs toretrieve alltheavailable base
distinguished names ontheserver ,andselect thename from thelist.
•Ifyouareusing anyfilters, access attributes, oradvanced settings, check thateach isvalid andtyped
correctly .
•Ifyouareusing anyfilters, access attributes, oradvanced settings, tryremoving each setting andtesting
theobject without it.
•Ifyouareusing abase filter oraCLIaccess filter ,make sure thatthefilter isenclosed inparentheses
andthatyouareusing avalid comparison operator (maximum 450characters, including theenclosing
parentheses).
•Totestamore restricted base filter ,trysetting ittothebase distinguished name fortheuser toretrieve
justthatuser.
•Ifyouareusing anencrypted connection:
•Check thatthename oftheLDAP server inthecertificate matches thehost name thatyouuseto
connect.
•Check thatyouhave notused anIPv6 address with anencrypted server connection.
•Ifyouareusing atestuser,make sure thattheuser name andpassword aretyped correctly .
•Ifyouareusing atestuser,remove theuser credentials andtesttheobject.
•Testthequery thatyouareusing byconnecting totheLDAP server andusing thissyntax:
ldapsearch -x-b'base_distinguished_name'
-hLDAPserver_ip_address -pport-v-D
'user_distinguished_name' -W'base_filter'
Forexample, ifyouaretrying toconnect tothesecurity domain onmyrtle.example.com using the
domainadmin@myrtle.example.com user andabase filter of(cn=* ),youcould testtheconnection using
thisstatement:
ldapsearch -x-b'CN=security,DC=myrtle,DC=example,DC=com'
-hmyrtle.example.com -p389-v-D
'domainadmin@myrtle.example.com' -W'(cn=*)'
Ifyoucantestyour connection successfully butauthentication does notwork after youdeploy aplatform
settings policy ,check thatauthentication andtheobject youwant touseareboth enabled intheplatform
settings policy thatisapplied tothedevice.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
166Onboard Devices toCloud-delivered Firewall Management Center
Troubleshooting LDAP Authentication Connections

Ifyouconnect successfully butwant toadjust thelistofusers retrieved byyour connection, youcanaddor
change abase filter orCLIaccess filter oruseamore restrictive orlessrestrictive base DN.
While authenticating aconnection toActive Directory (AD) server ,rarely theconnection event logindicates
blocked LDAP trafficalthough theconnection toADserver issuccessful. This incorrect connection logoccurs
when theADserver sends aduplicate reset packet. Thethreat defense device identifies thesecond reset packet
aspartofanew connection request andlogs theconnection with Block action.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
167Onboard Devices toCloud-delivered Firewall Management Center
Troubleshooting LDAP Authentication Connections

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
168Onboard Devices toCloud-delivered Firewall Management Center
Troubleshooting LDAP Authentication Connections

CHAPTER 8
Configuration Deployment
This chapter describes how todownload configuration changes tooneormore managed devices.
•About Configuration Deployment ,onpage 169
•Requirements andPrerequisites forPolicy Management ,onpage 180
•Best Practices forDeploying Configuration Changes ,onpage 180
•Deploy theConfiguration ,onpage 181
•Manage Deployments ,onpage 189
•History forConfiguration Deployment ,onpage 196
About Configuration Deployment
Alldevice configuration ismanaged bythemanagement center andthen deployed tothemanaged devices.
Configuration Changes that Require Deployment
Thesystem marks out-of-date policies with redstatus textthatindicates how many ofitstargeted devices
need apolicy update. Toclear thisstatus, youmust re-deploy thepolicy tothedevices.
Deployment Required
Configuration changes thatrequire adeployment include:
•Modifying anaccess control policy: anychanges toaccess control rules, thedefault action, policy targets,
Security Intelligence filtering, advanced options including preprocessing, andsoon.
•Modifying anyofthepolicies thattheaccess control policy invokes: theSSL policy ,network analysis
policies, intrusion policies, filepolicies, identity policies, orDNS policies.
•Changing anyreusable object orconfiguration used inanaccess control policy orpolicies itinvokes:
•network, port, VLAN tag,URL, andgeolocation objects
•Security Intelligence listsandfeeds
•application filters ordetectors
•intrusion policy variable sets
•filelists
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
169

•decryption-related objects andsecurity zones
•Updating thesystem software, intrusion rules, orthevulnerability database (VDB).
Keep inmind thatyoucanchange some ofthese configurations from multiple places intheweb interface.
Forexample, youcanmodify security zones using theobject manager (Objects >Object Management ),but
modifying aninterface type inadevice’ sconfiguration (Devices >Device Management )canalsochange a
zone andrequire adeployment.
Deployment Not Required
Note thatthefollowing updates donotrequire adeployment:
•automatic updates toSecurity Intelligence feeds andadditions totheSecurity Intelligence global Block
orDoNotBlock listusing thecontext menu
•automatic updates toURL filtering data
•scheduled geolocation database (GeoDB) updates
Deployment Preview
Preview provides asnapshot ofallthepolicy andobject changes tobedeployed onthedevice. Thepolicy
changes include thenewpolicies, changes intheexisting policies, andthedeleted policies. Theobject changes
include theadded andmodified objects which areused inpolicies. Theunused object changes arenotdisplayed
because they arenotdeployed onthedevice.
Thepreview shows allthedefault values, even when they arenotaltered, along with theother configured
settings when aninterface oraplatform settings policy isadded forthefirsttime. Similarly ,thehigh
availability-related policies anddefault values forsettings areshown, even when they arenotaltered, inthe
firstpreview after ahigh availability pairisconfigured ordisrupted.
Toview changes duetoanauto rollback, seeEdit Deployment Settings ,onpage 133.
Unsupported Features
•Object additions andattribute changes aredisplayed inthepreview only iftheobjects areassociated
with anydevice orinterface. Object deletions arenotdisplayed.
•Preview isnotsupported forthefollowing policies:
•High availability
•Network discovery
•Network analysis
•Device settings
•User information attherulelevel isnotavailable forintrusion policies.
•Thepreview does notshow thereordering ofrules across policies.
ForDNS policies, reordered rules appear inthepreview listasruleadditions anddeletions. Forexample,
moving arulefrom position 1toposition 3intheruleorder isdisplayed asiftherulewasdeleted from
position 1andadded asanew ruleinposition 3.Similarly ,when aruleisdeleted, therules under itare
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
170Onboard Devices toCloud-delivered Firewall Management Center
Deployment Preview

listed asedited rules asthey have changed their positions. Thechanges aredisplayed inthefinal order
inwhich they appear inthepolicy .
•Preview isnotsupported inthefollowing HAscenarios:
•Ifadevice wasinstandalone mode andifachain ismade, then anauto-deployment istriggered.
Forthatparticular job,preview isnotsupported. Onhover over thePreview (
),amessage is
displayed thatitisaHAbootstrap deployment, andnopreview issupported.
•Conf iguration groups -Consider aflow inwhich adevice wasinitially standalone. Subsequently ,
three deployments took place. Inthefourth deployment, thedevice wasaHAbootstrap deployment.
After these, theuser deploys devices 5,6,and7.Thedeployment 7isanHAbreak deployment,
andtheuser deploys devices 8,9,and10.
Inthisflow,thepreview between 3and5isnotsupported because 4wasaHAdeployment. Similarly ,
thepreview between 8and3isalsonotsupported. Preview issupported only from 3to1,7,6,5,4,
and10,9,and8.
•Ifadevice isbroken (HA isbroken) then thenew device isconsidered asafresh device.
Selective Policy Deployment
Themanagement center allows youtoselect aspecific policy within thelistofallthechanges onthedevice
thatareduefordeployment anddeploy only theselected policy .Selective deployment isavailable only for
thefollowing policies:
•Access control policies
•Intrusion policies
•Malware andfilepolicies
•DNS policies
•Identity policies
•SSL policies
•QoS policies
•Prefilter policies
•Network discovery
•NATpolicies
•Routing policies
•VPN policies
There arecertain limitations toselectively deploying policies. Follow thecontents inthetable below to
understand when selective policy deployment canbeused.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
171Onboard Devices toCloud-delivered Firewall Management Center
Selective Policy Deployment

Table 9:Limitations forSelective Deployment
Scenarios Description Type
Scenarios wherein afulldeployment isrequired
are:
•Thefirstdeployment after youhave upgraded
thethreat defense orthemanagement center .
•Thefirstdeployment after youhave restored
thethreat defense .
•Thefirstdeployment after modifications in
thethreat defense interface settings.
•Thefirstdeployment after modifications in
thevirtual router settings.
•When thethreat defense device ismoved toa
new domain (global tosub-domain or
sub-domain toglobal).Fulldeployment isnecessary for
specific deploy scenarios, andthe
management center does not
support selective deployment in
such scenarios. Ifyouencounter an
error insuch scenarios, youmay
choose toproceed byselecting all
thechanges fordeployment onthe
device.Fulldeployment
Scenarios wherein anassociated policy is
automatically selected:
•When anew object isassociated with an
existing policy .
•When anexisting policy's object ismodified.
Scenarios wherein multiple policies are
automatically selected:
•When anew object isassociated with an
existing policy ,andthesame object isalready
associated with other policies, allthe
associated policies areautomatically selected.
•When ashared object ismodified, allthe
associated policies areautomatically selected.Themanagement center identifies
interdependent policies which are
interlinked. When oneofthe
interlinked policies isselected, the
remaining interlinked policies are
automatically selected.Associated policy
deployment
Scenarios wherein color-coded interdependent
policies orobjects areautomatically selected:
•When alltheout-of-date policies have
interdependent changes.
Forexample, when anaccess control policy ,
anintrusion policy ,andaNATpolicy are
out-of-date. Since access control policy and
NATpolicy share anobject, allpolicies are
selected together fordeployment.
•When allout-of-date policies share anobject,
andtheobject ismodified.Themanagement center
dynamically detects dependencies
in-between policies, andbetween
theshared objects andthepolicies.
Theinterdependency oftheobjects
orpolicies isshown using
color-coded tags.Interdependent
policy changes
(shown using
color-coded tags)
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
172Onboard Devices toCloud-delivered Firewall Management Center
Selective Policy Deployment

Scenarios Description Type
Thescenarios andtheexpected behavior forAccess
Policy Group policies are:
•Iftheaccess control policy isout-of-date, all
other out-of-date policies under thisgroup,
except filepolicy andintrusion policy ,are
selected when theaccess control policy is
selected fordeployment.
However ,iftheaccess control policy is
out-of-date, intrusion andfilepolicies canbe
individually selected ordeselected irrespective
ofwhether theaccess control policy isselected
ornot,unless there areanydependent changes.
Forexample, ifanew intrusion policy is
assigned toanaccess control rule, itindicates
thatthere aredependent changes, then both
theaccess control policy andtheintrusion
policy willbeautomatically selected when
either ofthem isselected.
•Ifnoaccess control policy isout-of-date, other
out-of-date policies inthisgroup canbe
selected anddeployed individually .Access Policy Group policies are
listed together inthepreview
window under Access Policy
Groupwhen youclick Showor
Hide Policy (
).Access Policy
Group
specifications
System Username
Themanagement center displays theusername assystem forthefollowing operations:
•Rollback
•Upgrade
•Threat Defense backup andrestore
•SRU update
•LSP update
•VDB update
Auto-Enabling ofApplication Detectors
Ifyouareperforming application control butdisable required detectors, thesystem automatically enables the
appropriate system-provided detectors upon policy deploy .Ifnone exist, thesystem enables themost recently
modified user-defined detector fortheapplication.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
173Onboard Devices toCloud-delivered Firewall Management Center
System Username

Asset Rediscovery with Network Discovery Policy Changes
When youdeploy changes toanetwork discovery policy ,thesystem deletes andthen rediscovers MAC
address, TTL, andhops information from thenetwork map forthehosts inyour monitored networks. Also,
theaffected managed devices discard anydiscovery data thathasnotyetbeen senttothemanagement center .
Snort Restart Scenarios
When thetrafficinspection engine referred toastheSnort process onamanaged device restarts, inspection
isinterrupted until theprocess resumes. Whether trafficdrops during thisinterruption orpasses without further
inspection depends onhow thetargetdevice handles traffic.SeeSnort Restart TrafficBehavior ,onpage 176
formore information. Additionally ,resource demands may result inasmall number ofpackets dropping
without inspection when youdeploy ,regardless ofwhether theSnort process restarts.
Any ofthescenarios inthefollowing table cause theSnort process torestart.
Table 10:Snort Restart Scenarios
More Information Restart Scenario
Configurations thatRestart theSnort Process When
Deployed orActivated ,onpage 178Deploying aspecific configuration thatrequires the
Snort process torestart.
Changes thatImmediately Restart theSnort Process ,
onpage 179Modifying aconfiguration thatimmediately restarts
theSnort process.
Configure Automatic Application Bypass ,onpage
131Traffic-activation ofthecurrently deployed Automatic
Application Bypass (AAB) configuration.
Seethesection Log toRamdisk inTroubleshoot
Drain ofFMC Unprocessed Events .Enabling ordisabling "Logging connection events to
RAM disk" feature.
Related Topics
Access Control Policy Advanced Settings ,onpage 1672
Configurations thatRestart theSnort Process When Deployed orActivated ,onpage 178
Restart Warnings forDevices
When youdeploy ,theInspect Interruption column inthedeploy page specifies whether adeployed
configuration restarts theSnort process onthethreat defense device. When thetrafficinspection engine referred
toastheSnort process restarts, inspection isinterrupted until theprocess resumes. Whether trafficisinterrupted
orpasses without inspection during theinterruption depends onhow thedevice handles traffic.Note thatyou
canproceed with thedeployment, cancel thedeployment andmodify theconfiguration, ordelay thedeployment
until atime when deploying would have theleast impact onyour network.
When theInspect Interruption column indicates Yesandyouexpand thedevice configuration listing, the
system indicates anyspecific configuration type thatwould restart theSnort process with anInspect
Interruption (
).When youhover your mouse over theicon, amessage informs youthatdeploying the
configuration may interrupt traffic.
Thefollowing table summarizes how thedeploy page displays inspection interruption warnings.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
174Onboard Devices toCloud-delivered Firewall Management Center
Asset Rediscovery with Network Discovery Policy Changes

Table 11:Inspection Interruption Indicators
Description Inspect Interruption Type
Atleast oneconfiguration would interrupt
inspection onthedevice ifdeployed, andmight
interrupt trafficdepending onhow thedevice
handles traffic.Youcanexpand thedevice
configuration listing formore information.Inspect Interruption
(
)YesThreat Defense
Deployed configurations willnotinterrupt traffic
onthedevice.--
Thesystem cannot determine ifadeployed
configuration may interrupt trafficonthedevice.
Undetermined status isdisplayed before thefirst
deployment after asoftware upgrade, orinsome
cases during aSupport call.Undetermined
Thesystem cannot determine thestatus duetoan
internal error .
Cancel theoperation andclick Deploy again to
allow thesystem toredetermine theInspect
Interruption status. Iftheproblem persists,
contact Support.Errors(
)
Thedevice identified assensor isnotthethreat
defense device; thesystem does notdetermine if
adeployed configuration may interrupt trafficon
thisdevice.-- sensor
Forinformation onallconfigurations thatrestart theSnort process foralldevice types, seeConfigurations
thatRestart theSnort Process When Deployed orActivated ,onpage 178.
Inspect Traffic During Policy Apply
Inspect traff icduring policy apply isanadvanced access control policy general setting thatallows managed
devices toinspect trafficwhile deploying configuration changes; thisisthecase unless aconfiguration that
youdeploy requires theSnort process torestart. Youcanconfigure thisoption asfollows:
•Enabled —Trafficisinspected during thedeployment unless certain configurations require theSnort
process torestart.
When theconfigurations youdeploy donotrequire aSnort restart, thesystem initially uses thecurrently
deployed access control policy toinspect traffic,andswitches during deployment totheaccess control
policy youaredeploying.
•Disabled —Trafficisnotinspected during thedeployment. TheSnort process always restarts when you
deploy .
Thefollowing graphic illustrates how Snort restarts canoccur when youenable ordisable Inspect traff ic
during policy apply .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
175Onboard Devices toCloud-delivered Firewall Management Center
Inspect Traffic During Policy Apply

When youdeploy ,resource demands may result inasmall number ofpackets dropping without inspection.
Additionally ,deploying some configurations restarts theSnort process, which interrupts trafficinspection.
Whether trafficdrops during thisinterruption orpasses without further inspection depends onhow thetarget
device handles traffic.SeeSnort Restart TrafficBehavior ,onpage 176andConfigurations thatRestart the
Snort Process When Deployed orActivated ,onpage 178.Caution
Snort Restart Traffic Behavior
Thefollowing tables explain how different devices handle trafficwhen theSnort process restarts.
Table 12:The Threat Defense and theThreat Defense Virtual Restart Traffic Effects
Restart Traffic Behavior Interface Configuration
dropped inline: Snort FailOpen: Down:disabled
passed without inspection
Some packets canbedelayed inbufferforseveral
seconds before thesystem recognizes thatSnort is
down. This delay canvary depending upon theload
distribution. However ,thebuffered packets are
eventually passed.inline: Snort FailOpen: Down:enabled
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
176Onboard Devices toCloud-delivered Firewall Management Center
Snort Restart Traffic Behavior

Restart Traffic Behavior Interface Configuration
existing TCP/UDP flows: passed without inspection
solong asatleast onepacket arrives while Snort is
down
new TCP/UDP flows andallnon-TCP/UDP flows:
dropped
Note thatthefollowing trafficdrops even when
preserve-connection isenabled:
•plaintext, passthrough prefilter tunnel trafficthat
matches anAnalyze ruleaction oranAnalyze
alltunnel traff icdefault policy action
•connections thatdonotmatch anaccess control
ruleandareinstead handled bythedefault action.
•decrypted TLS/SSL traffic
•asafesearch flow
•acaptive portal flowrouted, transparent (including EtherChannel,
redundant, subinterface): preserve-connection
enabled (configuresnort preserve-connection
enable ;default)
Formore information, seeCisco Secure Firewall
Threat Defense Command Reference .
dropped routed, transparent (including EtherChannel,
redundant, subinterface): preserve-connection
disabled (configuresnort preserve-connection
disable )
egress packet immediately ,copy bypasses Snort inline: tapmode
uninterrupted, notinspected passive
Inaddition totraffichandling when theSnort process isdown while itrestarts, trafficcanalsopass without
inspection ordrop when theSnort process isbusy,depending ontheconfiguration oftheSnort FailOpen
Busy option (seeConfigure anInline Set,onpage 892).Adevice supports either theFailsafe option orthe
Snort FailOpen option, butnotboth.Note
When theSnort process isbusy butnotdown during configuration deployment, some packets may drop on
routed, switched, ortransparent interfaces ifthetotal CPU load exceeds 60percent.Note
Donotreboot thesystem while theSnort Rule Update isinprogress. Warning
Snort-busy drops happen when snort isnotabletoprocess thepackets fastenough. Lina does notknow whether
Snort isbusy duetoprocessing delay ,orifisstuck orduetocallblocking. When transmission queue isfull,
snort-busy drops occur .Based onTransmission queue utilization, Lina willtrytoaccess ifthequeue isbeing
serviced smoothly .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
177Onboard Devices toCloud-delivered Firewall Management Center
Snort Restart Traffic Behavior

Configurations that Restart theSnort Process When Deployed orActivated
Deploying anyofthefollowing configurations except AAB restarts theSnort process asdescribed. Deploying
AAB does notcause arestart, butexcessive packet latency activates thecurrently deployed AAB configuration,
causing apartial restart oftheSnort process.
Access Control Policy Advanced Settings
•Deploy when Inspect TrafficDuring Policy Apply isdisabled.
•Add orremove anSSL policy .
File Policy
Deploy thefirstorlastofanyoneofthefollowing configurations; note thatwhile otherwise deploying these
filepolicy configurations does notcause arestart, deploying non-file-policy configurations cancause restarts.
•Takeeither ofthefollowing actions:
•Enable ordisable Inspect Archiveswhen thedeployed access control policy includes atleast one
filepolicy .
•Add thefirstorremove thelastfilepolicy rulewhen Inspect Archivesisenabled (note thatatleast
oneruleisrequired forInspect Archivestobemeaningful).
•Enable ordisable StorefilesinaDetect Files orBlock Files rule.
•Add thefirstorremove thelastactive filerulethatcombines theMalwar eCloud Lookup orBlock
Malwar eruleaction with ananalysis option (Sper oAnalysis orMSEXE ,Dynamic Analysis ,orLocal
Malwar eAnalysis )orastore files option (Malwar e,Unkno wn,Clean ,orCustom ).
Note thataccess control rules thatdeploy these filepolicy configurations tosecurity zones ortunnel zones
cause arestart only when your configuration meets thefollowing conditions:
•Source ordestination security zones inyour access control rulemust match thesecurity zones associated
with interfaces onthetargetdevices.
•Unless thedestination zone inyouaccess control ruleisany,asource tunnel zone intherulemust match
atunnel zone assigned toatunnel ruleintheprefilter policy .
Identity Policy
•When SSL decryption isdisabled (that is,when theaccess control policy does notinclude anSSL policy),
addthefirstorremove thelastactive authentication rule.
Anactive authentication rulehaseither anActiveAuthentication ruleaction, oraPassiveAuthentication
ruleaction with Useactiveauthentication ifpassi veorVPN identity cannot beestablished selected.
Network Discovery
•Enable ordisable non-authoritative, traffic-based userdetection over theHTTP ,FTP,orMDNS protocols,
using thenetwork discovery policy .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
178Onboard Devices toCloud-delivered Firewall Management Center
Configurations that Restart theSnort Process When Deployed orActivated

Device Management
•MTU: Change thehighest MTU value among allnon-management interfaces onadevice.
•Automatic Application Bypass (AAB): Thecurrently deployed AAB configuration activates when a
malfunction oftheSnort process oradevice misconfiguration causes asingle packet touseanexcessive
amount ofprocessing time. Theresult isapartial restart oftheSnort process toalleviate extremely high
latency orprevent acomplete trafficstall. This partial restart causes afewpackets topass without
inspection, ordrop, depending onhow thedevice handles traffic.
Updates
•System update: Deploy configurations thefirsttime after asoftware update thatincludes anew version
oftheSnort binary ordata acquisition library (DAQ).
•VDB: Formanaged devices running Snort 2,deploying configurations thefirsttime after installing a
vulnerability database (VDB) update thatincludes changes applicable tomanaged devices willrequire
adetection engine restart andmay result inatemporary trafficinterruption. Forthese, amessage warns
youwhen youselect themanagement center tobegin installing. Thedeploy dialog provides additional
warnings forthethreat defense devices when VDB changes arepending. VDB updates thatapply only
tothemanagement center donotcause detection engine restarts, andyoucannot deploy them.
Formanaged devices running Snort 3,deploying configurations thefirsttime after installing avulnerability
database (VDB) update may temporarily interrupt application detection, butthere willbenotraffic
interruptions.
Related Topics
Deploy Configuration Changes ,onpage 182
Snort Restart Scenarios ,onpage 174
Changes that Immediately Restart theSnort Process
Thefollowing changes immediately restart theSnort process without going through thedeploy process. How
therestart affects trafficdepends onhow thetargetdevice handles traffic.SeeSnort Restart TrafficBehavior ,
onpage 176formore information.
•Takeanyofthefollowing actions involving applications orapplication detectors:
•Activate ordeactivate asystem orcustom application detector .
•Delete anactivated custom detector .
•SaveandReacti vateanactivated custom detector .
•Create auser-defined application.
Amessage warns youthatcontinuing restarts theSnort process, andallows youtocancel; therestart
occurs onanymanaged device inthecurrent domain orinanyofitschild domains.
•Create orbreak athreat defense high availability pair.
Amessage warns youthatcontinuing tocreate ahigh availability pairrestarts theSnort process onthe
primary andsecondary devices andallows youtocancel.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
179Onboard Devices toCloud-delivered Firewall Management Center
Changes that Immediately Restart theSnort Process

Requirements and Prerequisites forPolicy Management
Model Support
Any.
Supported Domains
Any
User Roles
•Admin
•Network Admin
•Security Approver
Best Practices forDeploying Configuration Changes
Thefollowing areguidelines fordeploying configuration changes.
Reliable Management Connection
Themanagement connection between themanagement center andthedevice isasecure, TLS-1.3-encrypted
communication channel between itself andthedevice.
Youdonotneed torunthistrafficover anadditional encrypted tunnel such asSite-to-Site VPN forsecurity
purposes. IftheVPN goes down, forexample, youwillloseyour management connection, sowerecommend
asimple management path.
Werecommend against adevice's management connection going through aVPN tunnel thatterminates on
thedevice itself. Ifyoudeploy aconfiguration change thatcauses theVPN togodown, themanagement
connection willbedisconnected andyouwillnothave anywaytorecover theconfiguration without connecting
directly tothedevice.
Ifmanagement trafficexits aVPN-terminating interface, besure toexclude themanagement trafficfrom the
VPN tunnel.Caution
Maximum Concurrent Deployments
Youshould notdeploy tomore than 25% ofthemaximum devices allowed foramanagement center inthe
same job.Forexample, fortheFMCv300, themaximum jobsizeshould be75devices (25% of300). Concurrent
deployment tomore devices cancause performance issues.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
180Onboard Devices toCloud-delivered Firewall Management Center
Requirements and Prerequisites forPolicy Management

Deployment ofShared Policies
Forbestperformance, deploy todevices thatusethesame policies. Create separate deployment jobs foreach
group ofdevices thatshare policies.
Time toDeploy and Memory Limitations
Thetime ittakes todeploy depends onmultiple factors, including (butnotlimited to):
•Theconfigurations yousend tothedevice. Forexample, ifyoudramatically increase thenumber of
Security Intelligence entries youblock, deployment cantake longer .
•Device model andmemory .Onlower-memory devices, deploying cantake longer .
Donotexceed thecapability ofyour devices. Ifyouexceed themaximum number ofrules orpolicies supported
byatargetdevice, thesystem displays awarning. Themaximum depends onanumber offactors—not only
memory andthenumber ofprocessors onthedevice, butalsoonpolicy andrulecomplexity .Forinformation
onoptimizing policies andrules, seeBest Practices forAccess Control Rules ,onpage 1655 .
Use aMaintenance Window toLessen theImpact ofTraffic Interruptions
Westrongly recommend youdeploy inamaintenance window oratatime when interruptions willhave the
least impact.
When youdeploy ,resource demands may result inasmall number ofpackets dropping without inspection.
Additionally ,deploying some configurations restarts theSnort process, which interrupts trafficinspection.
Whether trafficdrops during thisinterruption orpasses without further inspection depends onhow thetarget
device handles traffic.SeeSnort Restart TrafficBehavior ,onpage 176andConfigurations thatRestart the
Snort Process When Deployed orActivated ,onpage 178.
Forthethreat defense devices, theInspect Interruption column intheDeploy dialog warns youwhen
deploying might interrupt trafficflow orinspection. Youcaneither proceed with, cancel, ordelay deployment;
seeRestart Warnings forDevices ,onpage 174formore information.
Related Topics
Snort Restart Scenarios ,onpage 174
Deploy theConfiguration
After youconfigure your deployment, andanytime youchange thatconfiguration, youmust deploy the
changes toaffected devices. Youcanview deployment status intheMessage Center .
Deploying updates thefollowing components:
•Device andinterface configurations
•Device-related policies: NAT,VPN, QoS, platform settings
•Access control andrelated policies: DNS, file,identity ,intrusion, network analysis, prefilter ,SSL
•Network discovery policy
•Intrusion ruleupdates
•Configurations andobjects associated with anyofthese elements
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
181Onboard Devices toCloud-delivered Firewall Management Center
Deploy theConfiguration

Youcanconfigure thesystem todeploy automatically byscheduling adeploy taskorbysetting thesystem
todeploy when importing intrusion ruleupdates. Automating policy deployment isespecially useful ifyou
allow intrusion ruleupdates tomodify system-provided base policies forintrusion andnetwork analysis.
Intrusion ruleupdates canalsomodify default values fortheadvanced preprocessing andperformance options
inyour access control policies.
Deploy Configuration Changes
After youchange configurations, deploy them totheaffected devices. Westrongly recommend thatyoudeploy
inamaintenance window oratatime when anyinterruptions totrafficflow andinspection willhave theleast
impact.
When youdeploy ,resource demands may result inasmall number ofpackets dropping without inspection.
Additionally ,deploying some configurations restarts theSnort process, which interrupts trafficinspection.
Whether trafficdrops during thisinterruption orpasses without further inspection depends onhow thetarget
device handles traffic.SeeSnort Restart TrafficBehavior ,onpage 176andConfigurations thatRestart the
Snort Process When Deployed orActivated ,onpage 178.Caution
Before you begin
•Besure allmanaged devices usethesame revision oftheSecurity Zones object. Ifyouhave edited
security zone objects: Donotdeploy configuration changes toanydevice until youeditthezone setting
forinterfaces onalldevices youwant tosync. Youmust deploy toallmanaged devices atthesame time.
•Topreview thedeployment changes, enable REST APIaccess. Toenable theREST APIaccess, follow
thesteps inEnabling REST APIAccess intheCisco Secure Firewall Management Center Administration
Guide .
Thedeployment process fails ifthedevice configuration isbeing read atthedevice CLIduring deployment.
Donotexecute commands such asshowrunning-conf igduring thedeployment.Note
Procedure
Step 1 Onthemanagement center menu bar,click Deploy .
Step 2 Foraquick deployment, check specific devices andthen click Deploy ,orclick Deploy Alltodeploy toall
devices. Otherwise, foradditional deployment options, click Advanced Deploy .
Therestofthisprocedure applies totheAdvanced Deploy screen.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
182Onboard Devices toCloud-delivered Firewall Management Center
Deploy Configuration Changes

Figure 46:Quick Deploy
Figure 47:Advanced Deploy
Step 3 Click Expand Arrow(
)toview device-specific configuration changes tobedeployed.
Figure 48:Expand
•TheModif iedBycolumn liststheusers who have modified thepolicies orobjects. Onexpanding the
device listing, youcanview theusers who have modified thepolicies against each policy listing. For
information about when theSystem userisshown (instead ofthelogged-in user), seeSystem Username ,
onpage 173.
Usernames arenotprovided fordeleted policies andobjects. Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
183Onboard Devices toCloud-delivered Firewall Management Center
Deploy Configuration Changes

•TheInspect Interruption column indicates iftrafficinspection interruption may becaused inthedevice
during deployment.
When thestatus indicates (Yes)thatdeploying willinterrupt inspection, andperhaps traffic,onthethreat
defense device, theexpanded listindicates thespecific configurations causing theinterruption with the
Inspect Interruption (
).
Iftheentry isblank inthiscolumn foradevice, then itindicates thatthere willbenotrafficinspection
interruptions onthatdevice during deployment.
SeeRestart Warnings forDevices ,onpage 174forinformation tohelp youidentify configurations that
interrupt trafficinspection andmight interrupt trafficwhen deployed tothethreat defense devices.
•TheLast Modif iedTimecolumn specifies when youlastmade theconfiguration changes.
•ThePreview column allows youtopreview thechanges forthenext deployment.
•TheStatus column provides thestatus foreach deployment. Formore information, seeViewDeployment
Status ,onpage 189.
Step 4 InthePreview column, click Preview (
)toseetheconfiguration changes thatyoucandeploy .
Figure 49:Preview
Ifyouchange themanagement center name inSystem (
)>Conf iguration >Information ,the
deployment preview does notspecify thischange, yetitrequires adeployment.Note
Forunsupported features forPreview ,seeDeployment Preview ,onpage 170.
TheComparison Viewtablistsallthepolicy andobject changes. Theleftpane listsallthedifferent policy
types thathave changed onthedevice, organized inatreestructure.
Figure 50:Comparison View
TheFilter icon (
)letsyoufilter thepolicies attheuser level andpolicy level.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
184Onboard Devices toCloud-delivered Firewall Management Center
Deploy Configuration Changes

Theright pane listsalltheadditions, changes, ordeletions inthepolicy ,ortheobject selected intheleftpane.
Thetwocolumns ontheright pane provide thelastdeployed configuration settings (intheDeploy edVersion
column) versus thechanges thatareduefordeployment (intheVersion onFirewall Management Center
column). Thelast-deployed configuration settings arederived from asnapshot ofthelastsaved deployment
inthemanagement center andnotfrom thedevice. Thebackground colors ofthesettings arecolor-coded as
perthelegend available onthetop-right ofthepage.
TheModif iedBycolumn liststheusers who have modified, oradded theconfiguration settings. Atthepolicy
level, themanagement center displays alltheusers who have modified thepolicy ,andattherulelevel, the
management center displays only thelastuser who hasmodified therule.
Youcandownload acopy ofthechange logbyclicking theDownload Report button.
TheAdvanced Viewtabshows theCLIcommands thatwillbeapplied. This view isuseful ifyouarefamiliar
with ASA CLI, which isused ontheback endofthethreat defense .
Figure 51:Advanced View
Step 5 UseShoworHide Policy (
)toselectively view orhide theassociated unmodified policies.
Figure 52:Show orHide Policy
Step 6 Check theboxnext tothedevice name todeploy allconfiguration changes, orclick Policy selection (
)to
select individual policies orconfigurations todeploy while withholding theremaining changes without
deploying them.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
185Onboard Devices toCloud-delivered Firewall Management Center
Deploy Configuration Changes

Youcanalsoview theinterdependent changes foracertain policy orconfiguration using thisoption. The
management center dynamically detects dependencies between policies (forexample, between anaccess
control policy andanintrusion policy), andbetween theshared objects andthepolicies. Interdependent changes
areindicated using color-coded tagstoidentify asetofinterdependent deployment changes. When oneofthe
deployment changes isselected, theinterdependent changes areautomatically selected.
Formore details, seeSelective Policy Deployment ,onpage 171.
•When thechanges inshared objects aredeployed, theimpacted policies should alsobedeployed
along with them. When youselect ashared object during deployment, theimpacted policies are
automatically selected.
•Selective deployment isnotsupported forscheduled deployments anddeployments using REST
APIs. Youcanonly optforcomplete deployment ofallthechanges inthese cases.
•Thepre-deployment checks forwarnings anderrors areperformed notonly ontheselected
policies, butonallthepolicies thatareout-of-date. Therefore, thewarnings orerrors listshows
thedeselected policies aswell.
•Similarly ,theInspect Interruption column indication ontheDeployment page considers all
out-of-date policies andnotjusttheselected policies. Forinformation ontheInspect Interruption
column, seeRestart Warnings forDevices ,onpage 174.Note
Step 7 After youselect thedevices orpolicies todeploy ,click Estimate togetarough estimate ofthedeployment
duration .
Figure 53:Estimate
Figure 54:Deploy Time
Thetime duration isarough estimate (having around 70% accuracy), andtheactual time taken fordeployment
may vary forafewscenarios. Theestimate isdependable fordeployments ofupto20devices.
When anestimate isnotavailable, itindicates thatthedataisnotavailable, since thefirstsuccessful deployment
ontheselected device ispending. This situation could occur after themanagement center reimage, version
upgrade, orafter ahigh availability failover .
Theestimate isincorrect andunreliable forbulk policy changes (incase ofbulk policy migrations),
andselective deployments because theestimate isbased ontheheuristic technique.Note
Step 8 Click Deploy .
Step 9 Ifthesystem identifies errors orwarnings inthechanges tobedeployed, itdisplays them intheValidation
Messages window .Toview complete details, click thearrow icon before thewarnings orerrors.
Youhave thefollowing choices:
•Deploy—Continue deploying without resolving warning conditions. Check theIgnor ewarnings checkbox,
toignore warnings anddeploy thechanges. Youcannot proceed ifthesystem identifies errors.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
186Onboard Devices toCloud-delivered Firewall Management Center
Deploy Configuration Changes

•Close—Exit without deploying. Resolve theerror andwarning conditions, andattempt todeploy the
configuration again.
What todonext
•(Optional) Monitor deployment status; seeViewing Deployment Messa gesintheCisco Secure Firewall
Management Center Administration Guide .
•Ifthedeployment fails, seeBest Practices forDeploying Configuration Changes ,onpage 180.
•During deployment, ifthere arespecific configuration changes inthedeployment, thedeployment failure
may lead totrafficbeing interrupted. Forexample, inacluster environment, anerroneous configuration
ofanIPaddress thatisnotinthesame subnet astheSiteIPsisconfigured ontheinterface. Due tothis
error ,deployment fails andthedevice attempts toclear theconfiguration while therollback operation is
being processed. These events collectively lead toadeployment failure thatinterrupts thetraffic.
Seethefollowing table toknow what configuration changes may cause trafficinterruption when
deployment fails.
Traffic Impacted? Exists? Configuration Changes
Yes Yes ThreatDefense Servicechanges
inanaccess control policy
Yes Yes VRF
Yes Yes Interface
Yes Yes QoS
Theconfiguration changes interrupting trafficduring deployment isvalid only
ifboth themanagement center andthethreat defense areofversion 6.2.3 or
higher .Note
Related Topics
Snort Restart Scenarios ,onpage 174
Redeploy Existing Configurations toaDevice
Youcanforce-deploy existing (unchanged) configurations toasingle managed device. Westrongly recommend
youdeploy inamaintenance window oratatime when anyinterruptions totrafficflow andinspection will
have theleast impact.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
187Onboard Devices toCloud-delivered Firewall Management Center
Redeploy Existing Configurations toaDevice

When youdeploy ,resource demands may result inasmall number ofpackets dropping without inspection.
Additionally ,deploying some configurations restarts theSnort process, which interrupts trafficinspection.
Whether trafficdrops during thisinterruption orpasses without further inspection depends onhow thetarget
device handles traffic.SeeSnort Restart TrafficBehavior ,onpage 176andConfigurations thatRestart the
Snort Process When Deployed orActivated ,onpage 178.Caution
Before you begin
Review theguidelines described inBest Practices forDeploying Configuration Changes ,onpage 180.
Procedure
Step 1 Choose Devices >Device Management .
Step 2 Click Edit (
)next tothedevice where youwant toforce deployment.
Step 3 Click Device.
Step 4 Click Edit (
)next totheGeneral section heading.
Step 5 Click ForceDeploy (
).
Force-deploy takes more time than theregular deployment because itinvolves thecomplete generation
ofthepolicy rules tobedeployed onthethreat defense .Note
Step 6 Click Deploy .
Thesystem identifies anyerrors orwarnings with theconfigurations youaredeploying. Youcanclick Proceed
tocontinue without resolving warning conditions. However ,youcannot proceed ifthesystem identifies an
error .
What todonext
•(Optional) Monitor deployment status; seeViewing Deployment Messa gesintheCisco Secure Firewall
Management Center Administration Guide .
•Ifdeploy fails, seeBest Practices forDeploying Configuration Changes ,onpage 180.
Related Topics
Snort Restart Scenarios ,onpage 174
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
188Onboard Devices toCloud-delivered Firewall Management Center
Redeploy Existing Configurations toaDevice

Manage Deployments
View Deployment Status
OntheDeployment page, theStatus column provides thedeployment status foreach device. Ifadeployment
isinprogress, then thelivestatus ofthedeployment progress isdisplayed, elseoneofthefollowing statuses
isdisplayed:
•Pending—Indicates thatthere arechanges inthedevice thataretobedeployed.
•Warnings orerrors—Indicates thatthepre-deployment checks have identified warnings orerrors forthe
deployment, andyouhave notproceeded with thedeployment. Youcancontinue with thedeployment
ifthere areanywarnings, butnotifthere areanyerrors.
Thestatus column provides thewarning orerror status only forasingle user
session onthedeployment page. Ifyounavigate away from thepage orrefresh
thepage, thestatus changes topending.Note
•Failed—Indicates thattheprevious deployment attempt failed. Click onthestatus toview thedetails.
•Inqueue—Indicates thatdeployment isinitiated, andthesystem isyettostart thedeployment process.
•Completed—Indicates thatdeployment hascompleted successfully .
View Deployment History
Inthedeployment history ,thelast10successful deployments, thelast5failed deployments, andlast5rollback
deployments arecaptured.
Procedure
Step 1 Onthemanagement center menu bar,click Deploy andthen click Deployment History (
).
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
189Onboard Devices toCloud-delivered Firewall Management Center
Manage Deployments

Figure 55:Deployment History Icon
Alistofalltheprevious deployment androllback jobs isdisplayed inreverse chronological order .
Figure 56:Deployment History Page
Step 2 Click Expand Arrow(
)next totherequired deployment jobtoview thedevices included inthejoband
their deployment statuses.
Figure 57:Expand
•Viewnotes intheDeployment Notes column.
Deployment notes arecustom notes thatauser canaddaspartofthedeployment, andthese notes are
optional.
Step 3 (Optional) Click Transcript Details (
)toview thecommands senttothedevice, andtheresponses received.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
190Onboard Devices toCloud-delivered Firewall Management Center
View Deployment History

Figure 58:Transcript Details Icon
Figure 59:Transcript Details
Thetranscript includes thefollowing sections:
•Snort Apply —If there areanyfailures orresponses from Snort-related policies, then themessages are
displayed inthissection. Normally ,thesection isempty .
•CLI Apply —This section covers features thatareconfigured using commands thataresenttothedevice.
•Infrastructur eMessages —This section shows thestatus ofdifferent deployment modules.
IntheCLI Apply section, thedeployment transcript includes commands thataresenttothedevice, andany
responses returned from thedevice. These responses canbeinformative messages orerror messages. For
failed deployments, look formessages thatindicate errors with thecommands. Examining these errors can
beparticularly helpful ifyouareusing FlexConfig policies toconfigure customized features. These errors
canhelp youcorrect thescript intheFlexConfig object thatistrying toconfigure thecommands.
There isnodistinction thatismade inthetranscript between commands thataresentformanaged
features andthose generated from FlexConfig policies.Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
191Onboard Devices toCloud-delivered Firewall Management Center
View Deployment History

Forexample, thefollowing sequence shows thatmanagement center sentcommands toconfigure
GigabitEthernet0/0 with thelogical name outside .Thedevice responded thatitautomatically setthesecurity
level to0.Threat Defense does notusethesecurity level foranything.
========= CLIAPPLY=========
FMC>>interface GigabitEthernet0/0
FMC>>nameifoutside
FTDv192.168.0.152 >>[info]:INFO:Security levelfor"outside" setto0bydefault.
Step 4 (Optional) Click Preview (
)toview thepolicy andobject changes deployed onthedevice versus the
previously deployed version.
Figure 60:Preview Icon
a.Tocompare anytwoversions andview thechange log,choose therequired versions inthedrop-down
boxes andclick theShowbutton. Thedrop-down boxes show thedeployment jobname andtheendtime
ofthedeployment.
Figure 61:Compare Versions
Thedrop-down boxes alsoshow failed deployments. Note
b.TheModif iedBycolumn liststheusers who have modified thepolicies orobjects.
1.Atthepolicy level, management center displays alltheuser names who have modified thepolicy .
2.Attherulelevel, management center displays thelastuser who hasmodified therule.
c.Youcanalsodownload acopy ofthechange logbyclicking Download Report .
•Deployment history preview isnotsupported forcertificate enrollments, HAoperations, and
failed deployments.
•When adevice isregistered, preview isnotsupported forthejobhistory record thatiscreated.Note
Step 5 (Optional) Against each deployment job,click theMore(
)icon andexecute other actions:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
192Onboard Devices toCloud-delivered Firewall Management Center
View Deployment History

•Bookmark —Tobookmark thedeployment job.
•Edit Deployment Notes —Toedityour custom deployment notes thatyouadded foradeployment job.
•Generate Report —Togenerate adeployment report, which canbeused forauditing. This report includes
jobproperties with preview andtranscript information, andthereport canbedownloaded asaPDF file.
a.Click Generate Report togenerate adeployment report.
Figure 62:Generate Report
b.IntheGenerate Report popup window ,check theEmail checkbox.
c.Thereport canalsobesentthrough email ifmail relay host isconfigured. Ifthemail relay host in
notconfigured, usetheEdit (
)icon toconfigure ormodify themail relay host. Conf iguring a
Mail Relay Host andNotif ication Addr essintheCisco Secure Firewall Management Center
Administration Guide .
d.IntheRecipient List,youcanenter multiple email adddresses, separated bysemicolons.
e.Click Generate togenerate thereport, andthisreport isemailed totherecipients.
f.IntheNotifications tasktab,youcantrack theprogress. After thereport generation iscomplete, click
thelinkinthenotification tasktabtodownload thePDF report.
Download Policy Changes Report forMultiple Devices
Download reports onthepolicy andobject changes made since your lastdeployment formultiple threat
defense devices. Youcandownload thereports intheform ofazipfilethatcontains thefollowing reports:
•Apending changes report foreach device, thatpreviews theadditions, updates, ordeletions inthepolicy ,
ortheobjects thataretobedeployed onthedevice. Formore information, seeDeploy Configuration
Changes ,onpage 182andDeployment Preview .
•Aconsolidated report thatcategorizes each device based onthereport status.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
193Onboard Devices toCloud-delivered Firewall Management Center
Download Policy Changes Report forMultiple Devices

Procedure
Step 1 Choose Deploy >Advanced Deploy .
Step 2 Check thecheck boxnext tothedevices forwhich youwant togenerate apending policy changes report, and
then click Pending Changes Reports .
Step 3 Click Pending Changes Reports .Reports aregenerated inthebackground.
Step 4 Onthemanagement center menu bar,choose Notif ications >Tasks toview thereport generation task.
When thereport request taskiscomplete, thedownload linkappears within thetasknotification.
Step 5 Click theDownload Report(s) linktodownload thereports.
Compare Policies
Toreview policy changes forcompliance with your organization's standards ortooptimize system performance,
youcanexamine thedifferences between twopolicies orbetween asaved policy andtherunning configuration.
Youcancompare thefollowing policy types:
•DNS
•File
•Health
•Identity
•Intrusion (Only Snort 2policies)
•Network Analysis
•SSL
Thecomparison view displays both policies inaside-by-side format. Differences between thetwopolicies
arehighlighted:
•Blue indicates thatthehighlighted setting isdifferent inthetwopolicies, andthedifference isnoted in
redtext.
•Green indicates thatthehighlighted setting appears inonepolicy butnottheother .
Before you begin
Youcancompare policies only ifyouhave access rights andanyrequired licenses forthespecific policy ,and
youareinthecorrect domain forconfiguring thepolicy .
Procedure
Step 1 Access themanagement page forthepolicy youwant tocompare:
•DNS— Policies >Access Contr ol>DNS
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
194Onboard Devices toCloud-delivered Firewall Management Center
Compare Policies

•File— Policies >Access Contr ol>Malwar e&File
•Health— System (
)>Health >Policy
•Identity— Policies >Access Contr ol>Identity
•Intrusion— Policies >Access Contr ol>Intrusion
Youcancompare only Snort 2policies. Note
•Network Analysis— Policies >Access Contr ol,then click Netw orkAnalysis Policy orPolicies >
Access Contr ol>Intrusion ,then click Netw orkAnalysis Policies
Ifyour custom user rolelimits access tothefirstpath listed here, usethesecond path toaccess
thepolicy .Note
•SSL— Policies >Access Contr ol>Decryption
Step 2 Click Compar ePolicies .
Step 3 From theCompar eAgainst drop-down list,choose thetype ofcomparison youwant tomake:
•Tocompare twodifferent policies, choose Other Policy .
•Tocompare tworevisions ofthesame policy ,choose Other Revision .
•Tocompare another policy tothecurrently active policy ,choose Running Conf iguration .
Step 4 Depending onthecomparison type youchoose, youhave thefollowing choices:
•Ifyouarecomparing twodifferent policies, choose thepolicies youwant tocompare from thePolicy A
andPolicy Bdrop-down lists.
•Ifyouarecomparing therunning configuration toanother policy ,choose thesecond policy from the
Policy Bdrop-down list.
Step 5 Click OK.
Step 6 Review thecomparison results:
•Comparison Viewer—T ousethecomparison viewer tonavigate individually through policy differences,
click Previous orNext above thetitlebar.
•Comparison Report—T ogenerate aPDF report thatliststhedifferences between thetwopolicies, click
Comparison Report .
Generate Current Policy Reports
Formost policies, youcangenerate twokinds ofreports. Areport onasingle policy provides details onthe
policy's current saved configuration, while acomparison report listsonly thedifferences between twopolicies.
Youcangenerate asingle-policy report forallpolicy types except health.
Intrusion policy reports combine thesettings inthebase policy with thesettings ofthepolicy layers, andmake
nodistinction between which settings originated inthebase policy orpolicy layer .Note
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
195Onboard Devices toCloud-delivered Firewall Management Center
Generate Current Policy Reports

Before you begin
Youcangenerate policy reports only ifyouhave access rights andanyrequired licenses forthespecific policy ,
andyouareinthecorrect domain forconfiguring thepolicy .
Procedure
Step 1 Access themanagement page forthepolicy forwhich youwant togenerate areport:
•Access Control— Policies >Access Contr ol
•DNS— Policies >Access Contr ol>DNS
•File— Policies >Access Contr ol>Malwar e&File
•Health— System (
)>Health >Policy
•Identity— Policies >Access Contr ol>Identity
•Intrusion— Policies >Access Contr ol>Intrusion
•NAT—Devices >NAT
•Network Analysis— Policies >Access Contr ol,then click Netw orkAnalysis Policy orPolicies >
Access Contr ol>Intrusion ,then click Netw orkAnalysis Policies
Ifyour custom user rolelimits access tothefirstpath listed here, usethesecond path toaccess
thepolicy .Note
•SSL— Policies >Access Contr ol>Decryption
Step 2 Click Report (
)next tothepolicy forwhich youwant togenerate areport.
History forConfiguration Deployment
Details Minimum
Threat
DefenseMinimum
Management
CenterFeature
Youcangenerate, view ,anddownload (asazipfile) thefollowing reports on
configuration changes since your lastdeployment:
•Apolicy changes report foreach device thatpreviews theadditions,
changes, ordeletions inthepolicy ,ortheobjects thataretobedeployed
onthedevice.
•Aconsolidated report thatcategorizes each device based onthestatus of
policy changes report generation.
This isespecially useful after youupgrade threat defense devices, sothatyou
canseethechanges made bytheupgrade before youdeploy .
New/modified screens: Deploy >Advanced Deploy .
See: Download Policy Changes Report forMultiple DevicesAny Any Viewandgenerate
reports onconfiguration
changes since your last
deployment.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
196Onboard Devices toCloud-delivered Firewall Management Center
History forConfiguration Deployment

Details Minimum
Threat
DefenseMinimum
Management
CenterFeature
Youcannow generate areport foranydeployment.
New/modified screens: Deploy >Deployment History (
)icon >More
(
)Generate ReportAny 7.2 Generate andemail a
report when youdeploy
configuration changes.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
197Onboard Devices toCloud-delivered Firewall Management Center
History forConfiguration Deployment

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
198Onboard Devices toCloud-delivered Firewall Management Center
History forConfiguration Deployment

PARTIII
System Settings
•System Configuration ,onpage 201
•Users ,onpage 207
•Updates ,onpage 213
•Licenses ,onpage 227
•Security Certifications Compliance ,onpage 255

CHAPTER 9
System Configuration
This chapter explains how toconfigure system configuration settings ontheSecure Firewall Management
Center .
•Requirements andPrerequisites fortheSystem Configuration ,onpage 201
•Manage theSecure Firewall Management Center System Configuration ,onpage 201
•Access Control Preferences ,onpage 202
•Change Reconciliation ,onpage 203
•Email Notification ,onpage 204
•Intrusion Policy Preferences ,onpage 204
•Manager Remote Access ,onpage 205
•Network Analysis Policy Preferences ,onpage 205
Requirements and Prerequisites fortheSystem Configuration
Model Support
Management Center
Supported Domains
Global
User Roles
Admin
Manage theSecure Firewall Management Center System
Configuration
Thesystem configuration identifies basic settings forthemanagement center .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
201

Procedure
Step 1 Choose System (
)>Conf iguration .
Step 2 Usethenavigation panel tochoose configurations tochange.
Access Control Preferences
Configure access control preferences onSystem (
)>Conf iguration >Access Contr olPreferences .
Requiring Comments onRule Changes
Youcantrack changes toaccess control rules byallowing (orrequiring) users tocomment when they save.
This allows youtoquickly assess why critical policies inadeployment were modified. Bydefault, thisfeature
isdisabled.
Object Optimization
When youdeploy rulepolicies toafirewall device, youcanconfigure themanagement center toevaluate and
optimize thenetwork/host policy objects thatyouuseintherules when itcreates theassociated network object
groups onthedevice. Optimization mergesadjacent networks andremoves redundant network entries. This
reduces theruntime access listdata structures andthesizeoftheconfiguration, which canbebeneficial to
some firewall devices thatarememory-constrained.
Forexample, consider anetwork/host object thatcontains thefollowing entries andthatisused inanaccess
rule:
192.168.1.0/24
192.168.1.23
10.1.1.0
10.1.1.1
10.1.1.2/31
When optimization isenabled, when youdeploy thepolicy ,theresulting object group configuration isgenerated:
object-group network test
description (Optimized bymanagement center)
network-object 10.1.1.0 255.255.255.252
network-object 192.168.1.0 255.255.255.0
When optimization isdisabled, thegroup configuration would beasfollows:
object-group network test
network-object 192.168.1.0 255.255.255.0
network-object 192.168.1.23 255.255.255.255
network-object 10.1.1.0 255.255.255.255
network-object 10.1.1.1 255.255.255.255
network-object 10.1.1.2 255.255.255.254
This optimization does notchange thedefinition ofthenetwork/host object, nordoes itcreate anew
network/host policy object. Ifanetwork object-group contains another network, hostobject, orobject-groups,
theobjects arenotcombined. Instead, each network object-group isoptimized separately .Also, only inline
values ofnetwork object-groups arebeing modified aspartoftheoptimization process during adeployment.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
202System Settings
Access Control Preferences

Theoptimizations occur onthemana geddeviceonthefirstdeploy after thefeature isenabled onthe
management center .Ifyouhave ahigh number ofrules, thesystem cantake several minutes toanhour to
evaluate your policies andperform object optimization. During thistime, youmay alsoseehigher CPU use
onyour devices. Asimilar thing occurs onthefirstdeploy after thefeature isdisabled. After thisfeature is
enabled ordisabled, werecommend youdeploy when itwillhave theleast impact, such asamaintenance
window oralow-traf fictime.Important
This feature isenabled bydefault. Todisable it,contact Cisco TAC.
Change Reconciliation
Tomonitor thechanges thatusers make andensure thatthey follow your organization’ spreferred standard,
youcanconfigure thesystem tosend, viaemail, adetailed report ofchanges made over thepast24hours.
Whenever auser saves changes tothesystem configuration, asnapshot istaken ofthechanges. Thechange
reconciliation report combines information from these snapshots topresent aclear summary ofrecent system
changes.
Thefollowing sample graphic displays aUser section ofanexample change reconciliation report andlists
both theprevious value foreach configuration andthevalue after changes. When users make multiple changes
tothesame configuration, thereport listssummaries ofeach distinct change inchronological order ,beginning
with themost recent.
Youcanview changes made during theprevious 24hours.
Configuring Change Reconciliation
Procedure
Step 1 Choose System (
)>Conf iguration .
Step 2 Click Change Reconciliation .
Step 3 Check theEnable check box.
Step 4 Choose thetime ofdayyouwant thesystem tosend outthechange reconciliation report from theTimeto
Run drop-down lists.
Step 5 Enter email addresses intheEmail tofield.
Once youhave added email addresses, click Resend Last Report tosend recipients another copy of
themost recent change reconciliation report.Tip
Step 6 Ifyouwant toinclude policy changes, check theInclude Policy Conf iguration check box.
Step 7 Ifyouwant toinclude allchanges over thepast24hours, check theShowFull Change History check box.
Step 8 Click Save.
Related Topics
Using theAudit LogtoExamine Changes
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
203System Settings
Change Reconciliation

Change Reconciliation Options
TheInclude Policy Conf iguration option controls whether thesystem includes records ofpolicy changes in
thechange reconciliation report. This includes changes toaccess control, intrusion, system, health, andnetwork
discovery policies. Ifyoudonotselect thisoption, thereport willnotshow changes toanypolicies. This
option isavailable onmanagement center sonly.
TheShowFull Change History option controls whether thesystem includes records ofallchanges over the
past24hours inthechange reconciliation report. Ifyoudonotselect thisoption, thereport includes only a
consolidated view ofchanges foreach category .
Thechange reconciliation report does notinclude changes tothreat defense interfaces androuting settings. Note
Email Notification
Youcannot configure amail host. Themail relay host ishardcoded tobeused from astatic host. Itissetto
email-smtp.us-west-2.amazonaws.com with authorization. Fornotifications, theemail sender issetto
cdo-alert@cisco.com
Intrusion Policy Preferences
Configure various intrusion policy preferences tomonitor andtrack changes tothecritical policies inyour
deployment.
SetIntrusion Policy Preferences
Configure theintrusion policy preferences.
Procedure
Step 1 Choose System (
)>Conf iguration .
Step 2 Click Intrusion Policy Preferences .
Step 3 Youhave thefollowing options:
•Comments onpolicy change :Check thischeck boxtotrack policy-related changes using thecomment
functionality when users modify intrusion policies. Withpolicy change comments enabled, administrators
canquickly assess why critical policies inadeployment were modified.
Ifyouenable comments onpolicy changes, youcanmake thecomment optional ormandatory .The
management center prompts theuser foracomment when each new change toapolicy issaved.
•Write changes inIntrusion Policy toaudit log:Check thischeck boxtorecord thechanges tothe
intrusion policies totheaudit logs. This option isenabled bydefault.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
204System Settings
Change Reconciliation Options

•Retain user overrides fordeleted Snort 3rules :Check thischeck boxtogetnotifications forchanges
toanyoverridden system-defined rules during LSP updates. When enabled, thesystem retains therule
overrides inthenew replacement rules thatareadded aspartoftheLSP update. Onthemanagement
center menu bar,click Notif ications >Tasks toview thenotifications. This option isenabled bydefault.
Manager Remote Access
Ifmanaged devices donothave public IPaddresses, then enter themanagement center 'sFQDN orpublic IP
address thatthedevice willusetoestablish themanagement connection. Forexample, ifthemanagement
center 'smanagement interface IPaddress isbeing NATted byanupstream router ,provide thepublic NAT
address here. AnFQDN ispreferred because itguards against IPaddress changes.
Ifyouusetheserial number (zero-touch provisioning )method toregister adevice, then thisfield isused
automatically fortheinitial configuration ofthemanager IPaddress/hostname. Ifyouusethemanual method,
youcanrefer tothevalue onthisscreen when youperform thedevice's initial configuration toidentify the
public management center IPaddress/hostname.
Figure 63:Manager Remote Access
Network Analysis Policy Preferences
Youcanconfigure thesystem totrack policy-related changes using thecomment functionality when users
modify network analysis policies. Withpolicy change comments enabled, administrators canquickly assess
why critical policies inadeployment were modified.
Ifyouenable comments onpolicy changes, youcanmake thecomment optional ormandatory .Thesystem
prompts theuser foracomment when each new change toapolicy issaved.
Optionally ,youcanhave changes tonetwork analysis policies written totheaudit log.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
205System Settings
Manager Remote Access

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
206System Settings
Network Analysis Policy Preferences

CHAPTER 10
Users
Themanagement center includes default admin accounts forwebandCLIaccess. This chapter discusses how
tocreate custom user accounts.
•About Users ,onpage 207
•Create aUser Record with YourCDO Username ,onpage 210
•Troubleshooting LDAP Authentication Connections ,onpage 211
About Users
Youcanaddcustom useraccounts onmanaged devices, either asinternal users orasexternal users onaLDAP
orRADIUS server .Each managed device maintains separate user accounts. Forexample, when youadda
user tothemanagement center ,thatuser only hasaccess tothemanagement center ;youcannot then usethat
username tologdirectly intoamanaged device. Youmust separately addauser onthemanaged device.
Internal and External Users
Managed devices support twotypes ofusers:
•Internal user—The device checks alocal database foruser authentication.
•External user—If theuser isnotpresent inthelocal database, thesystem queries anexternal LDAP or
RADIUS authentication server .
User Roles
WebInterface User Roles
There areavariety ofuser roles inCisco Defense Orchestrator (CDO): Read-Only ,Edit-Only ,Deploy-only ,
Admin, andSuper Admin. User roles areconfigured foreach user oneach tenant. IfaCDO user hasaccess
tomore than onetenant, they may have thesame user IDbutdifferent roles ondifferent tenants. Auser may
have aread-only roleononetenant andaSuper Admin roleonanother .When theinterface orthedocumentation
refers toaRead-only user,Deploy Only ,Edit Only ,anAdmin user,oraSuper Admin user wearedescribing
thatuser's permission level onaparticular tenant. Note thatyoucannot create userroles inthecloud-delivered
Firewall Management Center because ituses CDO user roles.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
207

Read Only
Read Only users canview alldevice configurations butnotchange them.
Deploy Only
Deploy Only users canaudit queued changes made todevice configurations anddeploy them butcannot
change them.
Edit Only
Edit Only users canmake changes toalldevice configurations butcannot deploy them todevices.
Super Admin andAdmin
Super Admin andAdmin users canaccess everything intheproduct. Thedifference between Super
Admin andAdmin users isthatSuper Admins cancreate accounts forother users onatenant andmodify
existing user roles, while admins cannnot.
Toknow more about user roles inCDO, seeUser Roles .
Thefollowing table maps theuser roles inOn-Prem Firewall Management Center totheir equivalent roles in
thecloud-delivered Firewall Management Center inCDO.
Werecommend thatyouread through thetable only ifyouarefamiliar with theuserroles inOn-Prem Firewall
Management Center .Tip
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
208System Settings
User Roles

Table 13:Secure Firewall Management Center and Cloud-delivered Firewall Management Center User Role Mapping
Capabilities Equivalent Cloud-delivered
Firewall Management Center User
RoleOn-Prem Firewall Management
Center User Role
Youcansearch, filter ,orview the
following:
•Access control policies and
associated features
•Intrusion policies
•Intrusion rules
•Network discovery rules
•Custom detectors
•Correlation policies
•Objects
•Rulesets
•Interfaces
•VPN configurations
•Monitoring- and
maintenance-related settings
Youcanback uporrestore adevice
butcannot deploy policies tothe
devices.Edit Only Access Admin, Discovery Admin,
Intrusion Admin, Maintenance User
Youcanaccess allfeatures ofthe
cloud-delivered Firewall
Management Center andperform
tasks, including create, read,
modify ,ordelete policies orobjects
anddeploy those changes tothe
devices. Youcanalsoedituser
roles orcreate userrecords inCDO.Super Admin Administrator
Youcanaccess allfeatures ofthe
cloud-delivered Firewall
Management Center andperform
tasks, including create, read,
modify ,ordelete policies orobjects
anddeploy those changes tothe
devices. However ,youcannot edit
user roles orcreate user records in
CDO.Admin Network Admin
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
209System Settings
User Roles

Capabilities Equivalent Cloud-delivered
Firewall Management Center User
RoleOn-Prem Firewall Management
Center User Role
Youcanview device information,
policies, objects, andtheir related
settings butcannot dothe
following:
•Create oreditobjects
•Create oreditpolicies
•Modify device configurations
•Backup orrestore devicesRead Only Security Analyst, Security Analyst
(Read Only)
Youcanview most settings and
deploy staged changes todevices
butcannot create ormodify objects
orpolicies.Deploy Only Security Approver
Create aUser Record with YourCDO Username
Only aCDO user with Super Admin privileges cancreate theCDO user record. TheSuper Admin must
create theuser record with thesame email address thatwasspecified intheCreate YourCDO User name
taskabove.
Usethefollowing procedure tocreate auser record with anappropriate user role:
Procedure
Step 1 Login toCDO .
Step 2 Intheleftpane, choose Settings >User Management .
Step 3 Click
 toaddanew user toyour tenant.
Step 4 Provide theemail address oftheuser.
Theuser's email address must correspond totheemail address oftheCisco Secure Log-On account. Note
Step 5 From theRole drop-down list,select theuser's role.
Step 6 Click OK.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
210System Settings
Create aUser Record with YourCDO Username

Troubleshooting LDAP Authentication Connections
Ifyoucreate anLDAP authentication object anditeither does notsucceed inconnecting totheserver you
select ordoes notretrieve thelistofusers youwant, youcantune thesettings intheobject.
Iftheconnection fails when youtestit,trythefollowing suggestions totroubleshoot your configuration:
•Usethemessages displayed atthetopoftheweb interface screen andinthetestoutput todetermine
which areas oftheobject arecausing theissue.
•Check thattheuser name andpassword youused fortheobject arevalid:
•Check thatyouhave therights tobrowse tothedirectory indicated inyour base-distinguished name
byconnecting totheLDAP server using athird-party LDAP browser .
•Check thattheuser name isunique tothedirectory information treefortheLDAP server .
•IfyouseeanLDAP bind error 49inthetestoutput, theuser binding fortheuser failed. Try
authenticating totheserver through athird-party application toseeifthebinding fails through that
connection aswell.
•Check thatyouhave correctly identified theserver:
•Check thattheserver IPaddress orhost name iscorrect.
•Check thatyouhave TCP/IP access from your local appliance totheauthentication server where
youwant toconnect.
•Check thataccess totheserver isnotblocked byafirewall andthattheportyouhave configured
intheobject isopen.
•Ifyouareusing acertificate toconnect viaTLS orSSL, thehost name inthecertificate must match
thehost name used fortheserver .
•Check thatyouhave notused anIPv6 address fortheserver connection ifyouareauthenticating
CLIaccess.
•Ifyouused server type defaults, check thatyouhave thecorrect server type andclick SetDefaults
again toreset thedefault values.
•Ifyoutyped inyour base-distinguished name, click Fetch DNs toretrieve alltheavailable base
distinguished names ontheserver ,andselect thename from thelist.
•Ifyouareusing anyfilters, access attributes, oradvanced settings, check thateach isvalid andtyped
correctly .
•Ifyouareusing anyfilters, access attributes, oradvanced settings, tryremoving each setting andtesting
theobject without it.
•Ifyouareusing abase filter oraCLIaccess filter ,make sure thatthefilter isenclosed inparentheses
andthatyouareusing avalid comparison operator (maximum 450characters, including theenclosing
parentheses).
•Totestamore restricted base filter ,trysetting ittothebase distinguished name fortheuser toretrieve
justthatuser.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
211System Settings
Troubleshooting LDAP Authentication Connections

•Ifyouareusing anencrypted connection:
•Check thatthename oftheLDAP server inthecertificate matches thehost name thatyouuseto
connect.
•Check thatyouhave notused anIPv6 address with anencrypted server connection.
•Ifyouareusing atestuser,make sure thattheuser name andpassword aretyped correctly .
•Ifyouareusing atestuser,remove theuser credentials andtesttheobject.
•Testthequery thatyouareusing byconnecting totheLDAP server andusing thissyntax:
ldapsearch -x-b'base_distinguished_name'
-hLDAPserver_ip_address -pport-v-D
'user_distinguished_name' -W'base_filter'
Forexample, ifyouaretrying toconnect tothesecurity domain onmyrtle.example.com using the
domainadmin@myrtle.example.com user andabase filter of(cn=* ),youcould testtheconnection using
thisstatement:
ldapsearch -x-b'CN=security,DC=myrtle,DC=example,DC=com'
-hmyrtle.example.com -p389-v-D
'domainadmin@myrtle.example.com' -W'(cn=*)'
Ifyoucantestyour connection successfully butauthentication does notwork after youdeploy aplatform
settings policy ,check thatauthentication andtheobject youwant touseareboth enabled intheplatform
settings policy thatisapplied tothedevice.
Ifyouconnect successfully butwant toadjust thelistofusers retrieved byyour connection, youcanaddor
change abase filter orCLIaccess filter oruseamore restrictive orlessrestrictive base DN.
While authenticating aconnection toActive Directory (AD) server ,rarely theconnection event logindicates
blocked LDAP trafficalthough theconnection toADserver issuccessful. This incorrect connection logoccurs
when theADserver sends aduplicate reset packet. Thethreat defense device identifies thesecond reset packet
aspartofanew connection request andlogs theconnection with Block action.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
212System Settings
Troubleshooting LDAP Authentication Connections

CHAPTER 11
Updates
This chapter explains how toperform content updates.
Toupgrade managed devices, seetheCisco Secure Firewall Threat Defense Upgrade Guide forCloud-Delivered
Firewall Management Center .
Onthecloud-delivered Firewall Management Center ,choose System (
)>Product Upgrades toaccess the
Threat Defense Upgrade page. Youcanalsoaccess thepage from Devices >Upgrade .Important
•About System Updates ,onpage 213
•Guidelines andLimitations forSystem Updates ,onpage 215
•Update theVulnerability Database (VDB) ,onpage 215
•Update theGeolocation Database (GeoDB) ,onpage 217
•Update Intrusion Rules ,onpage 218
About System Updates
Usethemanagement center toupgrade thesystem software forthedevices itmanages. Youcanalsoupdate
various databases andfeeds thatprovide advanced services.
Ifthemanagement center hasinternet access, thesystem canoften obtain updates directly from Cisco. We
recommend youschedule orenable automatic content updates whenever possible. Some updates are
auto-enabled bytheinitial setup process orwhen youenable therelated feature. Other updates youmust
schedule yourself. After initial setup, werecommend youreview allauto-updates andadjust them ifnecessary .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
213

Table 14:Upgrades and Updates
Details Description Component
DirectDownload: Youcanaccess Upgrade Packages
Management page from System >Product Upgrades .You
candirectly download allupgrade packages (major releases,
maintenance releases, patches etc.) thatapply toyour devices.
Youwillneed tomanually upload hotfixes.
Schedule Install: Patches andmaintenance releases only,asa
scheduled task.
Uninstall: Patches only.
Revert:Major andmaintenance releases only.
Reimage: Major andmaintenance releases only.
See: Cisco Secure Firewall Threat Defense Upgrade Guide for
Cloud-Delivered Firewall Management CenterMajor software releases contain new
features, functionality ,andenhancements.
They may include infrastructure or
architectural changes.
Maintenance releases contain general bug
andsecurity related fixes. Behavior changes
arerare, andarerelated tothose fixes.
Patchesareon-demand updates limited to
critical fixes with time urgency .
Hotfixescanaddress specific customer
issues.System software
DirectDownload: Yes.
Schedule: Yes,asascheduled task.
Uninstall: Starting with VDB 357, youcaninstall anyVDB as
farback asthebaseline VDB forthemanagement center .
See: Update theVulnerability Database (VDB) ,onpage 215TheCisco vulnerability database (VDB) is
adatabase ofknown vulnerabilities to
which hosts may besusceptible, aswell as
fingerprints foroperating systems, clients,
andapplications. Thesystem uses theVDB
tohelp determine whether aparticular host
increases your riskofcompromise.Vulnerability database
(VDB)
DirectDownload: Yes.
Schedule: Yes,from itsown update page
Uninstall: No.
See: Update theGeolocation Database (GeoDB) ,onpage 217TheCisco geolocation database (GeoDB)
isadatabase ofgeographical and
connection-related data associated with
routable IPaddresses.Geolocation database
(GeoDB)
DirectDownload: Yes.
Schedule: Yes,from itsown update page.
Uninstall: No.
See: Update Intrusion Rules ,onpage 218Intrusion ruleupdates provide new and
updated intrusion rules andpreprocessor
rules, modified states forexisting rules, and
modified default intrusion policy settings.
Rule updates may alsodelete rules, provide
new rulecategories anddefault variables,
andmodify default variable values.Intrusion rules
(SRU/LSP)
DirectDownload: Yes.
Schedule: Yes,from theobject manager .
Uninstall: No.
See: Cisco Secure Firewall Management Center Device
Configuration GuideSecurity Intelligence feeds arecollections
ofIPaddresses, domain names, andURLs
thatyoucanusetoquickly filter trafficthat
matches anentry .Security Intelligence
feeds
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
214System Settings
About System Updates

Details Description Component
DirectDownload: Yes.
Schedule: Yes,when youconfigure integrations/cloud services,
orasascheduled task.
Uninstall: No.
See: Cisco Secure Firewall Management Center Device
Configuration GuideURL filtering allows youtocontrol access
towebsites based ontheURL ’sgeneral
classification (category) andrisklevel
(reputation).URL categories and
reputations
Guidelines and Limitations forSystem Updates
Before YouUpdate
Before youupdate anycomponent ofyour deployment (including intrusion rules, VDB, orGeoDB) read the
release notes oradvisory textthataccompanies theupdate. These provide critical andrelease-specific
information, including compatibility ,prerequisites, new capabilities, behavior changes, andwarnings.
Scheduled Updates
Thesystem schedules tasks —including updates —inUTC. This means thatwhen they occur locally depends
onthedate andyour specific location. Also, because updates arescheduled inUTC, they donotadjust for
Daylight Saving Time, summer time, oranysuch seasonal adjustments thatyoumay observe inyour location.
Ifyouareaffected, scheduled updates occur onehour "later" inthesummer than inthewinter ,according to
local time.
Westrongly recommend youreview scheduled updates tobesure they occur when youintend. Important
Bandwidth Guidelines
Toupgrade athesystem software orperform areadiness check, theupgrade package must beontheappliance.
Upgrade package sizes vary.Make sure youhave thebandwidth toperform alargedata transfer toyour
managed devices. SeeGuidelines forDownloading Data from theFirepower Management Center toManaged
Devices (Troubleshooting TechNote).
Update theVulnerability Database (VDB)
TheCisco vulnerability database (VDB) isadatabase ofknown vulnerabilities towhich hosts may be
susceptible, aswell asfingerprints foroperating systems, clients, andapplications. Thesystem uses theVDB
tohelp determine whether aparticular host increases your riskofcompromise.
Cisco issues periodic updates totheVDB. Thetime ittakes toupdate theVDB anditsassociated mappings
onthemanagement center depends onthenumber ofhosts inyour network map. Asaruleofthumb, divide
thenumber ofhosts by1000 todetermine theapproximate number ofminutes toperform theupdate.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
215System Settings
Guidelines and Limitations forSystem Updates

Theinitial setup onthemanagement center automatically downloads andinstalls thelatest VDB from Cisco
asaone-time operation. Italsoschedules aweekly tasktodownload thelatest available software updates,
which includes thelatest VDB. Werecommend youreview thisweekly taskandadjust ifnecessary .Optionally ,
schedule anew weekly tasktoactually update theVDB anddeploy configurations. Formore information,
seeVulnerability Database Update Automation ,onpage 355.
ForVDB 343+, allapplication detector information isavailable through Cisco Secure Firewall Application
Detectors .This siteincludes asearchable database ofapplication detectors. Therelease notes provide
information onchanges foraparticular VDB release.
ForVDB 363+, thesystem installs asmaller VDB (also called VDB lite)onlower memory devices running
Snort 2.This smaller VDB contains thesame applications, butfewer detection patterns. Devices using the
smaller VDB canmiss some application identification versus devices using thefullVDB.
Schedule VDB Updates
Werecommend youschedule regular VDB updates. SeeVulnerability Database Update Automation ,onpage
355.
Manually Update theVDB
Usethisprocedure tomanually update theVDB. Starting with VDB 357, youcaninstall anyVDB asfarback
asthebaseline VDB forthemanagement center .
Donotperform tasks related tomapped vulnerabilities while theVDB isupdating. Even iftheMessage Center
shows noprogress forseveral minutes orindicates thattheupdate hasfailed, donotrestart theupdate. Instead,
contact Cisco TAC.
Inmost cases, thefirstdeploy after aVDB update restarts theSnort process, interrupting trafficinspection.
Thesystem warns youwhen thiswillhappen (updated application detectors andoperating system fingerprints
require arestart; vulnerability information does not). Whether trafficdrops orpasses without further inspection
during thisinterruption depends onhow thetargeted device handles traffic.Formore information, seeSnort
Restart TrafficBehavior ,onpage 176.Caution
Before you begin
Ifthemanagement center cannot access theCisco Support &Download site,gettheupdate yourself: Software
Download https://www .cisco.com/go/firepower-software .Choose anymanagement center model, then browse
totheCoverageandContent Updates page.
Procedure
Step 1 Choose System (
)>Content Updates >VDB Updates .
Step 2 Choose how youwant togettheVDB onto themanagement center .
•Direct download: Click theDownload Updates button.
•Manual upload: Click Upload Update ,then Choose Fileandbrowse totheVDB. After youchoose the
file,click Upload .
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
216System Settings
Schedule VDB Updates

Step 3 Install theVDB.
a)Next totheVulnerability andFingerprint Database update youwant toinstall, click either theInstall icon
(foranewer VDB) ortheRollback icon (foranolder VDB).
b)Choose themanagement center .
c)Click Install .
Monitor update progress intheMessage Center .After theupdate completes, thesystem uses thenew
vulnerability information. However ,youmust deploy before updated application detectors andoperating
system fingerprints cantake effect.
Step 4 Verify update success.
TheVDB update page shows thecurrent version.
What todonext
•Deploy configuration changes.
•Ifyoubased configurations onvulnerabilities, application detectors, orfingerprints thatarenolonger
available, examine those configurations tomake sure youarehandling trafficasexpected. Also, keep in
mind ascheduled tasktoupdate theVDB canundo arollback. Toavoid this, change thescheduled task
ordelete anynewer VDB packages.
Update theGeolocation Database (GeoDB)
Thegeolocation database (GeoDB) isadatabase thatyoucanleverage toview andfilter trafficbased on
geographical location. Weissue periodic updates totheGeoDB, andyoumust regularly update theGeoDB
tohave accurate geolocation information. Youcanseeyour current version onSystem (
)>Content
Updates >Geolocation Updates .
AGeoDB update overrides anyprevious versions. Themanagement center automatically updates itsmanaged
devices andyoudonotneed toredeploy .Although aGeoDB update does notinterrupt anyother system
functions (including theongoing collection ofgeolocation information), theupdate does consume system
resources while itcompletes.
Aspartoftheinitial configuration, thesystem schedules weekly GeoDB updates. Werecommend youreview
thistaskandmake changes ifnecessary ,asdescribed inSchedule GeoDB Updates ,onpage 217.
Schedule GeoDB Updates
Aspartoftheinitial configuration, thesystem schedules weekly GeoDB updates. Werecommend youreview
thistaskandmake changes ifnecessary ,asdescribed inthisprocedure.
Before you begin
Make sure themanagement center canaccess theCisco Support &Download site.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
217System Settings
Update theGeolocation Database (GeoDB)

Procedure
Step 1 Choose System (
)>Content Updates >Geolocation Updates .
Step 2 Under Recurring Geolocation Updates ,check Enable Recurring Weekly Updates... .
Step 3 Specify theUpdate Start Time.
Step 4 Click Save.
Manually Update theGeoDB
Usethisprocedure toperform anon-demand GeoDB update.
Before you begin
Ifthemanagement center cannot access theCisco Support &Download site,gettheupdate yourself: Software
Download .Choose anymanagement center model, then browse totheCoverageandContent Updates page.
Download thecountry code package.
Procedure
Step 1 Choose System (
)>Content Updates >Geolocation Updates .
Step 2 Under One-T imeGeolocation Update ,choose how youwant toupdate theGeoDB.
•Direct download: Choose Download andinstall... .
•Manual upload: Choose Upload andinstall... ,then click Choose Fileandbrowse tothecountry code
package youdownloaded earlier .
Step 3 Click Import .
Monitor update progress intheMessage Center .
Step 4 Verify update success.
TheGeoDB update page shows thecurrent version.
Update Intrusion Rules
Asnew vulnerabilities become known, theTalosIntelligence Group releases intrusion ruleupdates. These
updates affectintrusion rules, preprocessor rules, andthepolicies thatusetherules. Intrusion ruleupdates
arecumulative, andCisco recommends youalways import thelatest update. Youcannot import anintrusion
ruleupdate thateither matches orpredates theversion ofthecurrently installed rules.
Anintrusion ruleupdate may provide thefollowing:
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
218System Settings
Manually Update theGeoDB

•New andmodif iedrules andrule states —Rule updates provide new andupdated intrusion and
preprocessor rules. Fornewrules, therulestate may bedifferent ineach system-provided intrusion policy .
Forexample, anew rulemay beenabled intheSecurity over Connectivity intrusion policy anddisabled
intheConnectivity over Security intrusion policy .Rule updates may alsochange thedefault state of
existing rules, ordelete existing rules entirely .
•New rule categories —Rule updates may include new rulecategories, which arealways added.
•Modif iedpreprocessor andadvanced settings —Rule updates may change theadvanced settings in
thesystem-provided intrusion policies andthepreprocessor settings insystem-provided network analysis
policies. They canalsoupdate default values fortheadvanced preprocessing andperformance options
inyour access control policies.
•New andmodif iedvariables —Rule updates may modify default values forexisting default variables,
butdonotoverride your changes. New variables arealways added.
Understanding When Intrusion Rule Updates Modify Policies
Intrusion ruleupdates canaffectboth system-provided andcustom network analysis policies, aswell asall
access control policies:
•system provided —Changes tosystem-provided network analysis andintrusion policies, aswell asany
changes toadvanced access control settings, automatically take effectwhen youre-deploy thepolicies
after theupdate.
•custom —Because every custom network analysis andintrusion policy uses asystem-provided policy as
itsbase, orastheeventual base inapolicy chain, ruleupdates canaffectcustom network analysis and
intrusion policies. However ,youcanprevent ruleupdates from automatically making those changes.
This allows youtoupdate system-provided base policies manually ,onaschedule independent ofrule
update imports. Regardless ofyour choice (implemented onaper-custom-policy basis), updates to
system-provided policies donotoverride anysettings youcustomized.
Note thatimporting aruleupdate discards allcached changes tonetwork analysis andintrusion policies. For
your convenience, theRule Updates page listspolicies with cached changes andtheusers who made those
changes.
Deploying Intrusion Rule Updates
Forchanges made byanintrusion ruleupdate totakeeffect, youmust redeploy configurations. When importing
aruleupdate, youcanconfigure thesystem toautomatically redeploy toaffected devices. This approach is
especially useful ifyouallow theintrusion ruleupdate tomodify system-provided base intrusion policies.
Although aruleupdate byitself does notrestart theSnort process when youdeploy ,other changes youhave
made may.Restarting Snort briefly interrupts trafficflow andinspection onalldevices, including those
configured forhigh availability/scalability .Interface configurations determine whether trafficdrops orpasses
without inspection during theinterruption. When youdeploy without restarting Snort, resource demands may
result inasmall number ofpackets dropping without inspection.Caution
Recurring Intrusion Rule Updates
Youcanimport ruleupdates onadaily ,weekly ,ormonthly basis, using theRule Updates page.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
219System Settings
Update Intrusion Rules

Applicable subtasks intheintrusion ruleupdate import occur inthefollowing order: download, install, base
policy update, andconfiguration deploy .When onesubtask completes, thenext subtask begins.
Atthescheduled time, thesystem installs theruleupdate anddeploys thechanged configuration asyou
specified intheprevious step. Youcanlogofforusetheweb interface toperform other tasks before orduring
theimport. When accessed during animport, theRule Update Logdisplays aRed Status (
),andyoucan
view messages asthey occur intheRule Update Logdetailed view .Depending ontheruleupdate sizeand
content, several minutes may pass before status messages appear .
Aspartoftheinitial configuration, thesystem schedules daily intrusion ruleupdates. Werecommend you
review thistaskandmake changes ifnecessary ,asdescribed inSchedule Intrusion Rule Updates ,onpage
220.
Importing Local Intrusion Rules
Alocal intrusion ruleisacustom standard textrulethatyouimport from alocal machine asaplain textfile
with ASCII orUTF-8 encoding. Youcancreate local rules using theinstructions intheSnort users manual,
which isavailable athttp://www .snort.or g.
Schedule Intrusion Rule Updates
Aspartoftheinitial configuration, thesystem schedules daily intrusion ruleupdates. Werecommend you
review thistaskandmake changes ifnecessary ,asdescribed inthisprocedure.
Before you begin
•Make sure your process forupdating intrusion rules complies with your security policies.
•Consider theupdate's effectontrafficflow andinspection duetobandwidth constraints andSnort restarts.
Werecommend performing updates inamaintenance window .
•Make sure themanagement center canaccess theCisco Support &Download site.
Procedure
Step 1 Choose System (
)>Content Updates >Rule Updates .
Step 2 Under Recurring Rule Update Imports ,check Enable Recurring Rule Update Imports .
Step 3 Specify theImport Frequency andstart time.
Step 4 (Optional) Check Reapply allpolicies... todeploy after each update.
Step 5 Click Save.
Manually Update Intrusion Rules
Usethisprocedure toperform anon-demand intrusion ruleupdate.
Before you begin
•Make sure your process forupdating intrusion rules complies with your security policies.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
220System Settings
Schedule Intrusion Rule Updates

•Consider theupdate's effectontrafficflow andinspection duetobandwidth constraints andSnort restarts.
Werecommend performing updates inamaintenance window .
•Ifthemanagement center cannot access theCisco Support &Download site,gettheupdate yourself:
https://www .cisco.com/go/firepower-software .Choose anymanagement center model, then browse to
theCoverageandContent Updates page.
Procedure
Step 1 Choose System (
)>Content Updates >Rule Updates .
Step 2 Under One-T imeRule Update/Rules Import ,choose how youwant toupdate intrusion rules.
•Direct download: Choose Download new rule update... .
•Manual upload: Choose Rule update ortextrule file...,then click Choose Fileandbrowse tothe
intrusion ruleupdate.
Step 3 (Optional) Check Reapply allpolicies... todeploy after theupdate.
Step 4 Click Import .
Monitor update progress intheMessage Center .Even iftheMessage Center shows noprogress forseveral
minutes orindicates thattheupdate hasfailed, donotrestart theupdate. Instead, contact Cisco TAC.
Step 5 Verify update success.
Theruleupdate page shows thecurrent version.
What todonext
Ifyoudidnotdeploy asapartoftheupdate, deploy now.
Import Local Intrusion Rules
Usethisprocedure toimport local intrusion rules. Imported intrusion rules appear inthelocal rulecategory
inadisabled state.
Before you begin
•Make sure your local rulefilefollows theguidelines described inBest Practices forImporting Local
Intrusion Rules ,onpage 222.
•Make sure your process forimporting local intrusion rules complies with your security policies.
•Consider theimport's effectontrafficflow andinspection duetobandwidth constraints andSnort restarts.
Werecommend scheduling ruleupdates during maintenance windows.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
221System Settings
Import Local Intrusion Rules

Procedure
Step 1 Choose System (
)>Content Updates >Rule Updates .
Youcanalsoclick Import Rules intheintrusion rules editor (Objects >Intrusion Rules ).
Step 2 (Optional) Delete existing local rules.
Click Delete AllLocal Rules ,then confirm thatyouwant tomove allcreated andimported intrusion rules
tothedeleted folder .
Step 3 Under One-T imeRule Update/Rules Import ,choose Rule update ortextrule filetoupload andinstall ,
then click Choose Fileandbrowse toyour local rulefile.
Step 4 Click Import .
Youcanmonitor import progress intheMessage Center .Even iftheMessage Center shows noprogress for
several minutes orindicates thattheupdate hasfailed, donotrestart theimport. Instead, contact Cisco TAC.
What todonext
•Edit intrusion policies andenable therules youimported.
•Deploy configuration changes.
Best Practices forImporting Local Intrusion Rules
Observe thefollowing guidelines when importing alocal rulefile:
•Therules importer requires thatallcustom rules areimported inaplain textfileencoded inASCII or
UTF-8.
•Thetextfilename caninclude alphanumeric characters, spaces, andnospecial characters other than
underscore (_),period (.),anddash (-).
•Thesystem imports local rules preceded with asingle pound character (#),butthey areflagged asdeleted.
•Thesystem imports local rules preceded with asingle pound character (#),anddoes notimport local
rules preceded with twopound characters (##).
•Rules cannot contain anyescape characters.
•Youdonothave tospecify aGenerator ID(GID) when importing alocal rule. Ifyoudo,specify only
GID 1forastandard textrule.
•When importing aruleforthefirsttime, donotspecify aSnort ID(SID) orrevision number .This avoids
collisions with SIDs ofother rules, including deleted rules. Thesystem willautomatically assign therule
thenext available custom ruleSIDof1000000 orgreater ,andarevision number of1.
Ifyoumust import rules with SIDs, aSIDcanbeanyunique number 1,000,000 orgreater .
•When importing anupdated version ofalocal ruleyouhave previously imported, orwhen reinstating a
local ruleyouhave deleted, youmust include theSIDassigned bythesystem andarevision number
greater than thecurrent revision number .Youcandetermine therevision number foracurrent ordeleted
rulebyediting therule.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
222System Settings
Best Practices forImporting Local Intrusion Rules

Thesystem automatically increments therevision number when youdelete alocal
rule; thisisadevice thatallows youtoreinstate local rules. Alldeleted local rules
aremoved from thelocal rulecategory tothedeleted rulecategory .Note
•Import local rules ontheprimary management center inahigh availability pairtoavoid SIDnumbering
issues.
•Theimport fails ifarulecontains anyofthefollowing: .
•ASIDgreater than 2147483647.
•Alistofsource ordestination ports thatislonger than 64characters.
•Policy validation fails ifyouenable animported local rulethatuses thedeprecated threshold keyword
incombination with theintrusion event thresholding feature inanintrusion policy .
•Allimported local rules areautomatically saved inthelocal rulecategory .
•Thesystem always setslocal rules thatyouimport tothedisabled rulestate. Youmust manually setthe
state oflocal rules before youcanusethem inyour intrusion policy .
View Intrusion Rule Update Logs
Thesystem generates logs ofruleupdates/imports, listed bytimestamp, user,andwhether each update
succeeded orfailed. These logs contain detailed import information onallupdated rules andcomponents; see
Intrusion Rule Update LogDetails ,onpage 223.Usethisprocedure toview ruleimport logs. Note thatdeleting
animport logdoes notdelete theimported objects.
Procedure
Step 1 Choose System (
)>Content Updates >Rule Updates .
Step 2 Click Rule Update Log.
Step 3 (Optional) Viewdetails foranyruleupdate byclicking View(
)next tothelogfile.
Intrusion Rule Update Log Details
Yousearch theentire Rule Update Import Logdatabase even when youinitiate asearch byclicking Sear ch
onthetoolbar from theRule Update Import Logdetailed view with only therecords forasingle import file
displayed. Make sure yousetyour time constraints toinclude allobjects youwant toinclude inthesearch.Tip
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
223System Settings
View Intrusion Rule Update Logs

Table 15:Intrusion Rule Update Log Details
Description Field
Anindication thatoneofthefollowing hasoccurred fortheobject type:
•new(forarule, thisisthefirsttime therulehasbeen stored onthisappliance)
•changed (foraruleupdate component orrule, theruleupdate component hasbeen modified, ortherule
hasahigher revision number andthesame GID andSID)
•collision (foraruleupdate component orrule, import wasskipped because itsrevision conflicts with
anexisting component orruleontheappliance)
•deleted (forrules, therulehasbeen deleted from theruleupdate)
•enabled (foraruleupdate edit, apreprocessor ,rule, orother feature hasbeen enabled inadefault policy
provided with thesystem)
•disabled (forrules, therulehasbeen disabled inadefault policy provided with thesystem)
•drop (forrules, therulehasbeen settoDrop andGenerate Events inadefault policy provided with the
system)
•error (foraruleupdate orlocal rulefile,theimport failed)
•apply (theReapply allpolicies after therule update import completes option wasenabled forthe
import)Action
Thedefault action defined bytheruleupdate. When theimported object type isrule ,thedefault action is
Pass ,Alert ,orDrop .Forallother imported object types, there isnodefault action.Default Action
Astring unique tothecomponent orrule. Forrules, theGID, SID, andprevious revision number forachanged
rule, displayed aspreviously (GID:SID:Rev) .This field isblank forarulethathasnotchanged.Details
Thegenerator IDforarule. Forexample, 1(standard textrule,Global domain orlegacy GID)or3(shared
object rule).GID
Thename oftheimported object, which forrules corresponds totheruleMessage field, andforruleupdate
components isthecomponent name.Name
Forimported rules, thisfield displaysAll.This means thattherulewasimported successfully ,andcanbe
enabled inallappropriate default intrusion policies. Forother types ofimported objects, thisfield isblank.Policy
Therevision number forarule. Rev
Theruleupdate filename. Rule Update
TheSIDforarule. SID
Thetime anddate theimport began. Time
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
224System Settings
Intrusion Rule Update Log Details

Description Field
Thetype ofimported object, which canbeoneofthefollowing:
•ruleupdatecomponent (animported component such asarulepack orpolicy pack)
•rule (forrules, anew orupdated rule)
•policyapply (theReapply allpolicies after therule update import completes option wasenabled
fortheimport)Type
Thecount (1)foreach record. TheCount field appears inatable view when thetable isconstrained, andthe
Rule Update Logdetailed view isconstrained bydefault toruleupdate records. This field isnotsearchable.Count
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
225System Settings
Intrusion Rule Update Log Details

Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
226System Settings
Intrusion Rule Update Log Details

CHAPTER 12
Licenses
This chapter provides in-depth information about thedifferent license types, service subscriptions, licensing
requirements andmore.
TheManagement Center supports either aSmart License oralegacy PAK(Product Activation Keys) license
foritsplatform license.Note
•About Licenses ,onpage 227
•Requirements andPrerequisites forLicensing ,onpage 243
•Create aCisco Account ,onpage 244
•Create aSmart Account andAdd Licenses ,onpage 244
•Configure Smart Licensing ,onpage 246
•Configure Legacy Management Center PAK-Based Licenses ,onpage 253
•Additional Information about Licensing ,onpage 254
About Licenses
Cisco Smart Licensing isaflexible licensing model thatprovides youwith aneasier ,faster ,andmore consistent
way topurchase andmanage software across theCisco portfolio andacross your organization. And it’s
secure—you control what users canaccess. WithSmart Licensing youget:
•Easy Activation: Smart Licensing establishes apool ofsoftware licenses thatcanbeused across the
entire organization—no more PAKs (Product Activation Keys).
•UnifiedManagement: MyCisco Entitlements (MCE) provides acomplete view intoallofyour Cisco
products andservices inaneasy-to-use portal, soyoualways know what youhave andwhat youare
using.
•License Flexibility: Yoursoftware isnotnode-locked toyour hardware, soyoucaneasily useand
transfer licenses asneeded.
TouseSmart Licensing, youmust firstsetupaSmart Account onCisco Software Central (software.cisco.com).
Foramore detailed overview onCisco Licensing, gotocisco.com/go/licensingguide
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
227

Smart Software Manager and Accounts
When youpurchase oneormore licenses, youmanage them intheSmart Software Manager:
https://software.cisco.com/#module/SmartLicensing .TheSmart Software Manager letsyoucreate aprimary
account foryour organization. Ifyoudonotyethave anaccount, click thelinktosetupanew account .The
Smart Software Manager letsyoucreate aprimary account foryour organization. Forinstructions, seeCreate
aCisco Account .
Bydefault, your licenses areassigned totheDefault Virtual Account under your primary account. Asthe
account administrator ,youcancreate additional virtual accounts; forexample, forregions, departments, or
subsidiaries. Multiple virtual accounts help youmanage largenumbers oflicenses anddevices.
Youmanage licenses byvirtual account. Only thatvirtual account’ sdevices canusethelicenses assigned to
theaccount. Ifyouneed additional licenses, youcantransfer anunused license from another virtual account.
Youcanalsotransfer devices between virtual accounts.
How Licensing Works fortheManagement Center and Devices
Themanagement center registers with theSmart Software Manager ,andthen assigns licenses foreach managed
device. Devices donotregister directly with theSmart Software Manager .
Aphysical management center does notrequire alicense foritsown use.
Periodic Communication with theSmart Software Manager
Inorder tomaintain your product license entitlement, your product must communicate periodically with the
Smart Software Manager .
YouuseaProduct Instance Registration Token toregister themanagement center with theSmart Software
Manager .TheSmart Software Manager issues anIDcertificate forcommunication between themanagement
center andtheSmart Software Manager .This certificate isvalid foroneyear,although itwillberenewed
every sixmonths. IfanIDcertificate expires (after ayear with nocommunication), themanagement center
may beremoved from your account.
Themanagement center communicates with theSmart Software Manager onaperiodic basis. Ifyoumake
changes intheSmart Software Manager ,youcanrefresh theauthorization onthemanagement center sothe
changes immediately take effect. Youalsocanwait forthemanagement center tocommunicate asscheduled.
Yourmanagement center must either have direct internet access totheSmart Software Manager .In
non-air gapped deployments, normal license communication occurs every 30days, butwith thegrace period,
your management center willoperate forupto90days without contacting theSmart Software Manager .
Ensure thatthemanagement center contacts theSmart Software Manager before 90days have passed, orelse
themanagement center willrevert toanunregistered state.
Evaluation Mode
Before themanagement center registers with theSmart Software Manager ,itoperates for90days inevaluation
mode. Youcanassign feature licenses tomanaged devices, andthey willremain incompliance fortheduration
ofevaluation mode. When thisperiod ends, themanagement center becomes unregistered.
Ifyouregister themanagement center with theSmart Software Manager ,theevaluation mode ends. Ifyou
later deregister themanagement center ,youcannot resume evaluation mode, even ifyoudidnotinitially use
all90days.
Managing Firewall Threat Defense with Cloud-delivered Firewall Management Center inCisco Defense Orchestrator
228System Settings
Smart Software Manager and Accounts